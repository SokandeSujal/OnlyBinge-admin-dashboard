const _0x2edef7=_0x9c57;(function(_0x7d30d2,_0x4b28a2){const _0x224d39=_0x9c57,_0x4383a0=_0x7d30d2();while(!![]){try{const _0x42247b=parseInt(_0x224d39(0xe5))/0x1+parseInt(_0x224d39(0xd0))/0x2+parseInt(_0x224d39(0x188))/0x3+-parseInt(_0x224d39(0x129))/0x4*(parseInt(_0x224d39(0x1d7))/0x5)+-parseInt(_0x224d39(0x124))/0x6+parseInt(_0x224d39(0x169))/0x7+-parseInt(_0x224d39(0x16a))/0x8*(parseInt(_0x224d39(0x224))/0x9);if(_0x42247b===_0x4b28a2)break;else _0x4383a0['push'](_0x4383a0['shift']());}catch(_0x1e3a6f){_0x4383a0['push'](_0x4383a0['shift']());}}}(_0x3cd1,0xd568f),console[_0x2edef7(0x192)]('[ADMIN]\x20Initializing\x20Admin\x20Portal...'));function _0x3cd1(){const _0x2eb610=['Error\x20loading\x20watch\x20history','type','Error\x20approving\x20payment','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-users\x22></i><p>No\x20users\x20found</p></div>','1604491xCYbtu','963272FcTLPJ','logoutUserSessions','Add\x20New\x20User','logoutBtn','close-user-detail','Add\x20User','[ADMIN]\x20❌\x20Auth\x20check\x20exception:','Manage\x20Users','user_id','select','\x27,\x20\x27','upsert','[ADMIN]\x20loadRecentActivity()\x20called','set','querySelector','show','allow-user-form','classList','[ADMIN]\x20❌\x20Error\x20in\x20rejectPayment:','media_type','long','clear','[ADMIN]\x20✅\x20Payment\x20rejected','allow-user-modal','supabase','numeric','loginForm','adminEmailDisplay','toLowerCase','auth','1027407pKLkvX','[ADMIN]\x20✅\x20Users\x20fetched\x20successfully','update','[ADMIN]\x20approvePayment()\x20called\x20for:','[ADMIN]\x20❌\x20Error\x20in\x20handleAddUser:','[ADMIN]\x20✅\x20Pending\x20payments\x20fetched:','subscription-duration','[ADMIN]\x20❌\x20Missing\x20email\x20or\x20password','signOut','[ADMIN]\x20filterUsers()\x20called\x20with\x20filter:','log','[ADMIN]\x20✅\x20Allowed\x20users\x20fetched:','section','innerHTML','[ADMIN]\x20Initializing\x20dashboard...','map','<span\x20class=\x22status-badge\x20','delete','[ADMIN]\x20✅\x20Dashboard\x20initialization\x20complete','[ADMIN]\x20Payment\x20rejection\x20cancelled','[ADMIN]\x20Navigation\x20clicked:','Error\x20rejecting\x20payment','[ADMIN]\x20Fetching\x20recent\x20payments...','warning','round','push','[ADMIN]\x20❌\x20Container\x20not\x20found:','[ADMIN]\x20✅\x20Pending\x20payments\x20rendered','\x20months!','user_watch_history','[ADMIN]\x20Updating\x20payment\x20status\x20to\x20rejected...','user-detail-modal','Error\x20loading\x20user\x20authentication\x20data','with','error','status','fa-exclamation-triangle','[ADMIN]\x20❌\x20Auth\x20check\x20error:','trim','[ADMIN]\x20Found\x20nav\x20items:','admin-email','user_email','[ADMIN]\x20✅\x20Sign\x20in\x20successful:','<span\x20class=\x22status-badge\x20expired\x22>Expired\x20','created_at','size','logout-btn','User\x20Bookmarks','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-reject\x22\x20onclick=\x22rejectPayment(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20Payment\x20approval\x20cancelled','pending','en-US','\x20days\x20ago</span>','[ADMIN]\x20❌\x20Error\x20in\x20loadBookmarks:','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-title\x22>','watch-list','[ADMIN]\x20loadBookmarks()\x20called','abs','[ADMIN]\x20No\x20pending\x20payments\x20to\x20display','\x20approved','User\x20Search\x20History','loginModal','[ADMIN]\x20switchSection()\x20called\x20for:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Expiry:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','approvePayment','[ADMIN]\x20✅\x20Pending\x20payments:','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Joined:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','fa-exclamation-circle','email','title','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Expiry:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','[ADMIN]\x20✅\x20Recent\x20activity\x20rendered','submit','expiry_date','[ADMIN]\x20Fetching\x20users\x20from\x20auth.admin.listUsers()...','[ADMIN]\x20✅\x20User\x20added\x20successfully','\x20deleted','watch','5733045QBZwwj','[ADMIN]\x20✅\x20Users\x20loaded\x20and\x20filtered','[ADMIN]\x20✅\x20Allowed\x20users\x20map\x20loaded:','[ADMIN]\x20Updating\x20payment\x20status...','className','[ADMIN]\x20-\x20Pending\x20Users:','\x20ago','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Delete\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[data-section=\x22','[ADMIN]\x20Upserting\x20user\x20to\x20allowed_users...','episode','floor','[ADMIN]\x20❌\x20Pending\x20payments\x20container\x20not\x20found','Watches:','style','[ADMIN]\x20loadAllowedUsers()\x20called','Error\x20loading\x20user\x20details','[ADMIN]\x20Loading\x20screen\x20hidden','\x20added\x20for\x20','[ADMIN]\x20✅\x20Recent\x20payments\x20fetched:','User\x20','[ADMIN]\x20renderHistory()\x20called\x20for\x20type:','[ADMIN]\x20Fetching\x20bookmarks...','createElement','[ADMIN]\x20❌\x20Error\x20in\x20approvePayment:','[ADMIN]\x20❌\x20Logout\x20error:','User\x20not\x20found','join','currentDate','[ADMIN]\x20No\x20authenticated\x20user\x20found','dataset','[ADMIN]\x20✅\x20User\x20approved','[ADMIN]\x20✅\x20Payment\x20approved\x20successfully','timestamp','sort','bookmark-list','watch-history','with\x20query:','overview','[ADMIN]\x20Fetching\x20recent\x20allowed\x20users...','[ADMIN]\x20Admin\x20Supabase\x20client\x20initialized\x20with\x20service\x20role','[ADMIN]\x20❌\x20Sign\x20in\x20error:','[ADMIN]\x20✅\x20Stats\x20updated\x20in\x20UI','add','disabled','[ADMIN]\x20✅\x20User\x20details\x20modal\x20displayed','click','login-form','Please\x20select\x20a\x20duration','Failed\x20to\x20initialize\x20application','admin-email-display','Error\x20loading\x20statistics','Approve\x20payment\x20for\x20','user_search_history','[ADMIN]\x20❌\x20Dashboard\x20initialization\x20error:','length','[ADMIN]\x20❌\x20Error\x20fetching\x20search\x20history:','add-user-form','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i><p>No\x20pending\x20payments</p></div>','search','toISOString','[ADMIN]\x20✅\x20User\x20map\x20populated\x20with','Welcome\x20back,\x20Admin!','limit','[ADMIN]\x20❌\x20Error\x20fetching\x20recent\x20allowed\x20users:','deleteUser','[ADMIN]\x20loadUserMap()\x20called','[ADMIN]\x20❌\x20Error\x20in\x20loadStats:','all','[ADMIN]\x20⚠️\x20Notification\x20container\x20not\x20found','keys','searchList','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','admin','User\x20sessions\x20logged\x20out','No\x20user\x20returned\x20from\x20sign\x20in','setMonth','45vfZDFo','[ADMIN]\x20✅\x20Logged\x20out\x20successfully','[ADMIN]\x20❌\x20Login\x20error:','Error\x20loading\x20search\x20history','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-time\x22>','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','Error\x20deleting\x20user','.nav-item','Error\x20loading\x20pending\x20payments','[ADMIN]\x20❌\x20Error\x20rejecting\x20payment:','login-error','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Reject\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','appendChild','addEventListener','getElementById','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','watched_at','user-list','[ADMIN]\x20⚠️\x20Recent\x20activity\x20container\x20not\x20found','[ADMIN]\x20❌\x20Error\x20fetching\x20bookmarks:','idToEmail','loginError','[ADMIN]\x20Filter\x20clicked:','[ADMIN]\x20❌\x20Error\x20upserting\x20user:','Error\x20adding\x20user','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27','[ADMIN]\x20❌\x20Initialization\x20error:','[ADMIN]\x20openAllowModal()\x20called\x20for:','[ADMIN]\x20Showing\x20login\x20modal...','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','notification\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Logout\x20all\x20sessions\x20for\x20this\x20user?','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Joined:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','Admin\x20Portal','[ADMIN]\x20Add\x20user\x20form\x20listener\x20attached','Logged\x20out\x20successfully','target','__SUPABASE_SERVICE_ROLE_KEY__','addUserForm','[ADMIN]\x20viewUserDetails()\x20called\x20for\x20ID:','\x20minute','user_bookmarks','Pending\x20Payment\x20Approvals','values','[ADMIN]\x20❌\x20Error\x20updating\x20payment\x20status:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-item\x20','[ADMIN]\x20✅\x20Dashboard\x20data\x20loaded','charAt','Unknown\x20User','1799684fCyNfF','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-inbox\x22></i><p>No\x20history\x20found</p></div>','__SUPABASE_ANON_KEY__','[ADMIN]\x20Loading\x20dashboard\x20data...','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-logout-session\x22\x20onclick=\x22logoutUserSessions(\x27','transaction_id','[ADMIN]\x20✅\x20Search\x20history\x20fetched:','<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x20User','[ADMIN]\x20logoutUserSessions()\x20called\x20for\x20ID:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20❌\x20Error\x20fetching\x20recent\x20payments:','Search:\x20\x22','[ADMIN]\x20Loading\x20auth\x20users\x20and\x20map...','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Searches</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--success);\x22>','loadingScreen','[ADMIN]\x20Caching\x20DOM\x20elements...','rejectPayment','added_at','[ADMIN]\x20All\x20global\x20functions\x20exported','user','allow-user-email','1611700ovxKKf','filter','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22notification-close\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','[ADMIN]\x20handleAddUser()\x20called','get','success','includes','[ADMIN]\x20Date\x20updated:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-time\x22>','none','[ADMIN]\x20Setting\x20up\x20event\x20listeners...','signOutUserSessions','\x20approved\x20for\x20','toLocaleDateString','allowed_users','\x20-\x20','\x20now\x20has\x201\x20month\x20access','[ADMIN]\x20❌\x20Error\x20fetching\x20users:','[ADMIN]\x20❌\x20Error\x20deleting\x20user:','[ADMIN]\x20Login\x20attempt\x20started...','Just\x20now','[ADMIN]\x20❌\x20Error\x20logging\x20out\x20sessions:','[ADMIN]\x20==============================================','query','[ADMIN]\x20Updating\x20current\x20date...','new-user-email','from','value','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Approving...','[ADMIN]\x20✅\x20Watch\x20history\x20fetched:','forEach','[ADMIN]\x20✅\x20Recent\x20allowed\x20users\x20fetched:','Payment\x20approved!\x20','[ADMIN]\x20Fetching\x20pending\x20payments...','expired-subs','slice','pending_payments','active-subs','div','searched_at','userList','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','[ADMIN]\x20loadUsers()\x20called','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-bell\x22></i><p>No\x20recent\x20activity</p></div>','[ADMIN]\x20Showing\x20error:','season','preventDefault','ceil','textContent','[ADMIN]\x20✅\x20Auth\x20users\x20loaded:','[ADMIN]\x20App\x20initialization\x20complete','rejected','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>User\x20Details</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-detail-grid\x22\x20style=\x22display:\x20grid;\x20gap:\x2020px;\x20margin-top:\x2020px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Account\x20Information</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20gap:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Email:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','total-users','approved','bookmark','exact','[ADMIN]\x20DOMContentLoaded\x20event\x20fired','emailToId','duration','[ADMIN]\x20Fetching\x20pending_payments...','remove','[ADMIN]\x20Stats\x20calculated:','2762658AVElGE','payments','.filter-btn','[ADMIN]\x20loadSearchHistory()\x20called','search-history','4veEStz','getUser','[ADMIN]\x20rejectPayment()\x20called\x20for\x20ID:','querySelectorAll','Payment\x20rejected','hidden','.section','[ADMIN]\x20loadWatchHistory()\x20called','[ADMIN]\x20✅\x20History\x20rendered\x20for\x20type:','Please\x20fill\x20all\x20fields','[ADMIN]\x20Login\x20form\x20listener\x20attached','[ADMIN]\x20❌\x20Error\x20approving\x20user:','New\x20payment\x20from\x20','[ADMIN]\x20loadStats()\x20called','.notification-close','<i\x20class=\x22fas\x20fa-sign-in-alt\x22></i>\x20Admin\x20Login','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','sectionTitle','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Adding...','search-list','users','Invalid\x20credentials','Reject\x20this\x20payment?\x20The\x20user\x20will\x20need\x20to\x20submit\x20again.','getMonth','[ADMIN]\x20❌\x20Error\x20in\x20loadUsers:','[ADMIN]\x20handleAllowUser()\x20called','[ADMIN]\x20deleteUser()\x20called\x20for:','current-date','<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20Lifetime</span>','pending-users','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-approve\x22\x20onclick=\x22approvePayment(\x27','input','[ADMIN]\x20✅\x20User\x20approved\x20successfully','search-filter','active','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Submitted:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','signInWithPassword','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20Logout\x20button\x20listener\x20attached','</span>','createClient','[ADMIN]\x20Showing\x20notification:','watchList','watch-filter','warn','Error\x20logging\x20out','message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-email\x22>','[ADMIN]\x20Fetching\x20watch\x20history...','dashboard','?\x20This\x20will\x20give\x20them\x201\x20month\x20access.','reset','Please\x20enter\x20email\x20and\x20password','button[type=\x22submit\x22]','order','[ADMIN]\x20❌\x20Error\x20fetching\x20allowed_users:','Error\x20loading\x20users','closeAllowModal','notification-container','\x20days\x20remaining</span>'];_0x3cd1=function(){return _0x2eb610;};return _0x3cd1();}const SUPABASE_URL='__SUPABASE_URL__',SUPABASE_ANON_KEY=_0x2edef7(0xd2),SUPABASE_SERVICE_ROLE_KEY=_0x2edef7(0xc4),supabase=window[_0x2edef7(0x182)][_0x2edef7(0x151)](SUPABASE_URL,SUPABASE_ANON_KEY);console[_0x2edef7(0x192)]('[ADMIN]\x20Regular\x20Supabase\x20client\x20initialized');const adminSupabase=window[_0x2edef7(0x182)][_0x2edef7(0x151)](SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY,{'auth':{'autoRefreshToken':![],'persistSession':![]}});console[_0x2edef7(0x192)](_0x2edef7(0x1ff));let adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],currentFilter='all',allSearchHistory=[],allWatchHistory=[],allBookmarks=[];console['log']('[ADMIN]\x20State\x20initialized');const DOM={};function cacheDOM(){const _0x2819a1=_0x2edef7;console['log'](_0x2819a1(0xdf)),DOM[_0x2819a1(0x1c6)]=document['getElementById']('login-modal'),DOM[_0x2819a1(0x15a)]=document[_0x2819a1(0x232)](_0x2819a1(0x15a)),DOM[_0x2819a1(0x184)]=document['getElementById'](_0x2819a1(0x206)),DOM[_0x2819a1(0xb3)]=document['getElementById'](_0x2819a1(0x22e)),DOM[_0x2819a1(0x16d)]=document[_0x2819a1(0x232)](_0x2819a1(0x1b6)),DOM['loadingScreen']=document['getElementById']('loading-screen'),DOM[_0x2819a1(0xc5)]=document['getElementById'](_0x2819a1(0x210)),DOM[_0x2819a1(0x10d)]=document['getElementById'](_0x2819a1(0xaf)),DOM[_0x2819a1(0x21e)]=document[_0x2819a1(0x232)](_0x2819a1(0x13c)),DOM[_0x2819a1(0x153)]=document[_0x2819a1(0x232)](_0x2819a1(0x1c0)),DOM['bookmarkList']=document[_0x2819a1(0x232)]('bookmark-list'),DOM[_0x2819a1(0x13a)]=document['getElementById']('section-title'),DOM['currentDate']=document[_0x2819a1(0x232)](_0x2819a1(0x144)),DOM[_0x2819a1(0x185)]=document['getElementById'](_0x2819a1(0x209)),console[_0x2819a1(0x192)]('[ADMIN]\x20DOM\x20elements\x20cached:',Object[_0x2819a1(0x21d)](DOM));}document[_0x2edef7(0x231)]('DOMContentLoaded',()=>{const _0x2f6100=_0x2edef7;console[_0x2f6100(0x192)](_0x2f6100(0x11e)),initApp();});async function initApp(){const _0x1d0731=_0x2edef7;console['log']('[ADMIN]\x20Starting\x20app\x20initialization...');try{cacheDOM(),setupEventListeners(),updateCurrentDate(),await checkAuth(),console[_0x1d0731(0x192)](_0x1d0731(0x117));}catch(_0x575e39){console['error'](_0x1d0731(0xb8),_0x575e39),showNotification(_0x1d0731(0x208),_0x1d0731(0x1aa));}finally{hideLoadingScreen();}}function hideLoadingScreen(){const _0x4fa11f=_0x2edef7;console[_0x4fa11f(0x192)]('[ADMIN]\x20Hiding\x20loading\x20screen...'),DOM['loadingScreen']&&(DOM[_0x4fa11f(0xde)]['classList'][_0x4fa11f(0x202)]('fade-out'),setTimeout(()=>{const _0x4c7695=_0x4fa11f;DOM[_0x4c7695(0xde)][_0x4c7695(0x1e5)]['display']=_0x4c7695(0xee),console['log'](_0x4c7695(0x1e8));},0x1f4));}function setupEventListeners(){const _0x130949=_0x2edef7;console[_0x130949(0x192)](_0x130949(0xef)),DOM['loginForm']?.[_0x130949(0x231)](_0x130949(0x1d1),handleLogin),console['log'](_0x130949(0x133)),DOM[_0x130949(0x16d)]?.[_0x130949(0x231)]('click',handleLogout),console[_0x130949(0x192)](_0x130949(0x14f));const _0x3e9125=document[_0x130949(0x12c)]('.nav-item[data-section]');console[_0x130949(0x192)](_0x130949(0x1af),_0x3e9125[_0x130949(0x20e)]),_0x3e9125[_0x130949(0x103)](_0x30a1d9=>{_0x30a1d9['addEventListener']('click',_0x42e66c=>{const _0x5a0ca5=_0x9c57;_0x42e66c[_0x5a0ca5(0x113)]();const _0x396ca1=_0x30a1d9[_0x5a0ca5(0x1f5)][_0x5a0ca5(0x194)];console[_0x5a0ca5(0x192)](_0x5a0ca5(0x19c),_0x396ca1),switchSection(_0x396ca1);});}),DOM['addUserForm']?.['addEventListener'](_0x130949(0x1d1),handleAddUser),console[_0x130949(0x192)](_0x130949(0xc1)),document[_0x130949(0x232)](_0x130949(0x17a))?.[_0x130949(0x231)](_0x130949(0x1d1),handleAllowUser);const _0x361ed6=document[_0x130949(0x12c)](_0x130949(0x126));console['log']('[ADMIN]\x20Found\x20filter\x20buttons:',_0x361ed6[_0x130949(0x20e)]),_0x361ed6['forEach'](_0x3aab72=>{const _0x708240=_0x130949;_0x3aab72[_0x708240(0x231)]('click',()=>{const _0x5d4a6a=_0x708240;console['log'](_0x5d4a6a(0xb4),_0x3aab72['dataset'][_0x5d4a6a(0xe6)]),document[_0x5d4a6a(0x12c)](_0x5d4a6a(0x126))[_0x5d4a6a(0x103)](_0x35f0a9=>_0x35f0a9[_0x5d4a6a(0x17b)][_0x5d4a6a(0x122)](_0x5d4a6a(0x14b))),_0x3aab72[_0x5d4a6a(0x17b)]['add'](_0x5d4a6a(0x14b)),currentFilter=_0x3aab72['dataset'][_0x5d4a6a(0xe6)],filterUsers();});}),document[_0x130949(0x232)](_0x130949(0x14a))?.[_0x130949(0x231)](_0x130949(0x148),_0x3e4a20=>{const _0x16744b=_0x130949;filterHistory('search',_0x3e4a20['target'][_0x16744b(0x100)]);}),document[_0x130949(0x232)](_0x130949(0x154))?.[_0x130949(0x231)](_0x130949(0x148),_0x1d5a24=>{const _0x1df544=_0x130949;filterHistory(_0x1df544(0x1d6),_0x1d5a24[_0x1df544(0xc3)]['value']);}),document[_0x130949(0x232)]('bookmark-filter')?.[_0x130949(0x231)](_0x130949(0x148),_0x19d584=>{const _0x37397a=_0x130949;filterHistory(_0x37397a(0x11c),_0x19d584[_0x37397a(0xc3)]['value']);}),document[_0x130949(0x232)](_0x130949(0x16e))?.['addEventListener'](_0x130949(0x205),()=>{const _0x4bc0e8=_0x130949;document[_0x4bc0e8(0x232)](_0x4bc0e8(0x1a7))[_0x4bc0e8(0x17b)][_0x4bc0e8(0x202)](_0x4bc0e8(0x12e));}),console[_0x130949(0x192)]('[ADMIN]\x20All\x20event\x20listeners\x20set\x20up');}function updateCurrentDate(){const _0x22a0a5=_0x2edef7;console[_0x22a0a5(0x192)](_0x22a0a5(0xfd));if(DOM[_0x22a0a5(0x1f3)]){const _0x3731c2=new Date();DOM[_0x22a0a5(0x1f3)][_0x22a0a5(0x115)]=_0x3731c2[_0x22a0a5(0xf2)](_0x22a0a5(0x1bc),{'weekday':'long','year':_0x22a0a5(0x183),'month':_0x22a0a5(0x17e),'day':_0x22a0a5(0x183)}),console['log'](_0x22a0a5(0xec),DOM['currentDate'][_0x22a0a5(0x115)]);}}function formatRelativeTime(_0x3b2fdb){const _0x146435=_0x2edef7,_0x39adad=new Date(_0x3b2fdb),_0x896b45=new Date(),_0x266006=_0x896b45-_0x39adad,_0x3157ae=Math[_0x146435(0x1e2)](_0x266006/0xea60),_0x184d13=Math[_0x146435(0x1e2)](_0x266006/0x36ee80),_0x5c367f=Math['floor'](_0x266006/0x5265c00);if(_0x3157ae<0x1)return _0x146435(0xf9);if(_0x3157ae<0x3c)return _0x3157ae+_0x146435(0xc7)+(_0x3157ae>0x1?'s':'')+_0x146435(0x1dd);if(_0x184d13<0x18)return _0x184d13+'\x20hour'+(_0x184d13>0x1?'s':'')+_0x146435(0x1dd);return _0x5c367f+'\x20day'+(_0x5c367f>0x1?'s':'')+_0x146435(0x1dd);}async function checkAuth(){const _0x2ec5dd=_0x2edef7;console[_0x2ec5dd(0x192)]('[ADMIN]\x20Checking\x20authentication\x20status...');try{const {data:_0x4f5efb,error:_0x10eb1d}=await supabase[_0x2ec5dd(0x187)][_0x2ec5dd(0x12a)]();if(_0x10eb1d){console[_0x2ec5dd(0x1aa)](_0x2ec5dd(0x1ad),_0x10eb1d),showLoginModal();return;}if(!_0x4f5efb?.[_0x2ec5dd(0xe3)]){console[_0x2ec5dd(0x192)](_0x2ec5dd(0x1f4)),showLoginModal();return;}adminUser=_0x4f5efb['user'],console[_0x2ec5dd(0x192)]('[ADMIN]\x20✅\x20User\x20authenticated:',adminUser['email']),await initDashboard();}catch(_0x13dcd7){console['error'](_0x2ec5dd(0x170),_0x13dcd7),showLoginModal();}}function showLoginModal(){const _0x23ce2d=_0x2edef7;console['log'](_0x23ce2d(0xba));if(DOM[_0x23ce2d(0x1c6)])DOM[_0x23ce2d(0x1c6)]['classList'][_0x23ce2d(0x122)](_0x23ce2d(0x12e));if(DOM['dashboard'])DOM[_0x23ce2d(0x15a)][_0x23ce2d(0x17b)][_0x23ce2d(0x202)](_0x23ce2d(0x12e));}async function handleLogin(_0x197794){const _0x561f19=_0x2edef7;_0x197794[_0x561f19(0x113)](),console[_0x561f19(0x192)](_0x561f19(0xf8));const _0x47d871=document[_0x561f19(0x232)](_0x561f19(0x1b0))?.[_0x561f19(0x100)],_0x31ee50=document[_0x561f19(0x232)]('admin-password')?.[_0x561f19(0x100)],_0x3cfa0f=DOM['loginForm'][_0x561f19(0x178)](_0x561f19(0x15e));console[_0x561f19(0x192)]('[ADMIN]\x20Login\x20email:',_0x47d871);if(!_0x47d871||!_0x31ee50){console['error'](_0x561f19(0x18f)),showError(_0x561f19(0x15d));return;}_0x3cfa0f[_0x561f19(0x203)]=!![],_0x3cfa0f[_0x561f19(0x195)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Signing\x20In...';try{console['log']('[ADMIN]\x20Attempting\x20sign\x20in\x20with\x20Supabase...');const {data:_0x26865f,error:_0x3fc8b2}=await supabase[_0x561f19(0x187)][_0x561f19(0x14d)]({'email':_0x47d871,'password':_0x31ee50});if(_0x3fc8b2){console[_0x561f19(0x1aa)](_0x561f19(0x200),_0x3fc8b2);throw _0x3fc8b2;}if(!_0x26865f[_0x561f19(0xe3)]){console['error']('[ADMIN]\x20❌\x20No\x20user\x20returned\x20from\x20sign\x20in');throw new Error(_0x561f19(0x222));}adminUser=_0x26865f['user'],console['log'](_0x561f19(0x1b2),adminUser[_0x561f19(0x1cd)]),hideError();if(DOM['loginModal'])DOM[_0x561f19(0x1c6)][_0x561f19(0x17b)][_0x561f19(0x202)](_0x561f19(0x12e));if(DOM[_0x561f19(0x15a)])DOM[_0x561f19(0x15a)][_0x561f19(0x17b)]['remove']('hidden');await initDashboard(),showNotification(_0x561f19(0x215),_0x561f19(0xea));}catch(_0x149f80){console['error'](_0x561f19(0x226),_0x149f80),showError(_0x149f80[_0x561f19(0x157)]||_0x561f19(0x13e));}finally{_0x3cfa0f[_0x561f19(0x203)]=![],_0x3cfa0f['innerHTML']=_0x561f19(0x138);}}async function handleLogout(){const _0x230b10=_0x2edef7;console['log']('[ADMIN]\x20Logout\x20initiated...');try{await supabase[_0x230b10(0x187)][_0x230b10(0x190)](),adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],allSearchHistory=[],allWatchHistory=[],allBookmarks=[],console['log'](_0x230b10(0x225)),showLoginModal(),showNotification(_0x230b10(0xc2),_0x230b10(0xea));}catch(_0x13af06){console[_0x230b10(0x1aa)](_0x230b10(0x1f0),_0x13af06),showNotification(_0x230b10(0x156),_0x230b10(0x1aa));}}function showError(_0x1bcb2c){const _0x3b7ffb=_0x2edef7;console[_0x3b7ffb(0x192)](_0x3b7ffb(0x111),_0x1bcb2c),DOM[_0x3b7ffb(0xb3)]&&(DOM['loginError'][_0x3b7ffb(0x115)]=_0x1bcb2c,DOM[_0x3b7ffb(0xb3)][_0x3b7ffb(0x17b)][_0x3b7ffb(0x122)](_0x3b7ffb(0x12e)));}function hideError(){const _0xfa908e=_0x2edef7;DOM['loginError']&&DOM[_0xfa908e(0xb3)][_0xfa908e(0x17b)][_0xfa908e(0x202)](_0xfa908e(0x12e));}async function initDashboard(){const _0x32a9f6=_0x2edef7;console[_0x32a9f6(0x192)](_0x32a9f6(0x196));try{DOM[_0x32a9f6(0x185)]&&adminUser&&(DOM['adminEmailDisplay'][_0x32a9f6(0x115)]=adminUser[_0x32a9f6(0x1cd)],console['log']('[ADMIN]\x20Admin\x20email\x20displayed:',adminUser['email'])),console[_0x32a9f6(0x192)](_0x32a9f6(0xdc)),await loadUserMap(),console[_0x32a9f6(0x192)](_0x32a9f6(0x116),allAuthUsers[_0x32a9f6(0x20e)]),await loadAllowedUsers(),console[_0x32a9f6(0x192)](_0x32a9f6(0x1d9),allowedUserMap[_0x32a9f6(0x1b5)]),console[_0x32a9f6(0x192)](_0x32a9f6(0xd3)),await Promise[_0x32a9f6(0x21b)]([loadStats(),loadRecentActivity()]),console[_0x32a9f6(0x192)](_0x32a9f6(0xcd)),switchSection(_0x32a9f6(0x1fd)),console[_0x32a9f6(0x192)](_0x32a9f6(0x19a));}catch(_0x5a788c){console[_0x32a9f6(0x1aa)](_0x32a9f6(0x20d),_0x5a788c),showNotification('Error\x20loading\x20dashboard\x20data','error');}}async function loadUserMap(){const _0x3392c2=_0x2edef7;console['log'](_0x3392c2(0x219));try{console['log'](_0x3392c2(0x1d3));const {data:_0x10b965,error:_0x6bdb52}=await adminSupabase['auth'][_0x3392c2(0x220)]['listUsers']();if(_0x6bdb52){console[_0x3392c2(0x1aa)](_0x3392c2(0xf6),_0x6bdb52);throw _0x6bdb52;}console[_0x3392c2(0x192)](_0x3392c2(0x189)),allAuthUsers=_0x10b965?.[_0x3392c2(0x13d)]||[],userMap[_0x3392c2(0x11f)][_0x3392c2(0x17f)](),userMap[_0x3392c2(0xb2)][_0x3392c2(0x17f)]();let _0x486b42=0x0;for(const _0xcdcbd9 of allAuthUsers){_0xcdcbd9[_0x3392c2(0x1cd)]&&_0xcdcbd9['id']&&(userMap['emailToId']['set'](_0xcdcbd9[_0x3392c2(0x1cd)],_0xcdcbd9['id']),userMap['idToEmail'][_0x3392c2(0x177)](_0xcdcbd9['id'],_0xcdcbd9['email']),_0x486b42++);}console[_0x3392c2(0x192)](_0x3392c2(0x214),_0x486b42,_0x3392c2(0x13d));}catch(_0x1facf9){console[_0x3392c2(0x1aa)]('[ADMIN]\x20❌\x20Fatal\x20error\x20in\x20loadUserMap:',_0x1facf9),showNotification(_0x3392c2(0x1a8),'warning');}}async function loadAllowedUsers(){const _0x7281dc=_0x2edef7;console[_0x7281dc(0x192)](_0x7281dc(0x1e6));try{const {data:_0x518a33,error:_0x20f485}=await supabase['from'](_0x7281dc(0xf3))['select']('*');if(_0x20f485){console[_0x7281dc(0x1aa)](_0x7281dc(0x160),_0x20f485);throw _0x20f485;}console[_0x7281dc(0x192)](_0x7281dc(0x193),_0x518a33?.[_0x7281dc(0x20e)]||0x0),allowedUserMap[_0x7281dc(0x17f)](),_0x518a33['forEach'](_0x1b50c5=>{const _0x32757d=_0x7281dc;_0x1b50c5[_0x32757d(0x1cd)]&&allowedUserMap[_0x32757d(0x177)](_0x1b50c5[_0x32757d(0x1cd)],_0x1b50c5);});}catch(_0x15e12f){console[_0x7281dc(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20loadAllowedUsers:',_0x15e12f);}}async function loadStats(){const _0x54f1dc=_0x2edef7;console[_0x54f1dc(0x192)](_0x54f1dc(0x136));try{const _0xd4735f=allAuthUsers[_0x54f1dc(0x20e)],_0x4b5508=allowedUserMap[_0x54f1dc(0x1b5)],_0x36835e=_0xd4735f-_0x4b5508,_0x535de5=new Date(),_0x26f54a=Array[_0x54f1dc(0xff)](allowedUserMap[_0x54f1dc(0xca)]())[_0x54f1dc(0xe6)](_0x2d7e8e=>{if(!_0x2d7e8e['approved'])return![];if(!_0x2d7e8e['expiry_date'])return!![];return new Date(_0x2d7e8e['expiry_date'])>_0x535de5;})[_0x54f1dc(0x20e)],_0x194b4a=Array['from'](allowedUserMap[_0x54f1dc(0xca)]())[_0x54f1dc(0xe6)](_0x448fdc=>{const _0x2b122d=_0x54f1dc;if(!_0x448fdc['approved'])return![];if(!_0x448fdc[_0x2b122d(0x1d2)])return![];return new Date(_0x448fdc[_0x2b122d(0x1d2)])<=_0x535de5;})[_0x54f1dc(0x20e)];console[_0x54f1dc(0x192)](_0x54f1dc(0x123)),console['log']('[ADMIN]\x20-\x20Total:',_0xd4735f),console[_0x54f1dc(0x192)]('[ADMIN]\x20-\x20Active:',_0x26f54a),console[_0x54f1dc(0x192)](_0x54f1dc(0x1dc),_0x36835e),console[_0x54f1dc(0x192)]('[ADMIN]\x20-\x20Expired:',_0x194b4a),console['log'](_0x54f1dc(0x121));const {data:_0x12b6fd,error:_0x2b5a8e}=await supabase[_0x54f1dc(0xff)](_0x54f1dc(0x109))['select']('*')['eq'](_0x54f1dc(0x1ab),_0x54f1dc(0x1bb));_0x2b5a8e&&console[_0x54f1dc(0x1aa)]('[ADMIN]\x20❌\x20Error\x20fetching\x20pending_payments:',_0x2b5a8e);const _0x157b6d=_0x12b6fd?.[_0x54f1dc(0x20e)]||0x0;console['log'](_0x54f1dc(0x1ca),_0x157b6d);const _0x22edc8=document['getElementById'](_0x54f1dc(0x11a)),_0x7cfdd1=document['getElementById'](_0x54f1dc(0x10a)),_0x5c1e29=document['getElementById'](_0x54f1dc(0x146)),_0x57310a=document['getElementById']('pending-payments-count'),_0x41a152=document[_0x54f1dc(0x232)](_0x54f1dc(0x107));if(_0x22edc8)_0x22edc8[_0x54f1dc(0x115)]=_0xd4735f;if(_0x7cfdd1)_0x7cfdd1[_0x54f1dc(0x115)]=_0x26f54a;if(_0x5c1e29)_0x5c1e29['textContent']=_0x36835e;if(_0x57310a)_0x57310a[_0x54f1dc(0x115)]=_0x157b6d;if(_0x41a152)_0x41a152[_0x54f1dc(0x115)]=_0x194b4a;console['log'](_0x54f1dc(0x201));}catch(_0x249da8){console[_0x54f1dc(0x1aa)](_0x54f1dc(0x21a),_0x249da8),showNotification(_0x54f1dc(0x20a),_0x54f1dc(0x1aa));}}async function loadUsers(){const _0x27aeaa=_0x2edef7;console['log'](_0x27aeaa(0x10f));try{const _0x13e643=new Date(),_0x5de729=allAuthUsers[_0x27aeaa(0x197)](_0x44767d=>{const _0x179ed4=_0x27aeaa,_0x280e84=allowedUserMap[_0x179ed4(0xe9)](_0x44767d[_0x179ed4(0x1cd)])||null;let _0x3af6f9=_0x179ed4(0x1bb);return _0x280e84&&(_0x280e84[_0x179ed4(0x11b)]?_0x3af6f9=new Date(_0x280e84[_0x179ed4(0x1d2)]||0x0)>_0x13e643?_0x179ed4(0x14b):'expired':_0x3af6f9=_0x179ed4(0x1bb)),{'id':_0x44767d['id'],'email':_0x44767d['email'],'created_at':_0x44767d[_0x179ed4(0x1b4)],'status':_0x3af6f9,'allowedData':_0x280e84};});allUsers=_0x5de729,filterUsers(),console[_0x27aeaa(0x192)](_0x27aeaa(0x1d8));}catch(_0x321eea){console['error'](_0x27aeaa(0x141),_0x321eea),showNotification(_0x27aeaa(0x161),_0x27aeaa(0x1aa));}}function filterUsers(){const _0x1633e4=_0x2edef7;console[_0x1633e4(0x192)](_0x1633e4(0x191),currentFilter);let _0x5d91ff=allUsers;currentFilter!==_0x1633e4(0x21b)&&(_0x5d91ff=allUsers[_0x1633e4(0xe6)](_0x57f77d=>_0x57f77d[_0x1633e4(0x1ab)]===currentFilter)),renderUsers(_0x5d91ff);}function renderUsers(_0x39ef68){const _0x2fa91b=_0x2edef7,_0x4b1bc1=DOM[_0x2fa91b(0x10d)];if(!_0x4b1bc1)return;if(!_0x39ef68||_0x39ef68[_0x2fa91b(0x20e)]===0x0){_0x4b1bc1[_0x2fa91b(0x195)]=_0x2fa91b(0x168);return;}_0x4b1bc1[_0x2fa91b(0x195)]=_0x39ef68['map'](_0x38773b=>{const _0x522f3b=_0x2fa91b,{email:_0x2f7228,created_at:_0x20b493,status:_0x28c9ec,allowedData:_0x3db64f}=_0x38773b,_0x411260=new Date(_0x20b493)[_0x522f3b(0xf2)]();let _0x33ac53=_0x522f3b(0x198)+_0x28c9ec+'\x22>'+(_0x28c9ec[_0x522f3b(0xce)](0x0)['toUpperCase']()+_0x28c9ec[_0x522f3b(0x108)](0x1))+_0x522f3b(0x150),_0x3d75bd='';_0x28c9ec==='pending'?_0x3d75bd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-approve-user\x22\x20onclick=\x22openAllowModal(\x27'+_0x2f7228+_0x522f3b(0xb7)+_0x38773b['id']+_0x522f3b(0xbb):_0x3d75bd='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27'+_0x38773b['id']+_0x522f3b(0xd4)+_0x38773b['id']+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-sign-out-alt\x22></i>\x20Logout\x20Sessions\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-delete\x22\x20onclick=\x22deleteUser(\x27'+_0x38773b['id']+_0x522f3b(0x174)+_0x2f7228+_0x522f3b(0x1de);let _0x2902d3='';if(_0x3db64f?.[_0x522f3b(0x1d2)]){const _0x241e20=new Date(_0x3db64f[_0x522f3b(0x1d2)])[_0x522f3b(0xf2)]();_0x2902d3=_0x522f3b(0x1c8)+_0x241e20+_0x522f3b(0xbd);}return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+_0x2f7228+_0x522f3b(0x10e)+_0x33ac53+_0x522f3b(0xbf)+_0x411260+_0x522f3b(0xd9)+_0x2902d3+_0x522f3b(0x233)+_0x3d75bd+_0x522f3b(0x14e);})['join']('');}function openAllowModal(_0x1d4a12){const _0x5319c0=_0x2edef7;console[_0x5319c0(0x192)](_0x5319c0(0xb9),_0x1d4a12),document[_0x5319c0(0x232)]('allow-user-email')[_0x5319c0(0x100)]=_0x1d4a12,document['getElementById'](_0x5319c0(0x181))[_0x5319c0(0x17b)][_0x5319c0(0x122)](_0x5319c0(0x12e));}function closeAllowModal(){const _0x1961f9=_0x2edef7;document[_0x1961f9(0x232)](_0x1961f9(0x181))[_0x1961f9(0x17b)][_0x1961f9(0x202)](_0x1961f9(0x12e)),document[_0x1961f9(0x232)](_0x1961f9(0x17a))['reset']();}async function handleAllowUser(_0x4996bb){const _0x4713c6=_0x2edef7;_0x4996bb[_0x4713c6(0x113)](),console[_0x4713c6(0x192)](_0x4713c6(0x142));const _0x4674a7=document[_0x4713c6(0x232)](_0x4713c6(0xe4))[_0x4713c6(0x100)],_0x3d9282=parseInt(document[_0x4713c6(0x232)]('allow-duration')[_0x4713c6(0x100)]),_0x1efe00=_0x4996bb[_0x4713c6(0xc3)][_0x4713c6(0x178)](_0x4713c6(0x15e));if(!_0x3d9282){showNotification(_0x4713c6(0x207),_0x4713c6(0x1aa));return;}_0x1efe00[_0x4713c6(0x203)]=!![],_0x1efe00[_0x4713c6(0x195)]=_0x4713c6(0x101);try{const _0x758436=new Date();_0x758436['setMonth'](_0x758436[_0x4713c6(0x140)]()+_0x3d9282);const {error:_0x5ccab2}=await supabase[_0x4713c6(0xff)](_0x4713c6(0xf3))[_0x4713c6(0x175)]({'email':_0x4674a7,'approved':!![],'expiry_date':_0x758436[_0x4713c6(0x213)](),'created_at':new Date()[_0x4713c6(0x213)]()},{'onConflict':_0x4713c6(0x1cd)});if(_0x5ccab2){console[_0x4713c6(0x1aa)](_0x4713c6(0x134),_0x5ccab2);throw _0x5ccab2;}console[_0x4713c6(0x192)](_0x4713c6(0x149)),showNotification(_0x4713c6(0x1eb)+_0x4674a7+_0x4713c6(0xf1)+_0x3d9282+_0x4713c6(0x1a4),_0x4713c6(0xea)),closeAllowModal(),await Promise[_0x4713c6(0x21b)]([loadAllowedUsers(),loadStats(),loadUsers(),loadRecentActivity()]);}catch(_0x5dab0e){console[_0x4713c6(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20handleAllowUser:',_0x5dab0e),showNotification('Error\x20approving\x20user',_0x4713c6(0x1aa));}finally{_0x1efe00['disabled']=![],_0x1efe00[_0x4713c6(0x195)]=_0x4713c6(0xd7);}}async function handleAddUser(_0x5a7256){const _0x5a8eef=_0x2edef7;_0x5a7256[_0x5a8eef(0x113)](),console[_0x5a8eef(0x192)](_0x5a8eef(0xe8));const _0x35a37f=document[_0x5a8eef(0x232)](_0x5a8eef(0xfe))[_0x5a8eef(0x100)],_0x3bcedb=parseInt(document['getElementById'](_0x5a8eef(0x18e))[_0x5a8eef(0x100)]),_0x2233a7=_0x5a7256['target'][_0x5a8eef(0x178)](_0x5a8eef(0x15e));if(!_0x35a37f||!_0x3bcedb){showNotification(_0x5a8eef(0x132),_0x5a8eef(0x1aa));return;}_0x2233a7['disabled']=!![],_0x2233a7['innerHTML']=_0x5a8eef(0x13b);try{const _0x5b5f2d=new Date();_0x5b5f2d[_0x5a8eef(0x223)](_0x5b5f2d['getMonth']()+_0x3bcedb);const {error:_0x53bf60}=await supabase[_0x5a8eef(0xff)](_0x5a8eef(0xf3))['insert']({'email':_0x35a37f,'approved':!![],'expiry_date':_0x5b5f2d[_0x5a8eef(0x213)](),'created_at':new Date()[_0x5a8eef(0x213)]()});if(_0x53bf60){console[_0x5a8eef(0x1aa)]('[ADMIN]\x20❌\x20Error\x20adding\x20user:',_0x53bf60);throw _0x53bf60;}console['log'](_0x5a8eef(0x1d4)),showNotification(_0x5a8eef(0x1eb)+_0x35a37f+_0x5a8eef(0x1e9)+_0x3bcedb+_0x5a8eef(0x1a4),_0x5a8eef(0xea)),_0x5a7256[_0x5a8eef(0xc3)][_0x5a8eef(0x15c)](),await Promise[_0x5a8eef(0x21b)]([loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0x10c6ba){console['error'](_0x5a8eef(0x18c),_0x10c6ba),showNotification(_0x5a8eef(0xb6),_0x5a8eef(0x1aa));}finally{_0x2233a7[_0x5a8eef(0x203)]=![],_0x2233a7['innerHTML']=_0x5a8eef(0x16f);}}async function loadRecentActivity(){const _0x24ffa9=_0x2edef7;console[_0x24ffa9(0x192)](_0x24ffa9(0x176));try{const _0x500b99=document[_0x24ffa9(0x232)]('recent-activity');if(!_0x500b99){console['warn'](_0x24ffa9(0xb0));return;}const _0x50fa78=[];console[_0x24ffa9(0x192)](_0x24ffa9(0x19e));const {data:_0x24ae75,error:_0x1fc00b}=await supabase[_0x24ffa9(0xff)]('pending_payments')[_0x24ffa9(0x173)]('*')[_0x24ffa9(0x15f)](_0x24ffa9(0x1b4),{'ascending':![]})[_0x24ffa9(0x216)](0x5);if(_0x1fc00b)console[_0x24ffa9(0x1aa)](_0x24ffa9(0xda),_0x1fc00b);else _0x24ae75&&(console['log'](_0x24ffa9(0x1ea),_0x24ae75[_0x24ffa9(0x20e)]),_0x24ae75[_0x24ffa9(0x103)](_0x4026bc=>{const _0x176f24=_0x24ffa9;_0x50fa78[_0x176f24(0x1a1)]({'title':_0x176f24(0x135)+_0x4026bc[_0x176f24(0x1b1)],'timestamp':new Date(_0x4026bc['created_at']),'time':formatRelativeTime(_0x4026bc[_0x176f24(0x1b4)]),'type':_0x176f24(0x19f)});}));console[_0x24ffa9(0x192)](_0x24ffa9(0x1fe));const {data:_0x2fe41e,error:_0x4f6549}=await supabase[_0x24ffa9(0xff)]('allowed_users')['select']('*')[_0x24ffa9(0x15f)](_0x24ffa9(0x1b4),{'ascending':![]})['limit'](0x3)['eq']('approved',!![]);if(_0x4f6549)console['error'](_0x24ffa9(0x217),_0x4f6549);else _0x2fe41e&&(console[_0x24ffa9(0x192)](_0x24ffa9(0x104),_0x2fe41e['length']),_0x2fe41e['forEach'](_0x1445dd=>{const _0x3ef388=_0x24ffa9;_0x50fa78['push']({'title':_0x3ef388(0x1eb)+_0x1445dd[_0x3ef388(0x1cd)]+_0x3ef388(0x1c4),'timestamp':new Date(_0x1445dd[_0x3ef388(0x1b4)]),'time':formatRelativeTime(_0x1445dd[_0x3ef388(0x1b4)]),'type':'success'});}));_0x50fa78[_0x24ffa9(0x1f9)]((_0x54a964,_0x1f8a90)=>_0x1f8a90[_0x24ffa9(0x1f8)]-_0x54a964[_0x24ffa9(0x1f8)]);if(_0x50fa78[_0x24ffa9(0x20e)]===0x0){_0x500b99[_0x24ffa9(0x195)]=_0x24ffa9(0x110);return;}_0x500b99[_0x24ffa9(0x195)]=_0x50fa78['map'](_0x26ec73=>_0x24ffa9(0xcc)+_0x26ec73[_0x24ffa9(0x166)]+_0x24ffa9(0x1bf)+_0x26ec73['title']+_0x24ffa9(0xed)+_0x26ec73['time']+_0x24ffa9(0x21f))[_0x24ffa9(0x1f2)](''),console[_0x24ffa9(0x192)](_0x24ffa9(0x1d0));}catch(_0x207de9){console[_0x24ffa9(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20loadRecentActivity:',_0x207de9),showNotification('Error\x20loading\x20recent\x20activity',_0x24ffa9(0x1aa));}}function _0x9c57(_0x38f224,_0x22c5d9){const _0x3cd19=_0x3cd1();return _0x9c57=function(_0x9c574b,_0x34c57f){_0x9c574b=_0x9c574b-0xaf;let _0x1f0c74=_0x3cd19[_0x9c574b];return _0x1f0c74;},_0x9c57(_0x38f224,_0x22c5d9);}async function deleteUser(_0x14e2c1,_0x6ba40a){const _0x6162cf=_0x2edef7;console[_0x6162cf(0x192)](_0x6162cf(0x143),_0x6ba40a);if(!confirm('Delete\x20user\x20'+_0x6ba40a+'?\x20This\x20will\x20remove\x20them\x20from\x20auth\x20and\x20all\x20data.'))return;try{await supabase[_0x6162cf(0xff)](_0x6162cf(0xf3))[_0x6162cf(0x199)]()['eq'](_0x6162cf(0x1cd),_0x6ba40a);const {error:_0x269213}=await adminSupabase[_0x6162cf(0x187)][_0x6162cf(0x220)][_0x6162cf(0x218)](_0x14e2c1);if(_0x269213)throw _0x269213;showNotification(_0x6162cf(0x1eb)+_0x6ba40a+_0x6162cf(0x1d5),_0x6162cf(0xea)),await Promise[_0x6162cf(0x21b)]([loadUserMap(),loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0x4dfbe3){console['error'](_0x6162cf(0xf7),_0x4dfbe3),showNotification(_0x6162cf(0x22a),_0x6162cf(0x1aa));}}async function logoutUserSessions(_0x406f1a){const _0x13223a=_0x2edef7;console[_0x13223a(0x192)](_0x13223a(0xd8),_0x406f1a);if(!confirm(_0x13223a(0xbe)))return;try{const {error:_0x29caeb}=await adminSupabase['auth']['admin'][_0x13223a(0xf0)](_0x406f1a);if(_0x29caeb)throw _0x29caeb;showNotification(_0x13223a(0x221),_0x13223a(0xea));}catch(_0x193b75){console[_0x13223a(0x1aa)](_0x13223a(0xfa),_0x193b75),showNotification('Error\x20logging\x20out\x20sessions','error');}}async function viewUserDetails(_0x530086){const _0x57c57e=_0x2edef7;console[_0x57c57e(0x192)](_0x57c57e(0xc6),_0x530086);try{const _0x209b30=document[_0x57c57e(0x232)](_0x57c57e(0x1a7)),_0x251f34=document[_0x57c57e(0x232)]('user-detail-content'),_0x558566=userMap[_0x57c57e(0xb2)]['get'](_0x530086);if(!_0x558566)throw new Error(_0x57c57e(0x1f1));const _0x337c39=allowedUserMap['get'](_0x558566);let _0x4feb19=0x0,_0x299f86=0x0,_0x51cda6=0x0;const [{count:_0x479f66},{count:_0x31200a},{count:_0x21c379}]=await Promise['all']([supabase[_0x57c57e(0xff)](_0x57c57e(0x20c))[_0x57c57e(0x173)]('*',{'count':_0x57c57e(0x11d),'head':!![]})['eq'](_0x57c57e(0x172),_0x530086),supabase[_0x57c57e(0xff)]('user_watch_history')['select']('*',{'count':'exact','head':!![]})['eq']('user_id',_0x530086),supabase[_0x57c57e(0xff)](_0x57c57e(0xc8))['select']('*',{'count':_0x57c57e(0x11d),'head':!![]})['eq'](_0x57c57e(0x172),_0x530086)]);_0x4feb19=_0x479f66||0x0,_0x299f86=_0x31200a||0x0,_0x51cda6=_0x21c379||0x0,console[_0x57c57e(0x192)]('[ADMIN]\x20Activity\x20counts\x20-\x20Searches:',_0x4feb19,_0x57c57e(0x1e4),_0x299f86,'Bookmarks:',_0x51cda6);const _0x28be9b=new Date();let _0x1db28f='';if(_0x337c39?.['approved']){if(_0x337c39[_0x57c57e(0x1d2)]){const _0x4c156a=new Date(_0x337c39[_0x57c57e(0x1d2)]),_0x49a868=Math[_0x57c57e(0x114)]((_0x4c156a-_0x28be9b)/(0x3e8*0x3c*0x3c*0x18));_0x49a868>0x0?_0x1db28f='<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20'+_0x49a868+_0x57c57e(0x164):_0x1db28f=_0x57c57e(0x1b3)+Math[_0x57c57e(0x1c2)](_0x49a868)+_0x57c57e(0x1bd);}else _0x1db28f=_0x57c57e(0x145);}else _0x1db28f='<span\x20class=\x22status-badge\x20pending\x22>Pending\x20Approval</span>';_0x251f34[_0x57c57e(0x195)]=_0x57c57e(0x119)+_0x558566+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Status:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x1db28f+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x337c39?.['created_at']?_0x57c57e(0x1cb)+new Date(_0x337c39[_0x57c57e(0x1b4)])['toLocaleDateString']()+_0x57c57e(0x139):'')+_0x57c57e(0x1b9)+(_0x337c39?.['expiry_date']?_0x57c57e(0x1cf)+new Date(_0x337c39['expiry_date'])[_0x57c57e(0xf2)]()+_0x57c57e(0x139):'')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Activity\x20Stats</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20grid-template-columns:\x20repeat(3,\x201fr);\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--info);\x22>'+_0x4feb19+_0x57c57e(0xdd)+_0x299f86+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Watched</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--warning);\x22>'+_0x51cda6+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Bookmarks</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x209b30[_0x57c57e(0x17b)][_0x57c57e(0x122)](_0x57c57e(0x12e)),console[_0x57c57e(0x192)](_0x57c57e(0x204));}catch(_0x12ea70){console[_0x57c57e(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20viewUserDetails:',_0x12ea70),showNotification(_0x57c57e(0x1e7),_0x57c57e(0x1aa));}}async function loadPendingPayments(){const _0x1e9d52=_0x2edef7;console[_0x1e9d52(0x192)]('[ADMIN]\x20loadPendingPayments()\x20called');try{console[_0x1e9d52(0x192)](_0x1e9d52(0x106));const {data:_0x4da6da,error:_0x28be49}=await supabase[_0x1e9d52(0xff)](_0x1e9d52(0x109))[_0x1e9d52(0x173)]('*')['eq'](_0x1e9d52(0x1ab),_0x1e9d52(0x1bb))[_0x1e9d52(0x15f)](_0x1e9d52(0x1b4),{'ascending':![]});if(_0x28be49){console[_0x1e9d52(0x1aa)]('[ADMIN]\x20❌\x20Error\x20fetching\x20pending\x20payments:',_0x28be49);throw _0x28be49;}console[_0x1e9d52(0x192)](_0x1e9d52(0x18d),_0x4da6da?.[_0x1e9d52(0x20e)]||0x0);const _0x5878d4=document[_0x1e9d52(0x232)]('pending-payments-list');if(!_0x5878d4){console[_0x1e9d52(0x1aa)](_0x1e9d52(0x1e3));return;}if(!_0x4da6da||_0x4da6da[_0x1e9d52(0x20e)]===0x0){_0x5878d4[_0x1e9d52(0x195)]=_0x1e9d52(0x211),console[_0x1e9d52(0x192)](_0x1e9d52(0x1c3));return;}_0x5878d4[_0x1e9d52(0x195)]=_0x4da6da[_0x1e9d52(0x197)](_0x3bb159=>_0x1e9d52(0x158)+_0x3bb159[_0x1e9d52(0x1b1)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Transaction\x20ID:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3bb159[_0x1e9d52(0xd5)]+_0x1e9d52(0x14c)+new Date(_0x3bb159[_0x1e9d52(0x1b4)])['toLocaleString']()+_0x1e9d52(0x147)+_0x3bb159['id']+_0x1e9d52(0x174)+_0x3bb159['user_email']+_0x1e9d52(0x1b8)+_0x3bb159['id']+_0x1e9d52(0x22f))[_0x1e9d52(0x1f2)](''),console['log'](_0x1e9d52(0x1a3));}catch(_0x5b5fb1){console[_0x1e9d52(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20loadPendingPayments:',_0x5b5fb1),showNotification(_0x1e9d52(0x22c),'error');}}async function approvePayment(_0x246ec9,_0xb24e4a){const _0x328f23=_0x2edef7;console['log'](_0x328f23(0x18b),_0xb24e4a);if(!confirm(_0x328f23(0x20b)+_0xb24e4a+_0x328f23(0x15b))){console['log'](_0x328f23(0x1ba));return;}try{const _0x4db094=new Date();_0x4db094[_0x328f23(0x223)](_0x4db094['getMonth']()+0x1),console[_0x328f23(0x192)](_0x328f23(0x1e0));const {error:_0x46b181}=await supabase['from'](_0x328f23(0xf3))[_0x328f23(0x175)]({'email':_0xb24e4a,'approved':!![],'expiry_date':_0x4db094[_0x328f23(0x213)](),'created_at':new Date()[_0x328f23(0x213)]()},{'onConflict':_0x328f23(0x1cd)});if(_0x46b181){console['error'](_0x328f23(0xb5),_0x46b181);throw _0x46b181;}console[_0x328f23(0x192)](_0x328f23(0x1f6)),console[_0x328f23(0x192)](_0x328f23(0x1da));const {error:_0x4b8a3c}=await supabase['from'](_0x328f23(0x109))[_0x328f23(0x18a)]({'status':'approved'})['eq']('id',_0x246ec9);if(_0x4b8a3c){console[_0x328f23(0x1aa)](_0x328f23(0xcb),_0x4b8a3c);throw _0x4b8a3c;}console['log'](_0x328f23(0x1f7)),showNotification(_0x328f23(0x105)+_0xb24e4a+_0x328f23(0xf5),_0x328f23(0xea)),await Promise['all']([loadAllowedUsers(),loadStats(),loadPendingPayments(),loadRecentActivity(),loadUsers()]);}catch(_0x218824){console[_0x328f23(0x1aa)](_0x328f23(0x1ef),_0x218824),showNotification(_0x328f23(0x167),'error');}}async function rejectPayment(_0x53d146){const _0x371db0=_0x2edef7;console[_0x371db0(0x192)](_0x371db0(0x12b),_0x53d146);if(!confirm(_0x371db0(0x13f))){console[_0x371db0(0x192)](_0x371db0(0x19b));return;}try{console[_0x371db0(0x192)](_0x371db0(0x1a6));const {error:_0x574a7c}=await supabase['from'](_0x371db0(0x109))[_0x371db0(0x18a)]({'status':_0x371db0(0x118)})['eq']('id',_0x53d146);if(_0x574a7c){console[_0x371db0(0x1aa)](_0x371db0(0x22d),_0x574a7c);throw _0x574a7c;}console[_0x371db0(0x192)](_0x371db0(0x180)),showNotification(_0x371db0(0x12d),_0x371db0(0xea)),await Promise[_0x371db0(0x21b)]([loadPendingPayments(),loadStats(),loadRecentActivity()]);}catch(_0x3449bc){console['error'](_0x371db0(0x17c),_0x3449bc),showNotification(_0x371db0(0x19d),'error');}}async function loadSearchHistory(){const _0x351d04=_0x2edef7;console[_0x351d04(0x192)](_0x351d04(0x127));try{console[_0x351d04(0x192)]('[ADMIN]\x20Fetching\x20search\x20history...');const {data:_0x3ff8e0,error:_0x368940}=await supabase['from'](_0x351d04(0x20c))[_0x351d04(0x173)]('*')['order'](_0x351d04(0x10c),{'ascending':![]})[_0x351d04(0x216)](0x64);if(_0x368940){console[_0x351d04(0x1aa)](_0x351d04(0x20f),_0x368940);throw _0x368940;}console[_0x351d04(0x192)](_0x351d04(0xd6),_0x3ff8e0?.[_0x351d04(0x20e)]||0x0),allSearchHistory=_0x3ff8e0||[],renderHistory(allSearchHistory,_0x351d04(0x13c),_0x351d04(0x212));}catch(_0x6b93f7){console[_0x351d04(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20loadSearchHistory:',_0x6b93f7),showNotification(_0x351d04(0x227),_0x351d04(0x1aa));}}async function loadWatchHistory(){const _0x359d31=_0x2edef7;console[_0x359d31(0x192)](_0x359d31(0x130));try{console[_0x359d31(0x192)](_0x359d31(0x159));const {data:_0x239520,error:_0x48e1bc}=await supabase[_0x359d31(0xff)](_0x359d31(0x1a5))[_0x359d31(0x173)]('*')[_0x359d31(0x15f)](_0x359d31(0x234),{'ascending':![]})['limit'](0x64);if(_0x48e1bc){console['error']('[ADMIN]\x20❌\x20Error\x20fetching\x20watch\x20history:',_0x48e1bc);throw _0x48e1bc;}console['log'](_0x359d31(0x102),_0x239520?.[_0x359d31(0x20e)]||0x0),allWatchHistory=_0x239520||[],renderHistory(allWatchHistory,_0x359d31(0x1c0),_0x359d31(0x1d6));}catch(_0x463023){console[_0x359d31(0x1aa)]('[ADMIN]\x20❌\x20Error\x20in\x20loadWatchHistory:',_0x463023),showNotification(_0x359d31(0x165),'error');}}async function loadBookmarks(){const _0xce16cc=_0x2edef7;console[_0xce16cc(0x192)](_0xce16cc(0x1c1));try{console[_0xce16cc(0x192)](_0xce16cc(0x1ed));const {data:_0x554357,error:_0x2bfcc7}=await supabase[_0xce16cc(0xff)](_0xce16cc(0xc8))['select']('*')[_0xce16cc(0x15f)](_0xce16cc(0xe1),{'ascending':![]})[_0xce16cc(0x216)](0x64);if(_0x2bfcc7){console[_0xce16cc(0x1aa)](_0xce16cc(0xb1),_0x2bfcc7);throw _0x2bfcc7;}console[_0xce16cc(0x192)]('[ADMIN]\x20✅\x20Bookmarks\x20fetched:',_0x554357?.[_0xce16cc(0x20e)]||0x0),allBookmarks=_0x554357||[],renderHistory(allBookmarks,_0xce16cc(0x1fa),_0xce16cc(0x11c));}catch(_0x1dae92){console[_0xce16cc(0x1aa)](_0xce16cc(0x1be),_0x1dae92),showNotification('Error\x20loading\x20bookmarks',_0xce16cc(0x1aa));}}function renderHistory(_0x2f9161,_0x577878,_0x3a355c){const _0x4b4778=_0x2edef7;console[_0x4b4778(0x192)](_0x4b4778(0x1ec),_0x3a355c,_0x4b4778(0x1a9),_0x2f9161[_0x4b4778(0x20e)],'items');const _0x2c3d59=document[_0x4b4778(0x232)](_0x577878);if(!_0x2c3d59){console[_0x4b4778(0x1aa)](_0x4b4778(0x1a2),_0x577878);return;}if(!_0x2f9161||_0x2f9161['length']===0x0){_0x2c3d59[_0x4b4778(0x195)]=_0x4b4778(0xd1),console['log']('[ADMIN]\x20No\x20history\x20to\x20display');return;}_0x2c3d59[_0x4b4778(0x195)]=_0x2f9161[_0x4b4778(0x197)](_0x51939d=>{const _0x32cf65=_0x4b4778,_0x392652=userMap['idToEmail']['get'](_0x51939d[_0x32cf65(0x172)])||_0x32cf65(0xcf);let _0x1f4fa0='',_0x3fcdb2='';switch(_0x3a355c){case _0x32cf65(0x212):_0x1f4fa0=_0x32cf65(0xdb)+_0x51939d[_0x32cf65(0xfc)]+'\x22',_0x3fcdb2=_0x51939d[_0x32cf65(0x10c)];break;case'watch':_0x1f4fa0=_0x51939d[_0x32cf65(0x1ce)]+'\x20('+_0x51939d['media_type']+')',_0x3fcdb2=_0x51939d[_0x32cf65(0x234)];const _0x13c18e=[];if(_0x51939d[_0x32cf65(0x112)])_0x13c18e['push']('S'+_0x51939d['season']);if(_0x51939d[_0x32cf65(0x1e1)])_0x13c18e['push']('E'+_0x51939d['episode']);if(_0x51939d[_0x32cf65(0x120)])_0x13c18e['push'](Math[_0x32cf65(0x1a0)](_0x51939d[_0x32cf65(0x120)])+'s');_0x13c18e[_0x32cf65(0x20e)]>0x0&&(_0x1f4fa0+=_0x32cf65(0xf4)+_0x13c18e[_0x32cf65(0x1f2)]('\x20'));break;case _0x32cf65(0x11c):_0x1f4fa0=_0x51939d['title']+'\x20('+_0x51939d[_0x32cf65(0x17d)]+')',_0x3fcdb2=_0x51939d[_0x32cf65(0xe1)];break;}return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-user\x22>'+_0x392652+_0x32cf65(0x228)+new Date(_0x3fcdb2)['toLocaleString']()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-content\x22>'+_0x1f4fa0+_0x32cf65(0x21f);})['join'](''),console['log'](_0x4b4778(0x131),_0x3a355c);}function filterHistory(_0x6f9933,_0x20cddf){const _0x53ccc6=_0x2edef7;console['log']('[ADMIN]\x20filterHistory()\x20called\x20for\x20type:',_0x6f9933,_0x53ccc6(0x1fc),_0x20cddf);const _0xd00057=_0x20cddf[_0x53ccc6(0x186)]()[_0x53ccc6(0x1ae)]();let _0x1ae620=[],_0x5225ef='';switch(_0x6f9933){case _0x53ccc6(0x212):_0x1ae620=allSearchHistory,_0x5225ef=_0x53ccc6(0x13c);break;case _0x53ccc6(0x1d6):_0x1ae620=allWatchHistory,_0x5225ef=_0x53ccc6(0x1c0);break;case _0x53ccc6(0x11c):_0x1ae620=allBookmarks,_0x5225ef=_0x53ccc6(0x1fa);break;}if(_0xd00057===''){renderHistory(_0x1ae620,_0x5225ef,_0x6f9933);return;}const _0x3010ca=_0x1ae620[_0x53ccc6(0xe6)](_0x1ecf3c=>{const _0x144959=_0x53ccc6,_0x1afd78=userMap[_0x144959(0xb2)][_0x144959(0xe9)](_0x1ecf3c[_0x144959(0x172)])||'',_0x1d970e=_0x1afd78['toLowerCase']()[_0x144959(0xeb)](_0xd00057);let _0x59c7a3=![];switch(_0x6f9933){case _0x144959(0x212):_0x59c7a3=_0x1ecf3c['query']?.[_0x144959(0x186)]()[_0x144959(0xeb)](_0xd00057);break;case _0x144959(0x1d6):case _0x144959(0x11c):_0x59c7a3=_0x1ecf3c[_0x144959(0x1ce)]?.[_0x144959(0x186)]()['includes'](_0xd00057);break;}return _0x1d970e||_0x59c7a3;});console['log']('[ADMIN]\x20Filtered\x20results:',_0x3010ca[_0x53ccc6(0x20e)]),renderHistory(_0x3010ca,_0x5225ef,_0x6f9933);}function switchSection(_0xf46606){const _0x11b9bb=_0x2edef7;console[_0x11b9bb(0x192)](_0x11b9bb(0x1c7),_0xf46606),document[_0x11b9bb(0x12c)](_0x11b9bb(0x22b))[_0x11b9bb(0x103)](_0x48c56b=>_0x48c56b[_0x11b9bb(0x17b)][_0x11b9bb(0x122)](_0x11b9bb(0x14b))),document['querySelector'](_0x11b9bb(0x1df)+_0xf46606+'\x22]')[_0x11b9bb(0x17b)]['add'](_0x11b9bb(0x14b));const _0x481aaa={'overview':'Dashboard\x20Overview','users':_0x11b9bb(0x171),'add-user':_0x11b9bb(0x16c),'payments':_0x11b9bb(0xc9),'search-history':_0x11b9bb(0x1c5),'watch-history':'User\x20Watch\x20History','bookmarks':_0x11b9bb(0x1b7)};if(DOM[_0x11b9bb(0x13a)])DOM['sectionTitle'][_0x11b9bb(0x115)]=_0x481aaa[_0xf46606]||_0x11b9bb(0xc0);document['querySelectorAll'](_0x11b9bb(0x12f))[_0x11b9bb(0x103)](_0xac2d90=>_0xac2d90[_0x11b9bb(0x17b)]['remove'](_0x11b9bb(0x14b)));const _0x3d8d3f=document[_0x11b9bb(0x232)](_0xf46606);if(_0x3d8d3f)_0x3d8d3f[_0x11b9bb(0x17b)][_0x11b9bb(0x202)](_0x11b9bb(0x14b));switch(_0xf46606){case _0x11b9bb(0x13d):loadUsers();break;case _0x11b9bb(0x125):loadPendingPayments();break;case _0x11b9bb(0x128):loadSearchHistory();break;case _0x11b9bb(0x1fb):loadWatchHistory();break;case'bookmarks':loadBookmarks();break;}}function showNotification(_0x421d67,_0x3ee6d4=_0x2edef7(0xea)){const _0x5f0716=_0x2edef7;console[_0x5f0716(0x192)](_0x5f0716(0x152),_0x3ee6d4,'-',_0x421d67);const _0x3698ef=document[_0x5f0716(0x232)](_0x5f0716(0x163));if(!_0x3698ef){console[_0x5f0716(0x155)](_0x5f0716(0x21c));return;}const _0xc674b6=document[_0x5f0716(0x1ee)](_0x5f0716(0x10b));_0xc674b6[_0x5f0716(0x1db)]=_0x5f0716(0xbc)+_0x3ee6d4,_0xc674b6[_0x5f0716(0x195)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22notification-icon\x20fas\x20'+(_0x3ee6d4===_0x5f0716(0xea)?'fa-check-circle':_0x3ee6d4==='error'?_0x5f0716(0x1cc):_0x5f0716(0x1ac))+_0x5f0716(0x229)+_0x421d67+_0x5f0716(0xe7),_0x3698ef[_0x5f0716(0x230)](_0xc674b6),setTimeout(()=>_0xc674b6['classList']['add'](_0x5f0716(0x179)),0x64);const _0x227866=setTimeout(()=>{removeNotification(_0xc674b6);},0x1388);_0xc674b6[_0x5f0716(0x178)](_0x5f0716(0x137))[_0x5f0716(0x231)](_0x5f0716(0x205),()=>{clearTimeout(_0x227866),removeNotification(_0xc674b6);});}function removeNotification(_0x566219){const _0x54251b=_0x2edef7;_0x566219[_0x54251b(0x17b)][_0x54251b(0x202)]('fade-out'),setTimeout(()=>{const _0x5e6815=_0x54251b;_0x566219['parentNode']&&_0x566219[_0x5e6815(0x122)]();},0x12c);}window['openAllowModal']=openAllowModal,window[_0x2edef7(0x162)]=closeAllowModal,window[_0x2edef7(0x218)]=deleteUser,window[_0x2edef7(0x16b)]=logoutUserSessions,window['viewUserDetails']=viewUserDetails,window[_0x2edef7(0x1c9)]=approvePayment,window[_0x2edef7(0xe0)]=rejectPayment,console['log']('[ADMIN]\x20✅\x20Admin\x20Portal\x20script\x20loaded\x20and\x20ready'),console[_0x2edef7(0x192)](_0x2edef7(0xe2)),console[_0x2edef7(0x192)](_0x2edef7(0xfb));