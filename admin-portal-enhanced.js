const _0x29f326=_0x9c83;(function(_0x4e9ed3,_0xd841ad){const _0x4e47fd=_0x9c83,_0x1c83ab=_0x4e9ed3();while(!![]){try{const _0x5ce8fe=-parseInt(_0x4e47fd(0x169))/0x1+-parseInt(_0x4e47fd(0x10c))/0x2*(-parseInt(_0x4e47fd(0x164))/0x3)+-parseInt(_0x4e47fd(0x1a6))/0x4+-parseInt(_0x4e47fd(0xff))/0x5*(-parseInt(_0x4e47fd(0x19b))/0x6)+-parseInt(_0x4e47fd(0x183))/0x7+-parseInt(_0x4e47fd(0x1fb))/0x8+parseInt(_0x4e47fd(0x1da))/0x9;if(_0x5ce8fe===_0xd841ad)break;else _0x1c83ab['push'](_0x1c83ab['shift']());}catch(_0x18eec7){_0x1c83ab['push'](_0x1c83ab['shift']());}}}(_0x5f57,0x53827),console[_0x29f326(0x230)](_0x29f326(0x1b5)));function _0x5f57(){const _0x236963=['episode','Error\x20loading\x20watch\x20history','Searches','rgba(255,\x20255,\x20255,\x200.7)','toLocaleDateString','trim','ceil','toUpperCase','user-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-rank\x22>','Admin\x20Portal','\x20deleted','Payment\x20approved!\x20','user_search_history','Pending\x20Payment\x20Approvals','className','Logout\x20all\x20sessions\x20for\x20this\x20user?','setMonth','dataset','[ADMIN]\x20Caching\x20DOM\x20elements...','Watches','expiring-list','section-title','add','mostWatchedChart','toISOString','setHours','substring','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-title\x22>','[ADMIN]\x20Auth\x20check\x20error:','reset','[ADMIN]\x20User\x20map\x20loaded:','pending-users','popularSearchesChart','\x20days\x20ago</span>','rgba(59,\x20130,\x20246,\x201)','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Delete\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-content\x22>','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','button[type=\x22submit\x22]','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','32391hpHxYY','active','deleteUser','Please\x20enter\x20email\x20and\x20password','[ADMIN]\x20Error\x20in\x20loadWatchHistory:','67843bafFZz','logoutBtn','user_id','email','\x20ago','en-US','error','[ADMIN]\x20Error\x20loading\x20recent\x20activity:','pending','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>','round','getUser','search-filter','message','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','top-watched-list','rejected','remove','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Watched</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--warning);\x22>','get','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-count\x22>','DOMContentLoaded','user','Error\x20deleting\x20user','2970261RDxOjd','notification-container','[ADMIN]\x20Hiding\x20loading\x20screen...','created_at','[ADMIN]\x20Error\x20adding\x20user:','count','user_email','userList','Dashboard\x20Overview','from','sidebar','\x20bookmarks</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Error\x20loading\x20bookmarks','floor','[ADMIN]\x20User\x20added\x20successfully','[ADMIN]\x20DOM\x20elements\x20cached','createElement','searchList','[ADMIN]\x20Error\x20in\x20loadUsers:','div','[ADMIN]\x20Initializing\x20dashboard...','movie','analytics-period','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Reject\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','1096230ThkrmH','rgba(59,\x20130,\x20246,\x200.8)','user-detail-modal','input','[ADMIN]\x20Error\x20loading\x20top\x20bookmarked\x20list:','continue_watching','[ADMIN]\x20filterUsers()\x20called\x20with\x20filter:','[ADMIN]\x20Starting\x20app\x20initialization...','total-searches','<span\x20class=\x22status-badge\x20expired\x22>Expired\x20','Just\x20now','1453684vkvret','[ADMIN]\x20Dashboard\x20init\x20error:','...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Expiry:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','?\x20This\x20will\x20remove\x20them\x20from\x20auth\x20and\x20all\x20data.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Activity\x20Stats</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20grid-template-columns:\x20repeat(3,\x201fr);\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--info);\x22>','loginForm','[ADMIN]\x20Error\x20in\x20rejectPayment:','#3b82f6','User\x20Bookmarks','rgba(229,\x209,\x2020,\x200.6)','select','innerHTML','Error\x20adding\x20user','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Joined:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','[ADMIN]\x20Initializing\x20Enhanced\x20Admin\x20Portal...','style','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','expiry_date','<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20','approved','Analytics\x20Dashboard','searched_at','success','watch','close-user-detail','fa-exclamation-circle','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Adding...','\x20approved\x20for\x20','getContext','transaction_id','search','Logged\x20out\x20successfully','[ADMIN]\x20Stats\x20updated','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-time\x22>','user-detail-content','join','listUsers','getMonth','[ADMIN]\x20User\x20authenticated:','Reject\x20this\x20payment?\x20The\x20user\x20will\x20need\x20to\x20submit\x20again.','[ADMIN]\x20Initialization\x20error:','loginError','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27','exact','User\x20not\x20found','show','hamburgerBtn','watchList','Error\x20loading\x20pending\x20payments','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-users\x22></i><p>No\x20users\x20found</p></div>','all','8936739rTSjyf','TV\x20Show','forEach','watch-history','\x20approved','set','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>User\x20Details</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-detail-grid\x22\x20style=\x22display:\x20grid;\x20gap:\x2020px;\x20margin-top:\x2020px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Account\x20Information</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20gap:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Email:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','[ADMIN]\x20Error\x20in\x20loadPendingPayments:','[ADMIN]\x20Error\x20loading\x20analytics\x20stats:','auth','[ADMIN]\x20Error\x20loading\x20allowed\x20users:','users','status','textContent','[ADMIN]\x20Error\x20in\x20loadBookmarks:','none','added_at','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-approve\x22\x20onclick=\x22approvePayment(\x27','[ADMIN]\x20Error\x20loading\x20top\x20watched\x20list:','submit','toLocaleString','delete','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22expiring-item-days\x22>Expires\x20in\x20','admin-email-display','watched_at','sidebar-overlay','title','allow-user-form','[ADMIN]\x20Setting\x20up\x20event\x20listeners...','duration','Payment\x20rejected','New\x20payment\x20from\x20','.filter-btn','3365688ctNNQL','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','\x20day','allow-user-email','reduce','watch-list','[ADMIN]\x20Error\x20in\x20viewUserDetails:','admin','openAllowModal','\x20minute','user_watch_history','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-reject\x22\x20onclick=\x22rejectPayment(\x27','Failed\x20to\x20initialize\x20application','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-film\x22></i><p>No\x20watch\x20data</p></div>','sidebarOverlay','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Searches</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--success);\x22>','[ADMIN]\x20All\x20global\x20functions\x20exported','toLowerCase','parentNode','\x20now\x20has\x201\x20month\x20access','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-logout-session\x22\x20onclick=\x22logoutUserSessions(\x27','pending_payments','rgba(229,\x209,\x2020,\x201)','[ADMIN]\x20deleteUser()\x20called\x20for:','User\x20Watch\x20History','[ADMIN]\x20logoutUserSessions()\x20called\x20for\x20ID:','slice','active-subs','destroy','Please\x20fill\x20all\x20fields','user_bookmarks','allowed_users','[ADMIN]\x20Error\x20deleting\x20user:','entries','recent-activity','short','\x20days\x20remaining</span>','bookmarkList','classList','TV\x20Shows','Invalid\x20credentials','notification\x20','overview','preventDefault','title,\x20media_type','add-user-form','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-bookmark\x22></i><p>No\x20bookmark\x20data</p></div>','bookmarks','[ADMIN]\x20Error\x20in\x20approvePayment:','disabled','pending-payments-count','gte','</span>','log','update','contentTypeChart','User\x20','[ADMIN]\x20Error\x20in\x20handleAllowUser:','addEventListener','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','emailToId','Manage\x20Users','loadingScreen','rgba(255,\x20255,\x20255,\x200.1)','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','[ADMIN]\x20Error\x20loading\x20engagement\x20chart:','toggle','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-title\x22>','.nav-item[data-section]','sort','bar','target','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiring-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22expiring-item-email\x22>','expired-subs','query','abs','pending-payments-list','__SUPABASE_URL__','[ADMIN]\x20Error\x20loading\x20user\x20map:','\x20hour','querySelectorAll','search-history','currentDate','innerWidth','search-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','querySelector','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-meta\x22>','completed','\x27,\x20\x27','addUserForm','[ADMIN]\x20Event\x20listeners\x20set\x20up','[ADMIN]\x20handleAllowUser()\x20called','[ADMIN]\x20User\x20approved\x20successfully','[ADMIN]\x20Error\x20logging\x20out\x20sessions:','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Transaction\x20ID:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','supabase','.nav-item','viewUserDetails','Error\x20loading\x20users','click','dashboard','<span\x20class=\x22status-badge\x20','length','Error\x20loading\x20analytics','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22notification-icon\x20fas\x20','subscription-duration','[ADMIN]\x20Allowed\x20users\x20loaded:','expired','setDate','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Bookmarks</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','sectionTitle','\x20-\x20','<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20Lifetime</span>','idToEmail','[ADMIN]\x20DOMContentLoaded\x20event\x20fired','map','#e50914','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-email\x22>','order','[ADMIN]\x20Error\x20loading\x20analytics:','push','5FqZCxG','signOut','createClient','rgba(59,\x20130,\x20246,\x200.1)','login-modal','media_type','timestamp','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-sign-out-alt\x22></i>\x20Logout\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-delete\x22\x20onclick=\x22deleteUser(\x27','line','total-bookmarks','clear','values','total-users','82LsLJjC','loading-screen','upsert','analytics','Movie','[ADMIN]\x20loadUsers()\x20called','includes','[ADMIN]\x20State\x20initialized','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20Loading\x20analytics...','[ADMIN]\x20openAllowModal()\x20called\x20for:','Approve\x20payment\x20for\x20','display','getElementById','[ADMIN]\x20Dashboard\x20initialized','bookmark','bookmark-list','<span\x20class=\x22status-badge\x20pending\x22>Pending\x20Approval</span>','[ADMIN]\x20Error\x20loading\x20expiring\x20users:','__SUPABASE_SERVICE_ROLE_KEY__','\x20months!','total-watch-time','limit','rgba(229,\x209,\x2020,\x200.8)','Approve\x20User','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Joined:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','allow-duration','Error\x20approving\x20user','[ADMIN]\x20Error\x20approving\x20user:','payments','loginModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-user\x22>','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-inbox\x22></i><p>No\x20history\x20found</p></div>','appendChild','hidden','[ADMIN]\x20Logout\x20error:','User\x20Search\x20History','login-error','Error\x20loading\x20user\x20details','top-bookmarked-list','?\x20This\x20will\x20give\x20them\x201\x20month\x20access.','getDate','type','filter','signInWithPassword','watch_progress,\x20total_duration,\x20completed','Error\x20logging\x20out'];_0x5f57=function(){return _0x236963;};return _0x5f57();}const SUPABASE_URL=_0x29f326(0x248),SUPABASE_ANON_KEY='__SUPABASE_ANON_KEY__',SUPABASE_SERVICE_ROLE_KEY=_0x29f326(0x11f),supabase=window[_0x29f326(0xe5)][_0x29f326(0x101)](SUPABASE_URL,SUPABASE_ANON_KEY),adminSupabase=window[_0x29f326(0xe5)][_0x29f326(0x101)](SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY,{'auth':{'autoRefreshToken':![],'persistSession':![]}});let adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],currentFilter=_0x29f326(0x1d9),allSearchHistory=[],allWatchHistory=[],allBookmarks=[],allContinueWatching=[],chartInstances={};console[_0x29f326(0x230)](_0x29f326(0x113));const DOM={};function cacheDOM(){const _0x9975d0=_0x29f326;console['log'](_0x9975d0(0x14e)),DOM['loginModal']=document[_0x9975d0(0x119)](_0x9975d0(0x103)),DOM[_0x9975d0(0xea)]=document[_0x9975d0(0x119)]('dashboard'),DOM[_0x9975d0(0x1ac)]=document[_0x9975d0(0x119)]('login-form'),DOM['loginError']=document[_0x9975d0(0x119)](_0x9975d0(0x131)),DOM[_0x9975d0(0x16a)]=document['getElementById']('logout-btn'),DOM[_0x9975d0(0x239)]=document[_0x9975d0(0x119)](_0x9975d0(0x10d)),DOM[_0x9975d0(0xdf)]=document[_0x9975d0(0x119)](_0x9975d0(0x228)),DOM['userList']=document[_0x9975d0(0x119)](_0x9975d0(0x143)),DOM[_0x9975d0(0x194)]=document[_0x9975d0(0x119)](_0x9975d0(0x24f)),DOM[_0x9975d0(0x1d6)]=document['getElementById'](_0x9975d0(0x200)),DOM[_0x9975d0(0x220)]=document[_0x9975d0(0x119)]('bookmark-list'),DOM['sectionTitle']=document[_0x9975d0(0x119)](_0x9975d0(0x151)),DOM[_0x9975d0(0x24d)]=document['getElementById']('current-date'),DOM['adminEmailDisplay']=document[_0x9975d0(0x119)](_0x9975d0(0x1f1)),DOM[_0x9975d0(0x18d)]=document['getElementById'](_0x9975d0(0x18d)),DOM['sidebarOverlay']=document[_0x9975d0(0x119)](_0x9975d0(0x1f3)),DOM['hamburgerBtn']=document[_0x9975d0(0x119)]('hamburger-btn'),console[_0x9975d0(0x230)](_0x9975d0(0x192));}document[_0x29f326(0x235)](_0x29f326(0x180),()=>{const _0x5dd9c1=_0x29f326;console['log'](_0x5dd9c1(0xf8)),initApp();});async function initApp(){const _0x30c997=_0x29f326;console['log'](_0x30c997(0x1a2));try{cacheDOM(),setupEventListeners(),setupMobileNavigation(),updateCurrentDate(),await checkAuth(),console[_0x30c997(0x230)]('[ADMIN]\x20App\x20initialization\x20complete');}catch(_0xc670fa){console[_0x30c997(0x16f)](_0x30c997(0x1cf),_0xc670fa),showNotification(_0x30c997(0x207),_0x30c997(0x16f));}finally{hideLoadingScreen();}}function hideLoadingScreen(){const _0x1292ea=_0x29f326;console[_0x1292ea(0x230)](_0x1292ea(0x185)),DOM[_0x1292ea(0x239)]&&(DOM['loadingScreen'][_0x1292ea(0x221)][_0x1292ea(0x152)]('fade-out'),setTimeout(()=>{const _0x46d7f7=_0x1292ea;DOM['loadingScreen'][_0x46d7f7(0x1b6)][_0x46d7f7(0x118)]=_0x46d7f7(0x1e9);},0x1f4));}function setupMobileNavigation(){const _0x4be864=_0x29f326;DOM[_0x4be864(0x1d5)]&&DOM['hamburgerBtn'][_0x4be864(0x235)](_0x4be864(0xe9),toggleMobileSidebar),DOM[_0x4be864(0x209)]&&DOM[_0x4be864(0x209)][_0x4be864(0x235)](_0x4be864(0xe9),closeMobileSidebar),document['querySelectorAll'](_0x4be864(0xe6))['forEach'](_0x4fea81=>{const _0xe5f946=_0x4be864;_0x4fea81[_0xe5f946(0x235)](_0xe5f946(0xe9),()=>{const _0x461d2d=_0xe5f946;window[_0x461d2d(0x24e)]<=0x300&&closeMobileSidebar();});});}function toggleMobileSidebar(){const _0xaeb3f7=_0x29f326;DOM[_0xaeb3f7(0x18d)]?.[_0xaeb3f7(0x221)][_0xaeb3f7(0x23d)]('active'),DOM['sidebarOverlay']?.[_0xaeb3f7(0x221)][_0xaeb3f7(0x23d)](_0xaeb3f7(0x165));}function closeMobileSidebar(){const _0x142d6a=_0x29f326;DOM[_0x142d6a(0x18d)]?.[_0x142d6a(0x221)][_0x142d6a(0x17c)](_0x142d6a(0x165)),DOM['sidebarOverlay']?.['classList'][_0x142d6a(0x17c)]('active');}function setupEventListeners(){const _0x1d92d5=_0x29f326;console[_0x1d92d5(0x230)](_0x1d92d5(0x1f6)),DOM[_0x1d92d5(0x1ac)]?.[_0x1d92d5(0x235)](_0x1d92d5(0x1ed),handleLogin),DOM[_0x1d92d5(0x16a)]?.[_0x1d92d5(0x235)]('click',handleLogout),document[_0x1d92d5(0x24b)](_0x1d92d5(0x23f))[_0x1d92d5(0x1dc)](_0x4ef7d1=>{const _0x5301e4=_0x1d92d5;_0x4ef7d1[_0x5301e4(0x235)](_0x5301e4(0xe9),_0x73adac=>{const _0x4b50df=_0x5301e4;_0x73adac[_0x4b50df(0x226)](),switchSection(_0x4ef7d1['dataset']['section']);});}),DOM[_0x1d92d5(0xdf)]?.[_0x1d92d5(0x235)]('submit',handleAddUser),document[_0x1d92d5(0x119)](_0x1d92d5(0x1f5))?.[_0x1d92d5(0x235)](_0x1d92d5(0x1ed),handleAllowUser),document[_0x1d92d5(0x24b)](_0x1d92d5(0x1fa))[_0x1d92d5(0x1dc)](_0x1b4d72=>{const _0x19cb9a=_0x1d92d5;_0x1b4d72['addEventListener'](_0x19cb9a(0xe9),()=>{const _0x36427e=_0x19cb9a;document[_0x36427e(0x24b)](_0x36427e(0x1fa))['forEach'](_0x5d2c6a=>_0x5d2c6a[_0x36427e(0x221)][_0x36427e(0x17c)](_0x36427e(0x165))),_0x1b4d72['classList'][_0x36427e(0x152)](_0x36427e(0x165)),currentFilter=_0x1b4d72[_0x36427e(0x14d)][_0x36427e(0x137)],filterUsers();});}),document[_0x1d92d5(0x119)]('user-search')?.['addEventListener']('input',_0x42836d=>{const _0x487ad0=_0x1d92d5;filterUsersBySearch(_0x42836d[_0x487ad0(0x242)][_0x487ad0(0x172)]);}),document[_0x1d92d5(0x119)](_0x1d92d5(0x176))?.[_0x1d92d5(0x235)](_0x1d92d5(0x19e),_0x48d64b=>{const _0xb6d0f8=_0x1d92d5;filterHistory(_0xb6d0f8(0x1c5),_0x48d64b[_0xb6d0f8(0x242)][_0xb6d0f8(0x172)]);}),document[_0x1d92d5(0x119)]('watch-filter')?.[_0x1d92d5(0x235)](_0x1d92d5(0x19e),_0x20338c=>{const _0x3f25e7=_0x1d92d5;filterHistory(_0x3f25e7(0x1be),_0x20338c[_0x3f25e7(0x242)]['value']);}),document[_0x1d92d5(0x119)]('bookmark-filter')?.['addEventListener']('input',_0x3710e9=>{const _0xe12a16=_0x1d92d5;filterHistory(_0xe12a16(0x11b),_0x3710e9[_0xe12a16(0x242)][_0xe12a16(0x172)]);}),document['getElementById'](_0x1d92d5(0x199))?.[_0x1d92d5(0x235)]('change',_0xbce3ad=>{loadAnalytics();}),document[_0x1d92d5(0x119)](_0x1d92d5(0x1bf))?.[_0x1d92d5(0x235)]('click',()=>{const _0x292087=_0x1d92d5;document[_0x292087(0x119)]('user-detail-modal')[_0x292087(0x221)][_0x292087(0x152)](_0x292087(0x12e));}),console[_0x1d92d5(0x230)](_0x1d92d5(0xe0));}function updateCurrentDate(){const _0x49e331=_0x29f326;if(DOM[_0x49e331(0x24d)]){const _0x57a87e=new Date();DOM[_0x49e331(0x24d)][_0x49e331(0x1e7)]=_0x57a87e[_0x49e331(0x13f)](_0x49e331(0x16e),{'weekday':'long','year':'numeric','month':'long','day':'numeric'});}}function formatRelativeTime(_0x4a9117){const _0x184ccb=_0x29f326,_0x33e62e=new Date(_0x4a9117),_0xe95f87=new Date(),_0x26b846=_0xe95f87-_0x33e62e,_0x44bc08=Math[_0x184ccb(0x190)](_0x26b846/0xea60),_0x200170=Math['floor'](_0x26b846/0x36ee80),_0x3d5611=Math[_0x184ccb(0x190)](_0x26b846/0x5265c00);if(_0x44bc08<0x1)return _0x184ccb(0x1a5);if(_0x44bc08<0x3c)return _0x44bc08+_0x184ccb(0x204)+(_0x44bc08>0x1?'s':'')+_0x184ccb(0x16d);if(_0x200170<0x18)return _0x200170+_0x184ccb(0x24a)+(_0x200170>0x1?'s':'')+_0x184ccb(0x16d);return _0x3d5611+_0x184ccb(0x1fd)+(_0x3d5611>0x1?'s':'')+_0x184ccb(0x16d);}function formatDuration(_0xbc81a9){const _0xea3783=_0x29f326;if(!_0xbc81a9||_0xbc81a9<0x0)return'0m';const _0x5c483e=Math[_0xea3783(0x190)](_0xbc81a9/0xe10),_0x347a9c=Math[_0xea3783(0x190)](_0xbc81a9%0xe10/0x3c);if(_0x5c483e>0x0)return _0x5c483e+'h\x20'+_0x347a9c+'m';return _0x347a9c+'m';}async function checkAuth(){const _0x15c780=_0x29f326;console['log']('[ADMIN]\x20Checking\x20authentication...');try{const {data:_0x199cf9,error:_0x291ea4}=await supabase[_0x15c780(0x1e3)][_0x15c780(0x175)]();if(_0x291ea4||!_0x199cf9?.[_0x15c780(0x181)]){showLoginModal();return;}adminUser=_0x199cf9[_0x15c780(0x181)],console[_0x15c780(0x230)](_0x15c780(0x1cd),adminUser['email']),await initDashboard();}catch(_0x2290b2){console[_0x15c780(0x16f)](_0x15c780(0x158),_0x2290b2),showLoginModal();}}function showLoginModal(){const _0x745012=_0x29f326;if(DOM[_0x745012(0x12a)])DOM[_0x745012(0x12a)][_0x745012(0x221)][_0x745012(0x17c)]('hidden');if(DOM[_0x745012(0xea)])DOM[_0x745012(0xea)][_0x745012(0x221)][_0x745012(0x152)](_0x745012(0x12e));}async function handleLogin(_0x467dfe){const _0x4498d8=_0x29f326;_0x467dfe[_0x4498d8(0x226)]();const _0x3bcbec=document[_0x4498d8(0x119)]('admin-email')?.[_0x4498d8(0x172)],_0x5f0bff=document[_0x4498d8(0x119)]('admin-password')?.[_0x4498d8(0x172)],_0x13e40a=DOM[_0x4498d8(0x1ac)][_0x4498d8(0xdb)](_0x4498d8(0x162));if(!_0x3bcbec||!_0x5f0bff){showError(_0x4498d8(0x167));return;}_0x13e40a[_0x4498d8(0x22c)]=!![],_0x13e40a['innerHTML']='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Signing\x20In...';try{const {data:_0xfb354a,error:_0x45844f}=await supabase['auth'][_0x4498d8(0x138)]({'email':_0x3bcbec,'password':_0x5f0bff});if(_0x45844f)throw _0x45844f;adminUser=_0xfb354a['user'],hideError();if(DOM['loginModal'])DOM[_0x4498d8(0x12a)][_0x4498d8(0x221)][_0x4498d8(0x152)]('hidden');if(DOM[_0x4498d8(0xea)])DOM[_0x4498d8(0xea)][_0x4498d8(0x221)][_0x4498d8(0x17c)](_0x4498d8(0x12e));await initDashboard(),showNotification('Welcome\x20back,\x20Admin!',_0x4498d8(0x1bd));}catch(_0x16d387){console[_0x4498d8(0x16f)]('[ADMIN]\x20Login\x20error:',_0x16d387),showError(_0x16d387[_0x4498d8(0x177)]||_0x4498d8(0x223));}finally{_0x13e40a[_0x4498d8(0x22c)]=![],_0x13e40a[_0x4498d8(0x1b2)]='<i\x20class=\x22fas\x20fa-sign-in-alt\x22></i>\x20Admin\x20Login';}}async function handleLogout(){const _0x45a794=_0x29f326;try{await supabase[_0x45a794(0x1e3)]['signOut'](),adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],allSearchHistory=[],allWatchHistory=[],allBookmarks=[],Object[_0x45a794(0x10a)](chartInstances)[_0x45a794(0x1dc)](_0x5958c7=>_0x5958c7[_0x45a794(0x217)]()),chartInstances={},showLoginModal(),showNotification(_0x45a794(0x1c6),_0x45a794(0x1bd));}catch(_0x2e3c46){console[_0x45a794(0x16f)](_0x45a794(0x12f),_0x2e3c46),showNotification(_0x45a794(0x13a),'error');}}function showError(_0xbe9c45){const _0x428319=_0x29f326;DOM['loginError']&&(DOM[_0x428319(0x1d0)][_0x428319(0x1e7)]=_0xbe9c45,DOM[_0x428319(0x1d0)]['classList']['remove'](_0x428319(0x12e)));}function hideError(){const _0x2cbda0=_0x29f326;DOM[_0x2cbda0(0x1d0)]&&DOM['loginError'][_0x2cbda0(0x221)][_0x2cbda0(0x152)](_0x2cbda0(0x12e));}async function initDashboard(){const _0x31fe96=_0x29f326;console[_0x31fe96(0x230)](_0x31fe96(0x197));try{DOM['adminEmailDisplay']&&adminUser&&(DOM['adminEmailDisplay'][_0x31fe96(0x1e7)]=adminUser['email']),await loadUserMap(),await loadAllowedUsers(),await Promise[_0x31fe96(0x1d9)]([loadStats(),loadExpiringUsers(),loadRecentActivity()]),switchSection(_0x31fe96(0x225)),console[_0x31fe96(0x230)](_0x31fe96(0x11a));}catch(_0x24e0d1){console[_0x31fe96(0x16f)](_0x31fe96(0x1a7),_0x24e0d1),showNotification('Error\x20loading\x20dashboard',_0x31fe96(0x16f));}}async function loadUserMap(){const _0x260379=_0x29f326;try{const {data:_0x55a537,error:_0x1bdaf4}=await adminSupabase['auth'][_0x260379(0x202)][_0x260379(0x1cb)]();if(_0x1bdaf4)throw _0x1bdaf4;allAuthUsers=_0x55a537?.[_0x260379(0x1e5)]||[],userMap['emailToId']['clear'](),userMap['idToEmail'][_0x260379(0x109)](),allAuthUsers[_0x260379(0x1dc)](_0x40161c=>{const _0x4a7dae=_0x260379;_0x40161c['email']&&_0x40161c['id']&&(userMap[_0x4a7dae(0x237)]['set'](_0x40161c[_0x4a7dae(0x16c)],_0x40161c['id']),userMap[_0x4a7dae(0xf7)][_0x4a7dae(0x1df)](_0x40161c['id'],_0x40161c[_0x4a7dae(0x16c)]));}),console[_0x260379(0x230)](_0x260379(0x15a),allAuthUsers['length'],'users');}catch(_0x5735f8){console[_0x260379(0x16f)](_0x260379(0x249),_0x5735f8),showNotification(_0x260379(0xe8),'warning');}}async function loadAllowedUsers(){const _0x2d8970=_0x29f326;try{const {data:_0x5e7520,error:_0x5114bd}=await supabase[_0x2d8970(0x18c)]('allowed_users')[_0x2d8970(0x1b1)]('*');if(_0x5114bd)throw _0x5114bd;allowedUserMap['clear'](),_0x5e7520[_0x2d8970(0x1dc)](_0x3cf289=>{const _0x5ac775=_0x2d8970;if(_0x3cf289['email'])allowedUserMap[_0x5ac775(0x1df)](_0x3cf289[_0x5ac775(0x16c)],_0x3cf289);}),console['log'](_0x2d8970(0xf0),allowedUserMap['size']);}catch(_0x37aff5){console[_0x2d8970(0x16f)](_0x2d8970(0x1e4),_0x37aff5);}}async function loadStats(){const _0x530096=_0x29f326;try{const _0x1a3f2a=allAuthUsers[_0x530096(0xec)],_0x4e7778=allowedUserMap['size'],_0x12b75e=_0x1a3f2a-_0x4e7778,_0x262565=new Date(),_0x4e7813=Array[_0x530096(0x18c)](allowedUserMap[_0x530096(0x10a)]())[_0x530096(0x137)](_0x3966f3=>{const _0x115b9a=_0x530096;if(!_0x3966f3[_0x115b9a(0x1ba)])return![];if(!_0x3966f3[_0x115b9a(0x1b8)])return!![];return new Date(_0x3966f3['expiry_date'])>_0x262565;})[_0x530096(0xec)],_0x516686=Array[_0x530096(0x18c)](allowedUserMap[_0x530096(0x10a)]())[_0x530096(0x137)](_0x536c19=>{const _0x442bd3=_0x530096;if(!_0x536c19[_0x442bd3(0x1ba)])return![];if(!_0x536c19[_0x442bd3(0x1b8)])return![];return new Date(_0x536c19[_0x442bd3(0x1b8)])<=_0x262565;})[_0x530096(0xec)],{data:_0xb0646}=await supabase['from'](_0x530096(0x210))['select']('*')['eq'](_0x530096(0x1e6),'pending'),_0x2eedbd=_0xb0646?.[_0x530096(0xec)]||0x0;document[_0x530096(0x119)](_0x530096(0x10b))[_0x530096(0x1e7)]=_0x1a3f2a,document[_0x530096(0x119)](_0x530096(0x216))['textContent']=_0x4e7813,document[_0x530096(0x119)](_0x530096(0x15b))['textContent']=_0x12b75e,document[_0x530096(0x119)](_0x530096(0x22d))[_0x530096(0x1e7)]=_0x2eedbd,document[_0x530096(0x119)](_0x530096(0x244))[_0x530096(0x1e7)]=_0x516686,console[_0x530096(0x230)](_0x530096(0x1c7));}catch(_0x41fa93){console[_0x530096(0x16f)]('[ADMIN]\x20Error\x20loading\x20stats:',_0x41fa93);}}async function loadExpiringUsers(){const _0x26511d=_0x29f326;try{const _0x4ecdff=document['getElementById'](_0x26511d(0x150));if(!_0x4ecdff)return;const _0x5a2f56=new Date(),_0x344866=new Date(_0x5a2f56['getTime']()+0x7*0x18*0x3c*0x3c*0x3e8),_0x31e4c8=Array[_0x26511d(0x18c)](allowedUserMap[_0x26511d(0x10a)]())[_0x26511d(0x137)](_0x32cc18=>{const _0x11ce36=_0x26511d;if(!_0x32cc18[_0x11ce36(0x1ba)]||!_0x32cc18[_0x11ce36(0x1b8)])return![];const _0x42afc8=new Date(_0x32cc18[_0x11ce36(0x1b8)]);return _0x42afc8>_0x5a2f56&&_0x42afc8<=_0x344866;})[_0x26511d(0x240)]((_0x183840,_0x789c7a)=>new Date(_0x183840[_0x26511d(0x1b8)])-new Date(_0x789c7a['expiry_date']));if(_0x31e4c8['length']===0x0){_0x4ecdff[_0x26511d(0x1b2)]='<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i><p>No\x20subscriptions\x20expiring\x20soon</p></div>';return;}_0x4ecdff['innerHTML']=_0x31e4c8['map'](_0x4b6d9e=>{const _0x12f845=_0x26511d,_0x2a30a8=new Date(_0x4b6d9e[_0x12f845(0x1b8)]),_0x1ac8be=Math[_0x12f845(0x141)]((_0x2a30a8-_0x5a2f56)/(0x3e8*0x3c*0x3c*0x18));return _0x12f845(0x243)+_0x4b6d9e['email']+_0x12f845(0x1f0)+_0x1ac8be+_0x12f845(0x1fd)+(_0x1ac8be!==0x1?'s':'')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';})['join'](''),console['log']('[ADMIN]\x20Expiring\x20users\x20loaded:',_0x31e4c8[_0x26511d(0xec)]);}catch(_0x2ca5f2){console['error'](_0x26511d(0x11e),_0x2ca5f2);}}async function loadRecentActivity(){const _0x182448=_0x29f326;try{const _0x3db293=document[_0x182448(0x119)](_0x182448(0x21d));if(!_0x3db293)return;const _0x37720d=[],{data:_0x1df089}=await supabase[_0x182448(0x18c)](_0x182448(0x210))[_0x182448(0x1b1)]('*')[_0x182448(0xfc)](_0x182448(0x186),{'ascending':![]})[_0x182448(0x122)](0x5);_0x1df089&&_0x1df089[_0x182448(0x1dc)](_0x59c438=>{const _0x132b92=_0x182448;_0x37720d[_0x132b92(0xfe)]({'title':_0x132b92(0x1f9)+_0x59c438[_0x132b92(0x189)],'timestamp':new Date(_0x59c438[_0x132b92(0x186)]),'time':formatRelativeTime(_0x59c438[_0x132b92(0x186)]),'type':'warning'});});const {data:_0x13b3d6}=await supabase['from'](_0x182448(0x21a))[_0x182448(0x1b1)]('*')[_0x182448(0xfc)](_0x182448(0x186),{'ascending':![]})[_0x182448(0x122)](0x3)['eq']('approved',!![]);_0x13b3d6&&_0x13b3d6[_0x182448(0x1dc)](_0x50f108=>{const _0x3a7e0d=_0x182448;_0x37720d['push']({'title':_0x3a7e0d(0x233)+_0x50f108[_0x3a7e0d(0x16c)]+_0x3a7e0d(0x1de),'timestamp':new Date(_0x50f108[_0x3a7e0d(0x186)]),'time':formatRelativeTime(_0x50f108['created_at']),'type':_0x3a7e0d(0x1bd)});});_0x37720d[_0x182448(0x240)]((_0xa60eb4,_0x2948c7)=>_0x2948c7[_0x182448(0x105)]-_0xa60eb4[_0x182448(0x105)]);if(_0x37720d[_0x182448(0xec)]===0x0){_0x3db293[_0x182448(0x1b2)]='<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-bell\x22></i><p>No\x20recent\x20activity</p></div>';return;}_0x3db293[_0x182448(0x1b2)]=_0x37720d[_0x182448(0xf9)](_0x4c4160=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-item\x20'+_0x4c4160[_0x182448(0x136)]+_0x182448(0x23e)+_0x4c4160[_0x182448(0x1f4)]+_0x182448(0x1c8)+_0x4c4160['time']+_0x182448(0x236))[_0x182448(0x1ca)]('');}catch(_0x5d8813){console[_0x182448(0x16f)](_0x182448(0x170),_0x5d8813);}}async function loadAnalytics(){const _0x3ee986=_0x29f326;console[_0x3ee986(0x230)](_0x3ee986(0x115));try{const _0x5ca694=document[_0x3ee986(0x119)](_0x3ee986(0x199))?.[_0x3ee986(0x172)]||'30';let _0x240fe0=null;_0x5ca694!==_0x3ee986(0x1d9)&&(_0x240fe0=new Date(),_0x240fe0['setDate'](_0x240fe0[_0x3ee986(0x135)]()-parseInt(_0x5ca694))),await Promise[_0x3ee986(0x1d9)]([loadAnalyticsStats(_0x240fe0),loadMostWatchedChart(_0x240fe0),loadPopularSearchesChart(_0x240fe0),loadContentTypeChart(_0x240fe0),loadEngagementChart(_0x240fe0),loadTopWatchedList(_0x240fe0),loadTopBookmarkedList(_0x240fe0)]),console[_0x3ee986(0x230)]('[ADMIN]\x20Analytics\x20loaded');}catch(_0x5d2a61){console[_0x3ee986(0x16f)](_0x3ee986(0xfd),_0x5d2a61),showNotification(_0x3ee986(0xed),_0x3ee986(0x16f));}}async function loadAnalyticsStats(_0x57c258){const _0x153324=_0x29f326;try{let _0x2d0fbc=supabase[_0x153324(0x18c)](_0x153324(0x205))[_0x153324(0x1b1)]('duration'),_0xb7f770=supabase[_0x153324(0x18c)]('user_search_history')[_0x153324(0x1b1)]('*',{'count':'exact','head':!![]}),_0x4b4f51=supabase['from'](_0x153324(0x219))[_0x153324(0x1b1)]('*',{'count':'exact','head':!![]}),_0x19b503=supabase[_0x153324(0x18c)](_0x153324(0x1a0))[_0x153324(0x1b1)](_0x153324(0x139));if(_0x57c258){const _0x5ae4f4=_0x57c258[_0x153324(0x154)]();_0x2d0fbc=_0x2d0fbc[_0x153324(0x22e)](_0x153324(0x1f2),_0x5ae4f4),_0xb7f770=_0xb7f770[_0x153324(0x22e)]('searched_at',_0x5ae4f4),_0x4b4f51=_0x4b4f51[_0x153324(0x22e)](_0x153324(0x1ea),_0x5ae4f4);}const [{data:_0x81347f},{count:_0x145f7e},{count:_0x591732},{data:_0x4b07a4}]=await Promise[_0x153324(0x1d9)]([_0x2d0fbc,_0xb7f770,_0x4b4f51,_0x19b503]),_0x134311=_0x81347f?.[_0x153324(0x1ff)]((_0x554262,_0x102023)=>_0x554262+(_0x102023[_0x153324(0x1f7)]||0x0),0x0)||0x0,_0x1d37ff=Math['round'](_0x134311/0xe10);let _0x5d17e9=0x0;if(_0x4b07a4&&_0x4b07a4[_0x153324(0xec)]>0x0){const _0x154c32=_0x4b07a4[_0x153324(0x137)](_0x4de580=>_0x4de580[_0x153324(0xdd)])[_0x153324(0xec)];_0x5d17e9=Math[_0x153324(0x174)](_0x154c32/_0x4b07a4[_0x153324(0xec)]*0x64);}document[_0x153324(0x119)](_0x153324(0x121))[_0x153324(0x1e7)]=_0x1d37ff+'\x20hrs',document[_0x153324(0x119)](_0x153324(0x1a3))[_0x153324(0x1e7)]=_0x145f7e||0x0,document[_0x153324(0x119)](_0x153324(0x108))[_0x153324(0x1e7)]=_0x591732||0x0,document[_0x153324(0x119)]('completion-rate')[_0x153324(0x1e7)]=_0x5d17e9+'%';}catch(_0x1acdaf){console['error'](_0x153324(0x1e2),_0x1acdaf);}}function destroyChart(_0x444cd6){const _0x1c6744=_0x29f326;chartInstances[_0x444cd6]&&(chartInstances[_0x444cd6][_0x1c6744(0x217)](),delete chartInstances[_0x444cd6]);}function createBarChart(_0xad1ec7,_0x1b14ca,_0x26fd63,_0x5611e7){const _0x1842f5=_0x29f326,_0x5a0b8a=document[_0x1842f5(0x119)](_0xad1ec7);if(!_0x5a0b8a)return;destroyChart(_0xad1ec7);const _0x2152d6=_0x5a0b8a[_0x1842f5(0x1c3)]('2d');chartInstances[_0xad1ec7]=new Chart(_0x2152d6,{'type':_0x1842f5(0x241),'data':{'labels':_0x1b14ca,'datasets':[{'label':_0x5611e7,'data':_0x26fd63,'backgroundColor':_0x1842f5(0x1b0),'borderColor':_0x1842f5(0x211),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'display':![]}},'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x1842f5(0x13e)},'grid':{'color':_0x1842f5(0x23a)}},'x':{'ticks':{'color':_0x1842f5(0x13e)},'grid':{'color':_0x1842f5(0x23a)}}}}});}function createPieChart(_0x9a98bf,_0x16b600,_0x1a459c){const _0x640d2e=_0x29f326,_0x50c1df=document[_0x640d2e(0x119)](_0x9a98bf);if(!_0x50c1df)return;destroyChart(_0x9a98bf);const _0x2e5150=_0x50c1df[_0x640d2e(0x1c3)]('2d');chartInstances[_0x9a98bf]=new Chart(_0x2e5150,{'type':'pie','data':{'labels':_0x16b600,'datasets':[{'data':_0x1a459c,'backgroundColor':[_0x640d2e(0x123),_0x640d2e(0x19c)],'borderColor':[_0x640d2e(0x211),_0x640d2e(0x15e)],'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'position':'bottom','labels':{'color':_0x640d2e(0x13e)}}}}});}function createLineChart(_0xfb633f,_0x51d55c,_0x14fad7){const _0x19896b=_0x29f326,_0x3365d6=document[_0x19896b(0x119)](_0xfb633f);if(!_0x3365d6)return;destroyChart(_0xfb633f);const _0x2da693=_0x3365d6['getContext']('2d');chartInstances[_0xfb633f]=new Chart(_0x2da693,{'type':_0x19896b(0x107),'data':{'labels':_0x51d55c,'datasets':_0x14fad7},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'labels':{'color':'rgba(255,\x20255,\x20255,\x200.7)'}}},'scales':{'y':{'beginAtZero':!![],'ticks':{'color':'rgba(255,\x20255,\x20255,\x200.7)'},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}},'x':{'ticks':{'color':_0x19896b(0x13e)},'grid':{'color':_0x19896b(0x23a)}}}}});}async function loadMostWatchedChart(_0x16a0db){const _0x452dff=_0x29f326;try{let _0x2bce2b=supabase['from'](_0x452dff(0x205))[_0x452dff(0x1b1)](_0x452dff(0x227));_0x16a0db&&(_0x2bce2b=_0x2bce2b[_0x452dff(0x22e)](_0x452dff(0x1f2),_0x16a0db[_0x452dff(0x154)]()));const {data:_0x1de818}=await _0x2bce2b[_0x452dff(0x122)](0x3e8);if(!_0x1de818||_0x1de818['length']===0x0){destroyChart(_0x452dff(0x153));return;}const _0x596b81={};_0x1de818[_0x452dff(0x1dc)](_0x6da1bb=>{const _0x21ce84=_0x452dff,_0xe57fb3=_0x6da1bb[_0x21ce84(0x1f4)];_0x596b81[_0xe57fb3]=(_0x596b81[_0xe57fb3]||0x0)+0x1;});const _0x433354=Object[_0x452dff(0x21c)](_0x596b81)[_0x452dff(0x240)]((_0x728caa,_0x345372)=>_0x345372[0x1]-_0x728caa[0x1])[_0x452dff(0x215)](0x0,0xa),_0x39f5c2=_0x433354[_0x452dff(0xf9)](([_0x24c301])=>_0x24c301[_0x452dff(0xec)]>0x14?_0x24c301[_0x452dff(0x156)](0x0,0x14)+_0x452dff(0x1a8):_0x24c301),_0x565ab2=_0x433354['map'](([,_0x225c83])=>_0x225c83);createBarChart(_0x452dff(0x153),_0x39f5c2,_0x565ab2,_0x452dff(0x14f));}catch(_0x339ca8){console[_0x452dff(0x16f)]('[ADMIN]\x20Error\x20loading\x20most\x20watched\x20chart:',_0x339ca8);}}async function loadPopularSearchesChart(_0x2aed14){const _0x28a5cd=_0x29f326;try{let _0xac3f65=supabase[_0x28a5cd(0x18c)](_0x28a5cd(0x148))['select']('query');_0x2aed14&&(_0xac3f65=_0xac3f65['gte'](_0x28a5cd(0x1bc),_0x2aed14[_0x28a5cd(0x154)]()));const {data:_0x4cf5e8}=await _0xac3f65['limit'](0x3e8);if(!_0x4cf5e8||_0x4cf5e8[_0x28a5cd(0xec)]===0x0){destroyChart(_0x28a5cd(0x15c));return;}const _0x35693e={};_0x4cf5e8[_0x28a5cd(0x1dc)](_0xdc1227=>{const _0xd908a6=_0x28a5cd,_0x5ab8ae=_0xdc1227[_0xd908a6(0x245)]['toLowerCase']();_0x35693e[_0x5ab8ae]=(_0x35693e[_0x5ab8ae]||0x0)+0x1;});const _0x416123=Object[_0x28a5cd(0x21c)](_0x35693e)[_0x28a5cd(0x240)]((_0xe9bbab,_0x3c3f60)=>_0x3c3f60[0x1]-_0xe9bbab[0x1])[_0x28a5cd(0x215)](0x0,0xa),_0x1a7245=_0x416123[_0x28a5cd(0xf9)](([_0x2fa4d3])=>_0x2fa4d3['length']>0xf?_0x2fa4d3[_0x28a5cd(0x156)](0x0,0xf)+'...':_0x2fa4d3),_0x2cd031=_0x416123[_0x28a5cd(0xf9)](([,_0x4d6146])=>_0x4d6146);createBarChart(_0x28a5cd(0x15c),_0x1a7245,_0x2cd031,'Searches');}catch(_0xb0596a){console[_0x28a5cd(0x16f)]('[ADMIN]\x20Error\x20loading\x20popular\x20searches\x20chart:',_0xb0596a);}}async function loadContentTypeChart(_0x40a3ce){const _0x59b76c=_0x29f326;try{let _0x47b64a=supabase['from'](_0x59b76c(0x205))[_0x59b76c(0x1b1)](_0x59b76c(0x104));_0x40a3ce&&(_0x47b64a=_0x47b64a[_0x59b76c(0x22e)](_0x59b76c(0x1f2),_0x40a3ce[_0x59b76c(0x154)]()));const {data:_0x3e9a03}=await _0x47b64a;if(!_0x3e9a03||_0x3e9a03[_0x59b76c(0xec)]===0x0){destroyChart('contentTypeChart');return;}const _0x52b4a2=_0x3e9a03[_0x59b76c(0x137)](_0xb091c=>_0xb091c[_0x59b76c(0x104)]==='movie')[_0x59b76c(0xec)],_0x51dc58=_0x3e9a03[_0x59b76c(0x137)](_0x3842db=>_0x3842db[_0x59b76c(0x104)]==='tv')[_0x59b76c(0xec)];createPieChart(_0x59b76c(0x232),['Movies',_0x59b76c(0x222)],[_0x52b4a2,_0x51dc58]);}catch(_0x38ec44){console['error']('[ADMIN]\x20Error\x20loading\x20content\x20type\x20chart:',_0x38ec44);}}async function loadEngagementChart(_0x44343e){const _0xf076=_0x29f326;try{const _0x44fc29=_0x44343e?Math[_0xf076(0x141)]((new Date()-_0x44343e)/(0x3e8*0x3c*0x3c*0x18)):0x1e,_0x397c3d=[],_0x5e9ed2=[],_0x389d17=[];for(let _0x13ad6d=_0x44fc29-0x1;_0x13ad6d>=0x0;_0x13ad6d--){const _0x3ef9cd=new Date();_0x3ef9cd[_0xf076(0xf2)](_0x3ef9cd[_0xf076(0x135)]()-_0x13ad6d),_0x3ef9cd[_0xf076(0x155)](0x0,0x0,0x0,0x0);const _0x51f0d7=new Date(_0x3ef9cd);_0x51f0d7['setDate'](_0x51f0d7['getDate']()+0x1);const _0x7ba6d8=_0x3ef9cd[_0xf076(0x13f)](_0xf076(0x16e),{'month':_0xf076(0x21e),'day':'numeric'});_0x397c3d[_0xf076(0xfe)](_0x7ba6d8);const [{count:_0x2e9c49},{count:_0x322401}]=await Promise[_0xf076(0x1d9)]([supabase['from']('user_watch_history')[_0xf076(0x1b1)]('*',{'count':_0xf076(0x1d2),'head':!![]})[_0xf076(0x22e)](_0xf076(0x1f2),_0x3ef9cd[_0xf076(0x154)]())['lt'](_0xf076(0x1f2),_0x51f0d7['toISOString']()),supabase[_0xf076(0x18c)](_0xf076(0x148))[_0xf076(0x1b1)]('*',{'count':'exact','head':!![]})[_0xf076(0x22e)](_0xf076(0x1bc),_0x3ef9cd['toISOString']())['lt'](_0xf076(0x1bc),_0x51f0d7['toISOString']())]);_0x5e9ed2[_0xf076(0xfe)](_0x2e9c49||0x0),_0x389d17[_0xf076(0xfe)](_0x322401||0x0);}createLineChart('engagementChart',_0x397c3d,[{'label':_0xf076(0x14f),'data':_0x5e9ed2,'borderColor':_0xf076(0xfa),'backgroundColor':'rgba(229,\x209,\x2020,\x200.1)'},{'label':_0xf076(0x13d),'data':_0x389d17,'borderColor':_0xf076(0x1ae),'backgroundColor':_0xf076(0x102)}]);}catch(_0x4cca82){console[_0xf076(0x16f)](_0xf076(0x23c),_0x4cca82);}}async function loadTopWatchedList(_0x274252){const _0x32dd68=_0x29f326;try{let _0x330be5=supabase['from'](_0x32dd68(0x205))['select'](_0x32dd68(0x227));_0x274252&&(_0x330be5=_0x330be5[_0x32dd68(0x22e)](_0x32dd68(0x1f2),_0x274252['toISOString']()));const {data:_0xd2b6ce}=await _0x330be5[_0x32dd68(0x122)](0x3e8);if(!_0xd2b6ce||_0xd2b6ce[_0x32dd68(0xec)]===0x0){document[_0x32dd68(0x119)](_0x32dd68(0x17a))[_0x32dd68(0x1b2)]=_0x32dd68(0x208);return;}const _0x1db84d={};_0xd2b6ce[_0x32dd68(0x1dc)](_0x15dc16=>{const _0x1afd84=_0x32dd68,_0x51c13d=_0x15dc16['title']+'|'+_0x15dc16[_0x1afd84(0x104)];!_0x1db84d[_0x51c13d]&&(_0x1db84d[_0x51c13d]={'title':_0x15dc16[_0x1afd84(0x1f4)],'type':_0x15dc16[_0x1afd84(0x104)],'count':0x0}),_0x1db84d[_0x51c13d][_0x1afd84(0x188)]++;});const _0x5495b0=Object[_0x32dd68(0x10a)](_0x1db84d)[_0x32dd68(0x240)]((_0x4f1f95,_0x23f6a0)=>_0x23f6a0[_0x32dd68(0x188)]-_0x4f1f95['count'])['slice'](0x0,0xa),_0xb63cd6=_0x5495b0[_0x32dd68(0xf9)]((_0x4b42ec,_0x5ac466)=>_0x32dd68(0x144)+(_0x5ac466+0x1)+_0x32dd68(0x157)+_0x4b42ec[_0x32dd68(0x1f4)]+_0x32dd68(0xdc)+(_0x4b42ec[_0x32dd68(0x136)]===_0x32dd68(0x198)?_0x32dd68(0x110):_0x32dd68(0x1db))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-count\x22>'+_0x4b42ec['count']+'\x20views</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['join']('');document[_0x32dd68(0x119)](_0x32dd68(0x17a))[_0x32dd68(0x1b2)]=_0xb63cd6;}catch(_0x3c161c){console['error'](_0x32dd68(0x1ec),_0x3c161c);}}async function loadTopBookmarkedList(_0x383bce){const _0x38e018=_0x29f326;try{let _0x481946=supabase[_0x38e018(0x18c)](_0x38e018(0x219))[_0x38e018(0x1b1)](_0x38e018(0x227));_0x383bce&&(_0x481946=_0x481946[_0x38e018(0x22e)](_0x38e018(0x1ea),_0x383bce[_0x38e018(0x154)]()));const {data:_0x1ebf11}=await _0x481946[_0x38e018(0x122)](0x3e8);if(!_0x1ebf11||_0x1ebf11[_0x38e018(0xec)]===0x0){document['getElementById'](_0x38e018(0x133))[_0x38e018(0x1b2)]=_0x38e018(0x229);return;}const _0xc79a24={};_0x1ebf11[_0x38e018(0x1dc)](_0xdcdfaf=>{const _0x345a4b=_0x38e018,_0x4646d7=_0xdcdfaf[_0x345a4b(0x1f4)]+'|'+_0xdcdfaf[_0x345a4b(0x104)];!_0xc79a24[_0x4646d7]&&(_0xc79a24[_0x4646d7]={'title':_0xdcdfaf[_0x345a4b(0x1f4)],'type':_0xdcdfaf[_0x345a4b(0x104)],'count':0x0}),_0xc79a24[_0x4646d7]['count']++;});const _0x5603f7=Object['values'](_0xc79a24)[_0x38e018(0x240)]((_0x334a44,_0x34a7fd)=>_0x34a7fd[_0x38e018(0x188)]-_0x334a44[_0x38e018(0x188)])[_0x38e018(0x215)](0x0,0xa),_0x4c227d=_0x5603f7['map']((_0x3a17ce,_0x257814)=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-rank\x22>'+(_0x257814+0x1)+_0x38e018(0x157)+_0x3a17ce[_0x38e018(0x1f4)]+_0x38e018(0xdc)+(_0x3a17ce[_0x38e018(0x136)]===_0x38e018(0x198)?_0x38e018(0x110):_0x38e018(0x1db))+_0x38e018(0x17f)+_0x3a17ce[_0x38e018(0x188)]+_0x38e018(0x18e))[_0x38e018(0x1ca)]('');document[_0x38e018(0x119)]('top-bookmarked-list')[_0x38e018(0x1b2)]=_0x4c227d;}catch(_0x385bdf){console[_0x38e018(0x16f)](_0x38e018(0x19f),_0x385bdf);}}async function loadUsers(){const _0x559c3b=_0x29f326;console[_0x559c3b(0x230)](_0x559c3b(0x111));try{const _0x55dd16=new Date(),_0x1560db=allAuthUsers['map'](_0x1bc71f=>{const _0x468a2c=_0x559c3b,_0x1f5dd8=allowedUserMap['get'](_0x1bc71f['email'])||null;let _0x542136='pending';return _0x1f5dd8&&(_0x1f5dd8['approved']?_0x542136=new Date(_0x1f5dd8[_0x468a2c(0x1b8)]||0x0)>_0x55dd16?_0x468a2c(0x165):_0x468a2c(0xf1):_0x542136=_0x468a2c(0x171)),{'id':_0x1bc71f['id'],'email':_0x1bc71f[_0x468a2c(0x16c)],'created_at':_0x1bc71f[_0x468a2c(0x186)],'status':_0x542136,'allowedData':_0x1f5dd8};});allUsers=_0x1560db,filterUsers(),console['log']('[ADMIN]\x20Users\x20loaded\x20and\x20filtered');}catch(_0x1b51bf){console[_0x559c3b(0x16f)](_0x559c3b(0x195),_0x1b51bf),showNotification(_0x559c3b(0xe8),_0x559c3b(0x16f));}}function filterUsers(){const _0x135cf2=_0x29f326;console[_0x135cf2(0x230)](_0x135cf2(0x1a1),currentFilter);let _0x23e405=allUsers;currentFilter!==_0x135cf2(0x1d9)&&(_0x23e405=allUsers[_0x135cf2(0x137)](_0x1d1c16=>_0x1d1c16[_0x135cf2(0x1e6)]===currentFilter)),renderUsers(_0x23e405);}function filterUsersBySearch(_0x567cad){const _0x205e1b=_0x29f326,_0x1469dc=_0x567cad[_0x205e1b(0x20c)]()[_0x205e1b(0x140)]();if(!_0x1469dc){filterUsers();return;}let _0x1e5d6f=allUsers;currentFilter!=='all'&&(_0x1e5d6f=allUsers[_0x205e1b(0x137)](_0x1b6851=>_0x1b6851[_0x205e1b(0x1e6)]===currentFilter));const _0xaaa368=_0x1e5d6f[_0x205e1b(0x137)](_0xb203cc=>_0xb203cc[_0x205e1b(0x16c)]['toLowerCase']()[_0x205e1b(0x112)](_0x1469dc));renderUsers(_0xaaa368);}function renderUsers(_0xc46d1e){const _0x4a67bd=_0x29f326,_0x218ffa=DOM[_0x4a67bd(0x18a)];if(!_0x218ffa)return;if(!_0xc46d1e||_0xc46d1e[_0x4a67bd(0xec)]===0x0){_0x218ffa['innerHTML']=_0x4a67bd(0x1d8);return;}_0x218ffa[_0x4a67bd(0x1b2)]=_0xc46d1e[_0x4a67bd(0xf9)](_0x45d8bc=>{const _0x42cc94=_0x4a67bd,{email:_0x53d0a5,created_at:_0x38406e,status:_0x1eb1d7,allowedData:_0x307e5e}=_0x45d8bc,_0x4d444a=new Date(_0x38406e)['toLocaleDateString']();let _0x135408=_0x42cc94(0xeb)+_0x1eb1d7+'\x22>'+(_0x1eb1d7['charAt'](0x0)[_0x42cc94(0x142)]()+_0x1eb1d7['slice'](0x1))+_0x42cc94(0x22f),_0x5b4693='';_0x1eb1d7===_0x42cc94(0x171)?_0x5b4693='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-approve-user\x22\x20onclick=\x22openAllowModal(\x27'+_0x53d0a5+_0x42cc94(0x178)+_0x45d8bc['id']+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20':_0x5b4693=_0x42cc94(0x1d1)+_0x45d8bc['id']+_0x42cc94(0x20f)+_0x45d8bc['id']+_0x42cc94(0x106)+_0x45d8bc['id']+'\x27,\x20\x27'+_0x53d0a5+_0x42cc94(0x15f);let _0x15ec5b='';if(_0x307e5e?.['expiry_date']){const _0x31513f=new Date(_0x307e5e[_0x42cc94(0x1b8)])[_0x42cc94(0x13f)]();_0x15ec5b=_0x42cc94(0x1a9)+_0x31513f+_0x42cc94(0x114);}return _0x42cc94(0x173)+_0x53d0a5+_0x42cc94(0x1fc)+_0x135408+_0x42cc94(0x1b4)+_0x4d444a+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x15ec5b+_0x42cc94(0x250)+_0x5b4693+_0x42cc94(0x1b7);})[_0x4a67bd(0x1ca)]('');}function openAllowModal(_0x17e22b){const _0x508a43=_0x29f326;console[_0x508a43(0x230)](_0x508a43(0x116),_0x17e22b),document[_0x508a43(0x119)](_0x508a43(0x1fe))[_0x508a43(0x172)]=_0x17e22b,document[_0x508a43(0x119)]('allow-user-modal')[_0x508a43(0x221)][_0x508a43(0x17c)](_0x508a43(0x12e));}function closeAllowModal(){const _0x13eae3=_0x29f326;document[_0x13eae3(0x119)]('allow-user-modal')[_0x13eae3(0x221)][_0x13eae3(0x152)]('hidden'),document[_0x13eae3(0x119)](_0x13eae3(0x1f5))[_0x13eae3(0x159)]();}async function handleAllowUser(_0xcf2743){const _0x3ecefd=_0x29f326;_0xcf2743[_0x3ecefd(0x226)](),console[_0x3ecefd(0x230)](_0x3ecefd(0xe1));const _0x295034=document[_0x3ecefd(0x119)](_0x3ecefd(0x1fe))['value'],_0x24e012=parseInt(document[_0x3ecefd(0x119)](_0x3ecefd(0x126))['value']),_0x4ac5d1=_0xcf2743['target'][_0x3ecefd(0xdb)](_0x3ecefd(0x162));if(!_0x24e012){showNotification('Please\x20select\x20a\x20duration',_0x3ecefd(0x16f));return;}_0x4ac5d1['disabled']=!![],_0x4ac5d1[_0x3ecefd(0x1b2)]='<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Approving...';try{const _0xff5da=new Date();_0xff5da[_0x3ecefd(0x14c)](_0xff5da[_0x3ecefd(0x1cc)]()+_0x24e012);const {error:_0x124bbc}=await supabase[_0x3ecefd(0x18c)](_0x3ecefd(0x21a))[_0x3ecefd(0x10e)]({'email':_0x295034,'approved':!![],'expiry_date':_0xff5da[_0x3ecefd(0x154)](),'created_at':new Date()[_0x3ecefd(0x154)]()},{'onConflict':_0x3ecefd(0x16c)});if(_0x124bbc){console[_0x3ecefd(0x16f)](_0x3ecefd(0x128),_0x124bbc);throw _0x124bbc;}console[_0x3ecefd(0x230)](_0x3ecefd(0xe2)),showNotification('User\x20'+_0x295034+_0x3ecefd(0x1c2)+_0x24e012+_0x3ecefd(0x120),_0x3ecefd(0x1bd)),closeAllowModal(),await Promise[_0x3ecefd(0x1d9)]([loadAllowedUsers(),loadStats(),loadUsers(),loadRecentActivity()]);}catch(_0x2ccf9d){console[_0x3ecefd(0x16f)](_0x3ecefd(0x234),_0x2ccf9d),showNotification(_0x3ecefd(0x127),_0x3ecefd(0x16f));}finally{_0x4ac5d1[_0x3ecefd(0x22c)]=![],_0x4ac5d1[_0x3ecefd(0x1b2)]=_0x3ecefd(0x124);}}async function handleAddUser(_0x20cf48){const _0x32c1b0=_0x29f326;_0x20cf48['preventDefault'](),console[_0x32c1b0(0x230)]('[ADMIN]\x20handleAddUser()\x20called');const _0x30b929=document[_0x32c1b0(0x119)]('new-user-email')[_0x32c1b0(0x172)],_0x2fec68=parseInt(document['getElementById'](_0x32c1b0(0xef))['value']),_0x3fcbdf=_0x20cf48['target']['querySelector'](_0x32c1b0(0x162));if(!_0x30b929||!_0x2fec68){showNotification(_0x32c1b0(0x218),_0x32c1b0(0x16f));return;}_0x3fcbdf[_0x32c1b0(0x22c)]=!![],_0x3fcbdf['innerHTML']=_0x32c1b0(0x1c1);try{const _0x574028=new Date();_0x574028[_0x32c1b0(0x14c)](_0x574028[_0x32c1b0(0x1cc)]()+_0x2fec68);const {error:_0x367adb}=await supabase['from'](_0x32c1b0(0x21a))['insert']({'email':_0x30b929,'approved':!![],'expiry_date':_0x574028[_0x32c1b0(0x154)](),'created_at':new Date()[_0x32c1b0(0x154)]()});if(_0x367adb){console[_0x32c1b0(0x16f)](_0x32c1b0(0x187),_0x367adb);throw _0x367adb;}console[_0x32c1b0(0x230)](_0x32c1b0(0x191)),showNotification(_0x32c1b0(0x233)+_0x30b929+'\x20added\x20for\x20'+_0x2fec68+'\x20months!',_0x32c1b0(0x1bd)),_0x20cf48['target'][_0x32c1b0(0x159)](),await Promise[_0x32c1b0(0x1d9)]([loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0x47647d){console['error']('[ADMIN]\x20Error\x20in\x20handleAddUser:',_0x47647d),showNotification(_0x32c1b0(0x1b3),_0x32c1b0(0x16f));}finally{_0x3fcbdf[_0x32c1b0(0x22c)]=![],_0x3fcbdf[_0x32c1b0(0x1b2)]='Add\x20User';}}async function deleteUser(_0x52f7c3,_0x338929){const _0x49790b=_0x29f326;console[_0x49790b(0x230)](_0x49790b(0x212),_0x338929);if(!confirm('Delete\x20user\x20'+_0x338929+_0x49790b(0x1aa)))return;try{await supabase['from'](_0x49790b(0x21a))[_0x49790b(0x1ef)]()['eq'](_0x49790b(0x16c),_0x338929);const {error:_0x1364b5}=await adminSupabase[_0x49790b(0x1e3)][_0x49790b(0x202)]['deleteUser'](_0x52f7c3);if(_0x1364b5)throw _0x1364b5;showNotification('User\x20'+_0x338929+_0x49790b(0x146),_0x49790b(0x1bd)),await Promise[_0x49790b(0x1d9)]([loadUserMap(),loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0x1d1cbe){console['error'](_0x49790b(0x21b),_0x1d1cbe),showNotification(_0x49790b(0x182),'error');}}async function logoutUserSessions(_0x49c8fc){const _0x30050a=_0x29f326;console[_0x30050a(0x230)](_0x30050a(0x214),_0x49c8fc);if(!confirm(_0x30050a(0x14b)))return;try{const {error:_0x2e25ff}=await adminSupabase[_0x30050a(0x1e3)][_0x30050a(0x202)][_0x30050a(0x100)](_0x49c8fc);if(_0x2e25ff)throw _0x2e25ff;showNotification('User\x20sessions\x20logged\x20out',_0x30050a(0x1bd));}catch(_0x2bdbcb){console['error'](_0x30050a(0xe3),_0x2bdbcb),showNotification('Error\x20logging\x20out\x20sessions','error');}}async function viewUserDetails(_0x2a5cf8){const _0x4b10d3=_0x29f326;console[_0x4b10d3(0x230)]('[ADMIN]\x20viewUserDetails()\x20called\x20for\x20ID:',_0x2a5cf8);try{const _0x78a79=document[_0x4b10d3(0x119)](_0x4b10d3(0x19d)),_0x28e99d=document['getElementById'](_0x4b10d3(0x1c9)),_0x4bccd2=userMap['idToEmail']['get'](_0x2a5cf8);if(!_0x4bccd2)throw new Error(_0x4b10d3(0x1d3));const _0x325f7d=allowedUserMap[_0x4b10d3(0x17e)](_0x4bccd2),[{count:_0x1a5499},{count:_0x4553e7},{count:_0x4ce2f2}]=await Promise['all']([supabase[_0x4b10d3(0x18c)](_0x4b10d3(0x148))[_0x4b10d3(0x1b1)]('*',{'count':_0x4b10d3(0x1d2),'head':!![]})['eq'](_0x4b10d3(0x16b),_0x2a5cf8),supabase[_0x4b10d3(0x18c)](_0x4b10d3(0x205))[_0x4b10d3(0x1b1)]('*',{'count':_0x4b10d3(0x1d2),'head':!![]})['eq'](_0x4b10d3(0x16b),_0x2a5cf8),supabase[_0x4b10d3(0x18c)]('user_bookmarks')[_0x4b10d3(0x1b1)]('*',{'count':_0x4b10d3(0x1d2),'head':!![]})['eq']('user_id',_0x2a5cf8)]),_0x116688=_0x1a5499||0x0,_0x5d8222=_0x4553e7||0x0,_0x365bf2=_0x4ce2f2||0x0,_0x1d59c8=new Date();let _0x57c80b='';if(_0x325f7d?.[_0x4b10d3(0x1ba)]){if(_0x325f7d[_0x4b10d3(0x1b8)]){const _0x4f36bd=new Date(_0x325f7d['expiry_date']),_0x41136b=Math[_0x4b10d3(0x141)]((_0x4f36bd-_0x1d59c8)/(0x3e8*0x3c*0x3c*0x18));_0x41136b>0x0?_0x57c80b=_0x4b10d3(0x1b9)+_0x41136b+_0x4b10d3(0x21f):_0x57c80b=_0x4b10d3(0x1a4)+Math[_0x4b10d3(0x246)](_0x41136b)+_0x4b10d3(0x15d);}else _0x57c80b=_0x4b10d3(0xf6);}else _0x57c80b=_0x4b10d3(0x11d);_0x28e99d[_0x4b10d3(0x1b2)]=_0x4b10d3(0x1e0)+_0x4bccd2+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Status:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x57c80b+_0x4b10d3(0x179)+(_0x325f7d?.['created_at']?_0x4b10d3(0x125)+new Date(_0x325f7d['created_at'])[_0x4b10d3(0x13f)]()+_0x4b10d3(0x23b):'')+_0x4b10d3(0x163)+(_0x325f7d?.[_0x4b10d3(0x1b8)]?'<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Expiry:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>'+new Date(_0x325f7d[_0x4b10d3(0x1b8)])[_0x4b10d3(0x13f)]()+_0x4b10d3(0x23b):'')+_0x4b10d3(0x1ab)+_0x116688+_0x4b10d3(0x20a)+_0x5d8222+_0x4b10d3(0x17d)+_0x365bf2+_0x4b10d3(0xf3),_0x78a79[_0x4b10d3(0x221)][_0x4b10d3(0x17c)](_0x4b10d3(0x12e));}catch(_0x3455db){console['error'](_0x4b10d3(0x201),_0x3455db),showNotification(_0x4b10d3(0x132),_0x4b10d3(0x16f));}}async function loadPendingPayments(){const _0x57e11e=_0x29f326;console['log']('[ADMIN]\x20loadPendingPayments()\x20called');try{const {data:_0x128ead,error:_0x2dbb55}=await supabase[_0x57e11e(0x18c)](_0x57e11e(0x210))[_0x57e11e(0x1b1)]('*')['eq'](_0x57e11e(0x1e6),_0x57e11e(0x171))[_0x57e11e(0xfc)]('created_at',{'ascending':![]});if(_0x2dbb55)throw _0x2dbb55;const _0x17ad31=document[_0x57e11e(0x119)](_0x57e11e(0x247));if(!_0x17ad31)return;if(!_0x128ead||_0x128ead['length']===0x0){_0x17ad31[_0x57e11e(0x1b2)]='<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i><p>No\x20pending\x20payments</p></div>';return;}_0x17ad31[_0x57e11e(0x1b2)]=_0x128ead[_0x57e11e(0xf9)](_0x23bff0=>_0x57e11e(0xfb)+_0x23bff0[_0x57e11e(0x189)]+_0x57e11e(0xe4)+_0x23bff0[_0x57e11e(0x1c4)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Submitted:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+new Date(_0x23bff0[_0x57e11e(0x186)])[_0x57e11e(0x1ee)]()+_0x57e11e(0x1eb)+_0x23bff0['id']+_0x57e11e(0xde)+_0x23bff0['user_email']+_0x57e11e(0x206)+_0x23bff0['id']+_0x57e11e(0x19a))[_0x57e11e(0x1ca)]('');}catch(_0x401a1c){console[_0x57e11e(0x16f)](_0x57e11e(0x1e1),_0x401a1c),showNotification(_0x57e11e(0x1d7),_0x57e11e(0x16f));}}async function approvePayment(_0x23146c,_0x1daa07){const _0xb8dff3=_0x29f326;if(!confirm(_0xb8dff3(0x117)+_0x1daa07+_0xb8dff3(0x134)))return;try{const _0x3723cc=new Date();_0x3723cc['setMonth'](_0x3723cc[_0xb8dff3(0x1cc)]()+0x1);const {error:_0x31392e}=await supabase[_0xb8dff3(0x18c)](_0xb8dff3(0x21a))[_0xb8dff3(0x10e)]({'email':_0x1daa07,'approved':!![],'expiry_date':_0x3723cc[_0xb8dff3(0x154)](),'created_at':new Date()[_0xb8dff3(0x154)]()},{'onConflict':_0xb8dff3(0x16c)});if(_0x31392e)throw _0x31392e;const {error:_0x467be9}=await supabase['from']('pending_payments')['update']({'status':'approved'})['eq']('id',_0x23146c);if(_0x467be9)throw _0x467be9;showNotification(_0xb8dff3(0x147)+_0x1daa07+_0xb8dff3(0x20e),_0xb8dff3(0x1bd)),await Promise[_0xb8dff3(0x1d9)]([loadAllowedUsers(),loadStats(),loadPendingPayments(),loadRecentActivity(),loadUsers()]);}catch(_0x4655e1){console[_0xb8dff3(0x16f)](_0xb8dff3(0x22b),_0x4655e1),showNotification('Error\x20approving\x20payment',_0xb8dff3(0x16f));}}async function rejectPayment(_0x309766){const _0x432593=_0x29f326;if(!confirm(_0x432593(0x1ce)))return;try{const {error:_0x9ca914}=await supabase[_0x432593(0x18c)]('pending_payments')[_0x432593(0x231)]({'status':_0x432593(0x17b)})['eq']('id',_0x309766);if(_0x9ca914)throw _0x9ca914;showNotification(_0x432593(0x1f8),_0x432593(0x1bd)),await Promise[_0x432593(0x1d9)]([loadPendingPayments(),loadStats(),loadRecentActivity()]);}catch(_0x208ee5){console['error'](_0x432593(0x1ad),_0x208ee5),showNotification('Error\x20rejecting\x20payment','error');}}async function loadSearchHistory(){const _0x133924=_0x29f326;try{const {data:_0x11c2ea,error:_0x5678e0}=await supabase['from'](_0x133924(0x148))[_0x133924(0x1b1)]('*')[_0x133924(0xfc)]('searched_at',{'ascending':![]})[_0x133924(0x122)](0x64);if(_0x5678e0)throw _0x5678e0;allSearchHistory=_0x11c2ea||[],renderHistory(allSearchHistory,'search-list',_0x133924(0x1c5));}catch(_0x2db23e){console[_0x133924(0x16f)]('[ADMIN]\x20Error\x20in\x20loadSearchHistory:',_0x2db23e),showNotification('Error\x20loading\x20search\x20history','error');}}async function loadWatchHistory(){const _0xe09c86=_0x29f326;try{const {data:_0x4d6543,error:_0x3cc487}=await supabase['from'](_0xe09c86(0x205))[_0xe09c86(0x1b1)]('*')[_0xe09c86(0xfc)](_0xe09c86(0x1f2),{'ascending':![]})['limit'](0x64);if(_0x3cc487)throw _0x3cc487;allWatchHistory=_0x4d6543||[],renderHistory(allWatchHistory,'watch-list',_0xe09c86(0x1be));}catch(_0x4faa1e){console[_0xe09c86(0x16f)](_0xe09c86(0x168),_0x4faa1e),showNotification(_0xe09c86(0x13c),_0xe09c86(0x16f));}}async function loadBookmarks(){const _0x301a2c=_0x29f326;try{const {data:_0x3f4014,error:_0x5170ab}=await supabase[_0x301a2c(0x18c)]('user_bookmarks')['select']('*')[_0x301a2c(0xfc)](_0x301a2c(0x1ea),{'ascending':![]})[_0x301a2c(0x122)](0x64);if(_0x5170ab)throw _0x5170ab;allBookmarks=_0x3f4014||[],renderHistory(allBookmarks,'bookmark-list',_0x301a2c(0x11b));}catch(_0x274986){console[_0x301a2c(0x16f)](_0x301a2c(0x1e8),_0x274986),showNotification(_0x301a2c(0x18f),_0x301a2c(0x16f));}}function renderHistory(_0x3e6b2e,_0x194179,_0xd130cf){const _0x530f28=_0x29f326,_0x52d46d=document[_0x530f28(0x119)](_0x194179);if(!_0x52d46d)return;if(!_0x3e6b2e||_0x3e6b2e[_0x530f28(0xec)]===0x0){_0x52d46d[_0x530f28(0x1b2)]=_0x530f28(0x12c);return;}_0x52d46d[_0x530f28(0x1b2)]=_0x3e6b2e[_0x530f28(0xf9)](_0x177d9c=>{const _0x262472=_0x530f28,_0x3b28cf=userMap[_0x262472(0xf7)][_0x262472(0x17e)](_0x177d9c['user_id'])||'Unknown\x20User';let _0x500b3e='',_0x1083cb='';switch(_0xd130cf){case _0x262472(0x1c5):_0x500b3e='Search:\x20\x22'+_0x177d9c['query']+'\x22',_0x1083cb=_0x177d9c['searched_at'];break;case _0x262472(0x1be):_0x500b3e=_0x177d9c['title']+'\x20('+_0x177d9c[_0x262472(0x104)]+')',_0x1083cb=_0x177d9c[_0x262472(0x1f2)];if(_0x177d9c['season'])_0x500b3e+='\x20-\x20S'+_0x177d9c['season'];if(_0x177d9c['episode'])_0x500b3e+='E'+_0x177d9c[_0x262472(0x13b)];if(_0x177d9c[_0x262472(0x1f7)])_0x500b3e+=_0x262472(0xf5)+formatDuration(_0x177d9c[_0x262472(0x1f7)]);break;case _0x262472(0x11b):_0x500b3e=_0x177d9c[_0x262472(0x1f4)]+'\x20('+_0x177d9c[_0x262472(0x104)]+')',_0x1083cb=_0x177d9c['added_at'];break;}return _0x262472(0x12b)+_0x3b28cf+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-time\x22>'+new Date(_0x1083cb)['toLocaleString']()+_0x262472(0x160)+_0x500b3e+_0x262472(0x236);})['join']('');}function _0x9c83(_0x1a3de9,_0x313182){const _0x5f5731=_0x5f57();return _0x9c83=function(_0x9c83fd,_0x1d5b34){_0x9c83fd=_0x9c83fd-0xdb;let _0x37c335=_0x5f5731[_0x9c83fd];return _0x37c335;},_0x9c83(_0x1a3de9,_0x313182);}function filterHistory(_0x1ce7a6,_0x3f95e6){const _0x905683=_0x29f326,_0x50f617=_0x3f95e6[_0x905683(0x20c)]()['trim']();let _0x195bcd=[],_0x4a160d='';switch(_0x1ce7a6){case _0x905683(0x1c5):_0x195bcd=allSearchHistory,_0x4a160d='search-list';break;case _0x905683(0x1be):_0x195bcd=allWatchHistory,_0x4a160d=_0x905683(0x200);break;case _0x905683(0x11b):_0x195bcd=allBookmarks,_0x4a160d=_0x905683(0x11c);break;}if(_0x50f617===''){renderHistory(_0x195bcd,_0x4a160d,_0x1ce7a6);return;}const _0x100259=_0x195bcd['filter'](_0x3dd60e=>{const _0x2afa14=_0x905683,_0x315cab=userMap['idToEmail'][_0x2afa14(0x17e)](_0x3dd60e[_0x2afa14(0x16b)])||'',_0x4142c1=_0x315cab['toLowerCase']()[_0x2afa14(0x112)](_0x50f617);let _0x59e58a=![];switch(_0x1ce7a6){case'search':_0x59e58a=_0x3dd60e['query']?.[_0x2afa14(0x20c)]()[_0x2afa14(0x112)](_0x50f617);break;case _0x2afa14(0x1be):case _0x2afa14(0x11b):_0x59e58a=_0x3dd60e[_0x2afa14(0x1f4)]?.[_0x2afa14(0x20c)]()[_0x2afa14(0x112)](_0x50f617);break;}return _0x4142c1||_0x59e58a;});renderHistory(_0x100259,_0x4a160d,_0x1ce7a6);}function switchSection(_0xf1089f){const _0x313d02=_0x29f326;console[_0x313d02(0x230)]('[ADMIN]\x20switchSection()\x20called\x20for:',_0xf1089f),document[_0x313d02(0x24b)](_0x313d02(0xe6))[_0x313d02(0x1dc)](_0x31e514=>_0x31e514['classList'][_0x313d02(0x17c)](_0x313d02(0x165)));const _0x5b7e34=document[_0x313d02(0xdb)]('[data-section=\x22'+_0xf1089f+'\x22]');if(_0x5b7e34)_0x5b7e34['classList'][_0x313d02(0x152)](_0x313d02(0x165));const _0x840f20={'overview':_0x313d02(0x18b),'analytics':_0x313d02(0x1bb),'users':_0x313d02(0x238),'add-user':'Add\x20New\x20User','payments':_0x313d02(0x149),'search-history':_0x313d02(0x130),'watch-history':_0x313d02(0x213),'bookmarks':_0x313d02(0x1af)};if(DOM[_0x313d02(0xf4)])DOM[_0x313d02(0xf4)][_0x313d02(0x1e7)]=_0x840f20[_0xf1089f]||_0x313d02(0x145);document['querySelectorAll']('.section')[_0x313d02(0x1dc)](_0xeb2221=>_0xeb2221[_0x313d02(0x221)]['remove']('active'));const _0x152c23=document[_0x313d02(0x119)](_0xf1089f);if(_0x152c23)_0x152c23[_0x313d02(0x221)]['add']('active');switch(_0xf1089f){case _0x313d02(0x10f):loadAnalytics();break;case _0x313d02(0x1e5):loadUsers();break;case _0x313d02(0x129):loadPendingPayments();break;case _0x313d02(0x24c):loadSearchHistory();break;case _0x313d02(0x1dd):loadWatchHistory();break;case _0x313d02(0x22a):loadBookmarks();break;}}function showNotification(_0x36641e,_0xa11aba=_0x29f326(0x1bd)){const _0x53d2c7=_0x29f326;console[_0x53d2c7(0x230)]('[ADMIN]\x20Showing\x20notification:',_0xa11aba,'-',_0x36641e);const _0x56b208=document['getElementById'](_0x53d2c7(0x184));if(!_0x56b208)return;const _0xb24d51=document[_0x53d2c7(0x193)](_0x53d2c7(0x196));_0xb24d51[_0x53d2c7(0x14a)]=_0x53d2c7(0x224)+_0xa11aba,_0xb24d51[_0x53d2c7(0x1b2)]=_0x53d2c7(0xee)+(_0xa11aba===_0x53d2c7(0x1bd)?'fa-check-circle':_0xa11aba===_0x53d2c7(0x16f)?_0x53d2c7(0x1c0):'fa-exclamation-triangle')+_0x53d2c7(0x161)+_0x36641e+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22notification-close\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20',_0x56b208[_0x53d2c7(0x12d)](_0xb24d51),setTimeout(()=>_0xb24d51[_0x53d2c7(0x221)]['add'](_0x53d2c7(0x1d4)),0x64);const _0x102862=setTimeout(()=>{removeNotification(_0xb24d51);},0x1388);_0xb24d51[_0x53d2c7(0xdb)]('.notification-close')['addEventListener'](_0x53d2c7(0xe9),()=>{clearTimeout(_0x102862),removeNotification(_0xb24d51);});}function removeNotification(_0x5a88fe){_0x5a88fe['classList']['add']('fade-out'),setTimeout(()=>{const _0x5729db=_0x9c83;_0x5a88fe[_0x5729db(0x20d)]&&_0x5a88fe[_0x5729db(0x17c)]();},0x12c);}window[_0x29f326(0x203)]=openAllowModal,window['closeAllowModal']=closeAllowModal,window[_0x29f326(0x166)]=deleteUser,window['logoutUserSessions']=logoutUserSessions,window[_0x29f326(0xe7)]=viewUserDetails,window['approvePayment']=approvePayment,window['rejectPayment']=rejectPayment,console['log']('[ADMIN]\x20Enhanced\x20Admin\x20Portal\x20script\x20loaded\x20and\x20ready'),console[_0x29f326(0x230)](_0x29f326(0x20b));