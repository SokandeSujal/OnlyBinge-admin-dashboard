const _0x3f4d3f=_0x1c93;(function(_0x147085,_0x532f24){const _0x460712=_0x1c93,_0x18c6cb=_0x147085();while(!![]){try{const _0x443291=parseInt(_0x460712(0x25b))/0x1*(parseInt(_0x460712(0x1e1))/0x2)+parseInt(_0x460712(0x269))/0x3+parseInt(_0x460712(0x244))/0x4+parseInt(_0x460712(0x1f5))/0x5*(-parseInt(_0x460712(0x25d))/0x6)+-parseInt(_0x460712(0x2db))/0x7*(-parseInt(_0x460712(0x23a))/0x8)+-parseInt(_0x460712(0x2ea))/0x9+parseInt(_0x460712(0x27f))/0xa*(parseInt(_0x460712(0x2fc))/0xb);if(_0x443291===_0x532f24)break;else _0x18c6cb['push'](_0x18c6cb['shift']());}catch(_0x4c8df3){_0x18c6cb['push'](_0x18c6cb['shift']());}}}(_0x393f,0x4ef9d),console[_0x3f4d3f(0x197)](_0x3f4d3f(0x278)));const SUPABASE_URL='__SUPABASE_URL__',SUPABASE_ANON_KEY=_0x3f4d3f(0x208),SUPABASE_SERVICE_ROLE_KEY=_0x3f4d3f(0x1ca),supabase=window[_0x3f4d3f(0x2bd)][_0x3f4d3f(0x275)](SUPABASE_URL,SUPABASE_ANON_KEY),adminSupabase=window['supabase'][_0x3f4d3f(0x275)](SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY,{'auth':{'autoRefreshToken':![],'persistSession':![]}});let adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],currentFilter=_0x3f4d3f(0x1b7),allSearchHistory=[],allWatchHistory=[],allBookmarks=[],allContinueWatching=[],chartInstances={};console[_0x3f4d3f(0x197)](_0x3f4d3f(0x251));const DOM={};function cacheDOM(){const _0x2d3315=_0x3f4d3f;console[_0x2d3315(0x197)]('[ADMIN]\x20Caching\x20DOM\x20elements...'),DOM[_0x2d3315(0x217)]=document[_0x2d3315(0x226)](_0x2d3315(0x18b)),DOM[_0x2d3315(0x2a1)]=document['getElementById']('dashboard'),DOM['loginForm']=document[_0x2d3315(0x226)]('login-form'),DOM[_0x2d3315(0x1ef)]=document[_0x2d3315(0x226)]('login-error'),DOM[_0x2d3315(0x2e3)]=document['getElementById'](_0x2d3315(0x2eb)),DOM[_0x2d3315(0x1a8)]=document[_0x2d3315(0x226)](_0x2d3315(0x2c2)),DOM[_0x2d3315(0x2e5)]=document[_0x2d3315(0x226)](_0x2d3315(0x238)),DOM[_0x2d3315(0x2a6)]=document[_0x2d3315(0x226)](_0x2d3315(0x286)),DOM[_0x2d3315(0x1c4)]=document[_0x2d3315(0x226)](_0x2d3315(0x29c)),DOM['watchList']=document['getElementById']('watch-list'),DOM['bookmarkList']=document[_0x2d3315(0x226)](_0x2d3315(0x1fd)),DOM[_0x2d3315(0x267)]=document[_0x2d3315(0x226)](_0x2d3315(0x28b)),DOM[_0x2d3315(0x19c)]=document['getElementById'](_0x2d3315(0x298)),DOM[_0x2d3315(0x274)]=document['getElementById'](_0x2d3315(0x1b1)),DOM[_0x2d3315(0x24e)]=document[_0x2d3315(0x226)](_0x2d3315(0x24e)),DOM[_0x2d3315(0x1ff)]=document['getElementById']('sidebar-overlay'),DOM[_0x2d3315(0x18f)]=document[_0x2d3315(0x226)]('hamburger-btn'),console[_0x2d3315(0x197)]('[ADMIN]\x20DOM\x20elements\x20cached');}document[_0x3f4d3f(0x1a9)]('DOMContentLoaded',()=>{const _0x438198=_0x3f4d3f;console[_0x438198(0x197)](_0x438198(0x266)),initApp();});async function initApp(){const _0x10751c=_0x3f4d3f;console['log'](_0x10751c(0x1b0));try{cacheDOM(),setupEventListeners(),setupMobileNavigation(),updateCurrentDate(),await checkAuth(),console[_0x10751c(0x197)](_0x10751c(0x262));}catch(_0x51f9e5){console[_0x10751c(0x2cd)]('[ADMIN]\x20Initialization\x20error:',_0x51f9e5),showNotification('Failed\x20to\x20initialize\x20application',_0x10751c(0x2cd));}finally{hideLoadingScreen();}}function hideLoadingScreen(){const _0x5e0700=_0x3f4d3f;console['log'](_0x5e0700(0x231)),DOM[_0x5e0700(0x1a8)]&&(DOM[_0x5e0700(0x1a8)][_0x5e0700(0x19a)][_0x5e0700(0x2f7)]('fade-out'),setTimeout(()=>{const _0x344f97=_0x5e0700;DOM[_0x344f97(0x1a8)]['style']['display']=_0x344f97(0x2f1);},0x1f4));}function setupMobileNavigation(){const _0x50276b=_0x3f4d3f;DOM[_0x50276b(0x18f)]&&DOM[_0x50276b(0x18f)]['addEventListener'](_0x50276b(0x2d9),toggleMobileSidebar),DOM[_0x50276b(0x1ff)]&&DOM[_0x50276b(0x1ff)][_0x50276b(0x1a9)](_0x50276b(0x2d9),closeMobileSidebar),document[_0x50276b(0x296)](_0x50276b(0x219))[_0x50276b(0x234)](_0x3489ef=>{const _0x46ac1b=_0x50276b;_0x3489ef[_0x46ac1b(0x1a9)](_0x46ac1b(0x2d9),()=>{const _0x2f4acd=_0x46ac1b;window[_0x2f4acd(0x28c)]<=0x300&&closeMobileSidebar();});});}function toggleMobileSidebar(){const _0x569e34=_0x3f4d3f;DOM['sidebar']?.['classList'][_0x569e34(0x26a)](_0x569e34(0x2d8)),DOM[_0x569e34(0x1ff)]?.['classList'][_0x569e34(0x26a)]('active');}function closeMobileSidebar(){const _0x124fa6=_0x3f4d3f;DOM[_0x124fa6(0x24e)]?.['classList'][_0x124fa6(0x1e4)](_0x124fa6(0x2d8)),DOM['sidebarOverlay']?.[_0x124fa6(0x19a)][_0x124fa6(0x1e4)](_0x124fa6(0x2d8));}function setupEventListeners(){const _0x51a130=_0x3f4d3f;console['log']('[ADMIN]\x20Setting\x20up\x20event\x20listeners...'),DOM['loginForm']?.[_0x51a130(0x1a9)](_0x51a130(0x1cd),handleLogin),DOM[_0x51a130(0x2e3)]?.[_0x51a130(0x1a9)](_0x51a130(0x2d9),handleLogout),document[_0x51a130(0x296)](_0x51a130(0x2c4))[_0x51a130(0x234)](_0x50626b=>{const _0x5e6333=_0x51a130;_0x50626b[_0x5e6333(0x1a9)](_0x5e6333(0x2d9),_0x385502=>{const _0x6c7179=_0x5e6333;_0x385502[_0x6c7179(0x1af)](),switchSection(_0x50626b['dataset']['section']);});}),DOM[_0x51a130(0x2e5)]?.[_0x51a130(0x1a9)](_0x51a130(0x1cd),handleAddUser),document[_0x51a130(0x226)](_0x51a130(0x1b6))?.[_0x51a130(0x1a9)]('submit',handleAllowUser),document[_0x51a130(0x296)]('.filter-btn')[_0x51a130(0x234)](_0x1f8776=>{const _0xa9e5de=_0x51a130;_0x1f8776[_0xa9e5de(0x1a9)]('click',()=>{const _0x2c374b=_0xa9e5de;document[_0x2c374b(0x296)](_0x2c374b(0x261))[_0x2c374b(0x234)](_0x15df70=>_0x15df70[_0x2c374b(0x19a)][_0x2c374b(0x1e4)](_0x2c374b(0x2d8))),_0x1f8776[_0x2c374b(0x19a)]['add'](_0x2c374b(0x2d8)),currentFilter=_0x1f8776['dataset'][_0x2c374b(0x1c7)],filterUsers();});}),document[_0x51a130(0x226)]('user-search')?.[_0x51a130(0x1a9)](_0x51a130(0x2ed),_0x5a1943=>{const _0x1f0d50=_0x51a130;filterUsersBySearch(_0x5a1943[_0x1f0d50(0x249)][_0x1f0d50(0x24d)]);}),document[_0x51a130(0x226)]('search-filter')?.[_0x51a130(0x1a9)]('input',_0x256ed7=>{const _0x8af04a=_0x51a130;filterHistory('search',_0x256ed7[_0x8af04a(0x249)][_0x8af04a(0x24d)]);}),document[_0x51a130(0x226)](_0x51a130(0x1d1))?.[_0x51a130(0x1a9)](_0x51a130(0x2ed),_0x52cf45=>{const _0x59bfe7=_0x51a130;filterHistory('watch',_0x52cf45[_0x59bfe7(0x249)][_0x59bfe7(0x24d)]);}),document[_0x51a130(0x226)](_0x51a130(0x2ca))?.[_0x51a130(0x1a9)](_0x51a130(0x2ed),_0x4ec32d=>{const _0x8c39df=_0x51a130;filterHistory(_0x8c39df(0x1fc),_0x4ec32d[_0x8c39df(0x249)][_0x8c39df(0x24d)]);}),document[_0x51a130(0x226)]('analytics-period')?.[_0x51a130(0x1a9)]('change',_0x4155a8=>{loadAnalytics();}),document[_0x51a130(0x226)](_0x51a130(0x285))?.['addEventListener'](_0x51a130(0x2d9),()=>{const _0x4c4b70=_0x51a130;document[_0x4c4b70(0x226)]('user-detail-modal')[_0x4c4b70(0x19a)][_0x4c4b70(0x2f7)](_0x4c4b70(0x191));}),console[_0x51a130(0x197)](_0x51a130(0x1ea));}function updateCurrentDate(){const _0x4c9358=_0x3f4d3f;if(DOM[_0x4c9358(0x19c)]){const _0x3e9c5c=new Date();DOM['currentDate'][_0x4c9358(0x258)]=_0x3e9c5c[_0x4c9358(0x2fb)](_0x4c9358(0x2f2),{'weekday':_0x4c9358(0x2fd),'year':_0x4c9358(0x23d),'month':_0x4c9358(0x2fd),'day':_0x4c9358(0x23d)});}}function formatRelativeTime(_0x41d9c1){const _0x4481e8=_0x3f4d3f,_0x1e401e=new Date(_0x41d9c1),_0x561d3b=new Date(),_0x325867=_0x561d3b-_0x1e401e,_0x32cd36=Math[_0x4481e8(0x1bf)](_0x325867/0xea60),_0x1973a2=Math[_0x4481e8(0x1bf)](_0x325867/0x36ee80),_0x13ee1b=Math[_0x4481e8(0x1bf)](_0x325867/0x5265c00);if(_0x32cd36<0x1)return'Just\x20now';if(_0x32cd36<0x3c)return _0x32cd36+_0x4481e8(0x18c)+(_0x32cd36>0x1?'s':'')+_0x4481e8(0x212);if(_0x1973a2<0x18)return _0x1973a2+'\x20hour'+(_0x1973a2>0x1?'s':'')+_0x4481e8(0x212);return _0x13ee1b+'\x20day'+(_0x13ee1b>0x1?'s':'')+'\x20ago';}function formatDuration(_0x398718){const _0x1e3a61=_0x3f4d3f;if(!_0x398718||_0x398718<0x0)return'0m';const _0x59cbfc=Math[_0x1e3a61(0x1bf)](_0x398718/0xe10),_0x1c2660=Math['floor'](_0x398718%0xe10/0x3c);if(_0x59cbfc>0x0)return _0x59cbfc+'h\x20'+_0x1c2660+'m';return _0x1c2660+'m';}async function checkAuth(){const _0x3b32d3=_0x3f4d3f;console[_0x3b32d3(0x197)](_0x3b32d3(0x29e));try{const {data:_0x50bd1a,error:_0x34c557}=await supabase['auth'][_0x3b32d3(0x18a)]();if(_0x34c557||!_0x50bd1a?.['user']){showLoginModal();return;}adminUser=_0x50bd1a[_0x3b32d3(0x294)],console[_0x3b32d3(0x197)](_0x3b32d3(0x2a4),adminUser['email']),await initDashboard();}catch(_0x1d5b13){console[_0x3b32d3(0x2cd)](_0x3b32d3(0x213),_0x1d5b13),showLoginModal();}}function showLoginModal(){const _0x1d3394=_0x3f4d3f;if(DOM[_0x1d3394(0x217)])DOM[_0x1d3394(0x217)]['classList'][_0x1d3394(0x1e4)](_0x1d3394(0x191));if(DOM[_0x1d3394(0x2a1)])DOM[_0x1d3394(0x2a1)][_0x1d3394(0x19a)][_0x1d3394(0x2f7)]('hidden');}async function handleLogin(_0x537b8f){const _0x2b06d2=_0x3f4d3f;_0x537b8f[_0x2b06d2(0x1af)]();const _0x3ff997=document['getElementById'](_0x2b06d2(0x186))?.[_0x2b06d2(0x24d)],_0x58f006=document[_0x2b06d2(0x226)](_0x2b06d2(0x295))?.[_0x2b06d2(0x24d)],_0x55f8b2=DOM['loginForm'][_0x2b06d2(0x28e)](_0x2b06d2(0x270));if(!_0x3ff997||!_0x58f006){showError(_0x2b06d2(0x1a7));return;}_0x55f8b2[_0x2b06d2(0x1a3)]=!![],_0x55f8b2[_0x2b06d2(0x1f6)]=_0x2b06d2(0x25e);try{const {data:_0x5d15e3,error:_0x1c1235}=await supabase[_0x2b06d2(0x1df)][_0x2b06d2(0x199)]({'email':_0x3ff997,'password':_0x58f006});if(_0x1c1235)throw _0x1c1235;adminUser=_0x5d15e3[_0x2b06d2(0x294)],hideError();if(DOM[_0x2b06d2(0x217)])DOM[_0x2b06d2(0x217)][_0x2b06d2(0x19a)]['add'](_0x2b06d2(0x191));if(DOM['dashboard'])DOM[_0x2b06d2(0x2a1)][_0x2b06d2(0x19a)]['remove'](_0x2b06d2(0x191));await initDashboard(),showNotification('Welcome\x20back,\x20Admin!',_0x2b06d2(0x1ac));}catch(_0x5b8173){console['error']('[ADMIN]\x20Login\x20error:',_0x5b8173),showError(_0x5b8173[_0x2b06d2(0x192)]||_0x2b06d2(0x2ba));}finally{_0x55f8b2[_0x2b06d2(0x1a3)]=![],_0x55f8b2['innerHTML']=_0x2b06d2(0x291);}}async function handleLogout(){const _0x3844a0=_0x3f4d3f;try{await supabase[_0x3844a0(0x1df)][_0x3844a0(0x1c9)](),adminUser=null,allAuthUsers=[],userMap={'emailToId':new Map(),'idToEmail':new Map()},allowedUserMap=new Map(),allUsers=[],allSearchHistory=[],allWatchHistory=[],allBookmarks=[],Object[_0x3844a0(0x207)](chartInstances)[_0x3844a0(0x234)](_0x2112bf=>_0x2112bf['destroy']()),chartInstances={},showLoginModal(),showNotification(_0x3844a0(0x185),_0x3844a0(0x1ac));}catch(_0x177c54){console[_0x3844a0(0x2cd)](_0x3844a0(0x2bb),_0x177c54),showNotification(_0x3844a0(0x187),'error');}}function showError(_0x235c92){const _0x4e34eb=_0x3f4d3f;DOM[_0x4e34eb(0x1ef)]&&(DOM[_0x4e34eb(0x1ef)][_0x4e34eb(0x258)]=_0x235c92,DOM['loginError']['classList'][_0x4e34eb(0x1e4)](_0x4e34eb(0x191)));}function hideError(){const _0x16e9d5=_0x3f4d3f;DOM['loginError']&&DOM[_0x16e9d5(0x1ef)][_0x16e9d5(0x19a)][_0x16e9d5(0x2f7)](_0x16e9d5(0x191));}async function initDashboard(){const _0x4cac4b=_0x3f4d3f;console['log'](_0x4cac4b(0x1ee));try{DOM[_0x4cac4b(0x274)]&&adminUser&&(DOM[_0x4cac4b(0x274)][_0x4cac4b(0x258)]=adminUser[_0x4cac4b(0x256)]),await loadUserMap(),await loadAllowedUsers(),await Promise['all']([loadStats(),loadExpiringUsers(),loadRecentActivity()]),switchSection(_0x4cac4b(0x2ce)),console[_0x4cac4b(0x197)](_0x4cac4b(0x1fa));}catch(_0x8ac6a9){console[_0x4cac4b(0x2cd)](_0x4cac4b(0x1a1),_0x8ac6a9),showNotification(_0x4cac4b(0x2c8),_0x4cac4b(0x2cd));}}async function loadUserMap(){const _0x11ffc5=_0x3f4d3f;try{const {data:_0x1f728f,error:_0x56dc19}=await adminSupabase[_0x11ffc5(0x1df)][_0x11ffc5(0x246)]['listUsers']();if(_0x56dc19)throw _0x56dc19;allAuthUsers=_0x1f728f?.[_0x11ffc5(0x1b9)]||[],userMap[_0x11ffc5(0x2e1)]['clear'](),userMap[_0x11ffc5(0x2bf)][_0x11ffc5(0x1c0)](),allAuthUsers['forEach'](_0x1a1bfe=>{const _0x4f702d=_0x11ffc5;_0x1a1bfe['email']&&_0x1a1bfe['id']&&(userMap[_0x4f702d(0x2e1)][_0x4f702d(0x1f9)](_0x1a1bfe[_0x4f702d(0x256)],_0x1a1bfe['id']),userMap[_0x4f702d(0x2bf)]['set'](_0x1a1bfe['id'],_0x1a1bfe[_0x4f702d(0x256)]));}),console[_0x11ffc5(0x197)](_0x11ffc5(0x1b5),allAuthUsers[_0x11ffc5(0x292)],'users');}catch(_0x3338dd){console[_0x11ffc5(0x2cd)]('[ADMIN]\x20Error\x20loading\x20user\x20map:',_0x3338dd),showNotification(_0x11ffc5(0x1de),'warning');}}async function loadAllowedUsers(){const _0x278eba=_0x3f4d3f;try{const {data:_0x39e229,error:_0x168712}=await supabase['from'](_0x278eba(0x268))[_0x278eba(0x254)]('*');if(_0x168712)throw _0x168712;allowedUserMap[_0x278eba(0x1c0)](),_0x39e229[_0x278eba(0x234)](_0x23a4a1=>{const _0x47b154=_0x278eba;if(_0x23a4a1[_0x47b154(0x256)])allowedUserMap[_0x47b154(0x1f9)](_0x23a4a1['email'],_0x23a4a1);}),console['log'](_0x278eba(0x277),allowedUserMap[_0x278eba(0x19d)]);}catch(_0x2024ad){console[_0x278eba(0x2cd)](_0x278eba(0x2b9),_0x2024ad);}}async function loadStats(){const _0x11d49c=_0x3f4d3f;try{const _0x53b840=allAuthUsers['length'],_0x2c5c19=allowedUserMap[_0x11d49c(0x19d)],_0x2e62a3=_0x53b840-_0x2c5c19,_0x23c950=new Date(),_0x27391f=Array[_0x11d49c(0x2ee)](allowedUserMap[_0x11d49c(0x207)]())['filter'](_0x76e976=>{const _0x21c351=_0x11d49c;if(!_0x76e976['approved'])return![];if(!_0x76e976[_0x21c351(0x28f)])return!![];return new Date(_0x76e976[_0x21c351(0x28f)])>_0x23c950;})['length'],_0x52160b=Array[_0x11d49c(0x2ee)](allowedUserMap[_0x11d49c(0x207)]())[_0x11d49c(0x1c7)](_0xe0cd0b=>{const _0x18e907=_0x11d49c;if(!_0xe0cd0b[_0x18e907(0x215)])return![];if(!_0xe0cd0b[_0x18e907(0x28f)])return![];return new Date(_0xe0cd0b[_0x18e907(0x28f)])<=_0x23c950;})['length'],{data:_0x1df217}=await supabase[_0x11d49c(0x2ee)](_0x11d49c(0x2d7))[_0x11d49c(0x254)]('*')['eq'](_0x11d49c(0x1ed),_0x11d49c(0x21d)),_0x2a8bcd=_0x1df217?.[_0x11d49c(0x292)]||0x0;document[_0x11d49c(0x226)](_0x11d49c(0x18e))[_0x11d49c(0x258)]=_0x53b840,document[_0x11d49c(0x226)](_0x11d49c(0x283))[_0x11d49c(0x258)]=_0x27391f,document[_0x11d49c(0x226)](_0x11d49c(0x2de))[_0x11d49c(0x258)]=_0x2e62a3,document[_0x11d49c(0x226)](_0x11d49c(0x255))[_0x11d49c(0x258)]=_0x2a8bcd,document['getElementById']('expired-subs')['textContent']=_0x52160b,console[_0x11d49c(0x197)](_0x11d49c(0x214));}catch(_0x5cd07c){console[_0x11d49c(0x2cd)](_0x11d49c(0x2e4),_0x5cd07c);}}async function loadExpiringUsers(){const _0x11d0d0=_0x3f4d3f;try{const _0x49327b=document[_0x11d0d0(0x226)]('expiring-list');if(!_0x49327b)return;const _0x5a15a3=new Date(),_0x48a83f=new Date(_0x5a15a3[_0x11d0d0(0x188)]()+0x7*0x18*0x3c*0x3c*0x3e8),_0x2938f7=Array['from'](allowedUserMap[_0x11d0d0(0x207)]())[_0x11d0d0(0x1c7)](_0x10202c=>{const _0x4b49c2=_0x11d0d0;if(!_0x10202c['approved']||!_0x10202c[_0x4b49c2(0x28f)])return![];const _0x9869b6=new Date(_0x10202c['expiry_date']);return _0x9869b6>_0x5a15a3&&_0x9869b6<=_0x48a83f;})[_0x11d0d0(0x19e)]((_0x1e3fa0,_0xda0c95)=>new Date(_0x1e3fa0[_0x11d0d0(0x28f)])-new Date(_0xda0c95[_0x11d0d0(0x28f)]));if(_0x2938f7[_0x11d0d0(0x292)]===0x0){_0x49327b[_0x11d0d0(0x1f6)]=_0x11d0d0(0x25c);return;}_0x49327b[_0x11d0d0(0x1f6)]=_0x2938f7[_0x11d0d0(0x1d5)](_0x14affa=>{const _0x5601a4=_0x11d0d0,_0x68ec53=new Date(_0x14affa[_0x5601a4(0x28f)]),_0x5b191e=Math[_0x5601a4(0x2a9)]((_0x68ec53-_0x5a15a3)/(0x3e8*0x3c*0x3c*0x18));return _0x5601a4(0x282)+_0x14affa[_0x5601a4(0x256)]+_0x5601a4(0x2af)+_0x5b191e+_0x5601a4(0x2f3)+(_0x5b191e!==0x1?'s':'')+_0x5601a4(0x2a3);})['join'](''),console[_0x11d0d0(0x197)]('[ADMIN]\x20Expiring\x20users\x20loaded:',_0x2938f7['length']);}catch(_0x28c56d){console['error'](_0x11d0d0(0x253),_0x28c56d);}}async function loadRecentActivity(){const _0x3b6c10=_0x3f4d3f;try{const _0x306dee=document['getElementById'](_0x3b6c10(0x2d6));if(!_0x306dee)return;const _0xefc6dc=[],{data:_0x3b8e73}=await supabase['from'](_0x3b6c10(0x2d7))[_0x3b6c10(0x254)]('*')[_0x3b6c10(0x1be)](_0x3b6c10(0x205),{'ascending':![]})[_0x3b6c10(0x257)](0x5);_0x3b8e73&&_0x3b8e73['forEach'](_0x4a89a6=>{const _0x50d9a6=_0x3b6c10;_0xefc6dc[_0x50d9a6(0x263)]({'title':'New\x20payment\x20from\x20'+_0x4a89a6[_0x50d9a6(0x1d7)],'timestamp':new Date(_0x4a89a6[_0x50d9a6(0x205)]),'time':formatRelativeTime(_0x4a89a6[_0x50d9a6(0x205)]),'type':'warning'});});const {data:_0x2aac71}=await supabase[_0x3b6c10(0x2ee)](_0x3b6c10(0x268))['select']('*')[_0x3b6c10(0x1be)](_0x3b6c10(0x205),{'ascending':![]})[_0x3b6c10(0x257)](0x3)['eq'](_0x3b6c10(0x215),!![]);_0x2aac71&&_0x2aac71['forEach'](_0x562a76=>{const _0x18399b=_0x3b6c10;_0xefc6dc['push']({'title':'User\x20'+_0x562a76[_0x18399b(0x256)]+_0x18399b(0x20f),'timestamp':new Date(_0x562a76[_0x18399b(0x205)]),'time':formatRelativeTime(_0x562a76['created_at']),'type':'success'});});_0xefc6dc[_0x3b6c10(0x19e)]((_0x121d07,_0xbeaa5f)=>_0xbeaa5f['timestamp']-_0x121d07[_0x3b6c10(0x2b4)]);if(_0xefc6dc[_0x3b6c10(0x292)]===0x0){_0x306dee[_0x3b6c10(0x1f6)]=_0x3b6c10(0x2c6);return;}_0x306dee['innerHTML']=_0xefc6dc[_0x3b6c10(0x1d5)](_0x3dabdf=>_0x3b6c10(0x2ac)+_0x3dabdf[_0x3b6c10(0x242)]+_0x3b6c10(0x26f)+_0x3dabdf['title']+_0x3b6c10(0x2b8)+_0x3dabdf['time']+_0x3b6c10(0x1ad))[_0x3b6c10(0x1a2)]('');}catch(_0x15cd91){console[_0x3b6c10(0x2cd)](_0x3b6c10(0x24b),_0x15cd91);}}async function loadAnalytics(){const _0x4e2d49=_0x3f4d3f;console[_0x4e2d49(0x197)](_0x4e2d49(0x1cc));try{const _0x56941b=document[_0x4e2d49(0x226)](_0x4e2d49(0x1e0))?.['value']||'30';let _0x4e3522=null;_0x56941b!=='all'&&(_0x4e3522=new Date(),_0x4e3522[_0x4e2d49(0x2dd)](_0x4e3522[_0x4e2d49(0x233)]()-parseInt(_0x56941b))),await Promise['all']([loadAnalyticsStats(_0x4e3522),loadMostWatchedChart(_0x4e3522),loadPopularSearchesChart(_0x4e3522),loadContentTypeChart(_0x4e3522),loadEngagementChart(_0x4e3522),loadTopWatchedList(_0x4e3522),loadTopBookmarkedList(_0x4e3522)]),console[_0x4e2d49(0x197)](_0x4e2d49(0x216));}catch(_0x1e3501){console[_0x4e2d49(0x2cd)](_0x4e2d49(0x1e6),_0x1e3501),showNotification(_0x4e2d49(0x2f0),_0x4e2d49(0x2cd));}}async function loadAnalyticsStats(_0x37f9a6){const _0x3be519=_0x3f4d3f;try{let _0x2a23b8=supabase[_0x3be519(0x2ee)](_0x3be519(0x1db))[_0x3be519(0x254)]('duration'),_0x39ba55=supabase[_0x3be519(0x2ee)](_0x3be519(0x18d))[_0x3be519(0x254)]('*',{'count':_0x3be519(0x2f9),'head':!![]}),_0x2d40c2=supabase['from'](_0x3be519(0x21e))['select']('*',{'count':'exact','head':!![]}),_0x59ee16=supabase[_0x3be519(0x2ee)](_0x3be519(0x2c3))[_0x3be519(0x254)](_0x3be519(0x299));if(_0x37f9a6){const _0x1da9dc=_0x37f9a6[_0x3be519(0x21a)]();_0x2a23b8=_0x2a23b8['gte'](_0x3be519(0x279),_0x1da9dc),_0x39ba55=_0x39ba55[_0x3be519(0x2ef)](_0x3be519(0x1d6),_0x1da9dc),_0x2d40c2=_0x2d40c2['gte'](_0x3be519(0x26d),_0x1da9dc);}const [{data:_0x3166c9},{count:_0x659af9},{count:_0x2c7693},{data:_0x3baf84}]=await Promise[_0x3be519(0x1b7)]([_0x2a23b8,_0x39ba55,_0x2d40c2,_0x59ee16]),_0x28f866=_0x3166c9?.[_0x3be519(0x1fb)]((_0x5b93c3,_0x5cd0d2)=>_0x5b93c3+(_0x5cd0d2[_0x3be519(0x2c0)]||0x0),0x0)||0x0,_0x46728a=Math[_0x3be519(0x2aa)](_0x28f866/0xe10);let _0x4e9623=0x0;if(_0x3baf84&&_0x3baf84[_0x3be519(0x292)]>0x0){const _0x42379f=_0x3baf84[_0x3be519(0x1c7)](_0x838bd=>_0x838bd['completed'])[_0x3be519(0x292)];_0x4e9623=Math[_0x3be519(0x2aa)](_0x42379f/_0x3baf84[_0x3be519(0x292)]*0x64);}document[_0x3be519(0x226)]('total-watch-time')[_0x3be519(0x258)]=_0x46728a+_0x3be519(0x243),document['getElementById'](_0x3be519(0x2a8))[_0x3be519(0x258)]=_0x659af9||0x0,document[_0x3be519(0x226)](_0x3be519(0x2da))['textContent']=_0x2c7693||0x0,document[_0x3be519(0x226)](_0x3be519(0x230))[_0x3be519(0x258)]=_0x4e9623+'%';}catch(_0x4348a2){console[_0x3be519(0x2cd)]('[ADMIN]\x20Error\x20loading\x20analytics\x20stats:',_0x4348a2);}}function destroyChart(_0x23039a){const _0x464662=_0x3f4d3f;chartInstances[_0x23039a]&&(chartInstances[_0x23039a][_0x464662(0x21b)](),delete chartInstances[_0x23039a]);}function createBarChart(_0x45123e,_0x348aa1,_0x57d5aa,_0x424cf1){const _0x316777=_0x3f4d3f,_0x4efd1e=document[_0x316777(0x226)](_0x45123e);if(!_0x4efd1e)return;destroyChart(_0x45123e);const _0x4dc7f4=_0x4efd1e['getContext']('2d');chartInstances[_0x45123e]=new Chart(_0x4dc7f4,{'type':'bar','data':{'labels':_0x348aa1,'datasets':[{'label':_0x424cf1,'data':_0x57d5aa,'backgroundColor':'rgba(229,\x209,\x2020,\x200.6)','borderColor':_0x316777(0x1cf),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'display':![]}},'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0x316777(0x1e5)},'grid':{'color':_0x316777(0x235)}},'x':{'ticks':{'color':_0x316777(0x1e5)},'grid':{'color':_0x316777(0x235)}}}}});}function createPieChart(_0x1b2cb2,_0x55d62d,_0x98955){const _0x32ce7c=_0x3f4d3f,_0x37d0a1=document[_0x32ce7c(0x226)](_0x1b2cb2);if(!_0x37d0a1)return;destroyChart(_0x1b2cb2);const _0x252f30=_0x37d0a1[_0x32ce7c(0x209)]('2d');chartInstances[_0x1b2cb2]=new Chart(_0x252f30,{'type':'pie','data':{'labels':_0x55d62d,'datasets':[{'data':_0x98955,'backgroundColor':['rgba(229,\x209,\x2020,\x200.8)','rgba(59,\x20130,\x20246,\x200.8)'],'borderColor':[_0x32ce7c(0x1cf),'rgba(59,\x20130,\x20246,\x201)'],'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'position':_0x32ce7c(0x2f8),'labels':{'color':_0x32ce7c(0x1e5)}}}}});}function createLineChart(_0x378cba,_0x1b8f95,_0x2c87d4){const _0xcf1488=_0x3f4d3f,_0x4d4dec=document[_0xcf1488(0x226)](_0x378cba);if(!_0x4d4dec)return;destroyChart(_0x378cba);const _0x49f4ac=_0x4d4dec[_0xcf1488(0x209)]('2d');chartInstances[_0x378cba]=new Chart(_0x49f4ac,{'type':_0xcf1488(0x265),'data':{'labels':_0x1b8f95,'datasets':_0x2c87d4},'options':{'responsive':!![],'maintainAspectRatio':!![],'plugins':{'legend':{'labels':{'color':_0xcf1488(0x1e5)}}},'scales':{'y':{'beginAtZero':!![],'ticks':{'color':_0xcf1488(0x1e5)},'grid':{'color':_0xcf1488(0x235)}},'x':{'ticks':{'color':_0xcf1488(0x1e5)},'grid':{'color':'rgba(255,\x20255,\x20255,\x200.1)'}}}}});}async function loadMostWatchedChart(_0x384afd){const _0x364220=_0x3f4d3f;try{let _0x379091=supabase[_0x364220(0x2ee)](_0x364220(0x1db))[_0x364220(0x254)](_0x364220(0x1e3));_0x384afd&&(_0x379091=_0x379091['gte']('watched_at',_0x384afd[_0x364220(0x21a)]()));const {data:_0x104fc0}=await _0x379091[_0x364220(0x257)](0x3e8);if(!_0x104fc0||_0x104fc0[_0x364220(0x292)]===0x0){destroyChart(_0x364220(0x2a7));return;}const _0x608124={};_0x104fc0[_0x364220(0x234)](_0x3b42f2=>{const _0x278ea5=_0x3b42f2['title'];_0x608124[_0x278ea5]=(_0x608124[_0x278ea5]||0x0)+0x1;});const _0x544f05=Object[_0x364220(0x1e2)](_0x608124)[_0x364220(0x19e)]((_0x48a001,_0xfb9aa5)=>_0xfb9aa5[0x1]-_0x48a001[0x1])['slice'](0x0,0xa),_0x43d62f=_0x544f05[_0x364220(0x1d5)](([_0x127c6c])=>_0x127c6c[_0x364220(0x292)]>0x14?_0x127c6c[_0x364220(0x1f1)](0x0,0x14)+_0x364220(0x2fe):_0x127c6c),_0x586e87=_0x544f05['map'](([,_0x49a019])=>_0x49a019);createBarChart(_0x364220(0x2a7),_0x43d62f,_0x586e87,_0x364220(0x23c));}catch(_0x576820){console[_0x364220(0x2cd)]('[ADMIN]\x20Error\x20loading\x20most\x20watched\x20chart:',_0x576820);}}async function loadPopularSearchesChart(_0x329e20){const _0x305597=_0x3f4d3f;try{let _0x18a67e=supabase['from'](_0x305597(0x18d))[_0x305597(0x254)](_0x305597(0x2b6));_0x329e20&&(_0x18a67e=_0x18a67e[_0x305597(0x2ef)](_0x305597(0x1d6),_0x329e20[_0x305597(0x21a)]()));const {data:_0x2c64dd}=await _0x18a67e[_0x305597(0x257)](0x3e8);if(!_0x2c64dd||_0x2c64dd[_0x305597(0x292)]===0x0){destroyChart('popularSearchesChart');return;}const _0x35caf1={};_0x2c64dd[_0x305597(0x234)](_0x241a54=>{const _0x4bc2cf=_0x305597,_0x99e516=_0x241a54['query'][_0x4bc2cf(0x2cb)]();_0x35caf1[_0x99e516]=(_0x35caf1[_0x99e516]||0x0)+0x1;});const _0x1d19ea=Object['entries'](_0x35caf1)[_0x305597(0x19e)]((_0x36de3d,_0x551aca)=>_0x551aca[0x1]-_0x36de3d[0x1])[_0x305597(0x2bc)](0x0,0xa),_0x298e16=_0x1d19ea['map'](([_0x5318fa])=>_0x5318fa[_0x305597(0x292)]>0xf?_0x5318fa['substring'](0x0,0xf)+_0x305597(0x2fe):_0x5318fa),_0x4dda17=_0x1d19ea[_0x305597(0x1d5)](([,_0xc3a1a1])=>_0xc3a1a1);createBarChart('popularSearchesChart',_0x298e16,_0x4dda17,'Searches');}catch(_0x162cf4){console['error'](_0x305597(0x248),_0x162cf4);}}async function loadContentTypeChart(_0x8dd08){const _0x8f9a97=_0x3f4d3f;try{let _0x9e31c9=supabase[_0x8f9a97(0x2ee)](_0x8f9a97(0x1db))['select']('media_type');_0x8dd08&&(_0x9e31c9=_0x9e31c9[_0x8f9a97(0x2ef)]('watched_at',_0x8dd08[_0x8f9a97(0x21a)]()));const {data:_0x57ef90}=await _0x9e31c9;if(!_0x57ef90||_0x57ef90[_0x8f9a97(0x292)]===0x0){destroyChart(_0x8f9a97(0x1d3));return;}const _0x2b7051=_0x57ef90[_0x8f9a97(0x1c7)](_0x4dda82=>_0x4dda82[_0x8f9a97(0x193)]==='movie')[_0x8f9a97(0x292)],_0x1a2166=_0x57ef90['filter'](_0x2707eb=>_0x2707eb[_0x8f9a97(0x193)]==='tv')[_0x8f9a97(0x292)];createPieChart(_0x8f9a97(0x1d3),['Movies',_0x8f9a97(0x1e7)],[_0x2b7051,_0x1a2166]);}catch(_0x5043de){console['error'](_0x8f9a97(0x227),_0x5043de);}}async function loadEngagementChart(_0xdf3ebf){const _0x32f229=_0x3f4d3f;try{const _0x423759=_0xdf3ebf?Math[_0x32f229(0x2a9)]((new Date()-_0xdf3ebf)/(0x3e8*0x3c*0x3c*0x18)):0x1e,_0xd83c39=[],_0x3e2c96=[],_0x48bba9=[];for(let _0x1e3e17=_0x423759-0x1;_0x1e3e17>=0x0;_0x1e3e17--){const _0x4f85dd=new Date();_0x4f85dd[_0x32f229(0x2dd)](_0x4f85dd[_0x32f229(0x233)]()-_0x1e3e17),_0x4f85dd['setHours'](0x0,0x0,0x0,0x0);const _0x10d1c5=new Date(_0x4f85dd);_0x10d1c5[_0x32f229(0x2dd)](_0x10d1c5[_0x32f229(0x233)]()+0x1);const _0x20e455=_0x4f85dd[_0x32f229(0x2fb)](_0x32f229(0x2f2),{'month':_0x32f229(0x229),'day':_0x32f229(0x23d)});_0xd83c39[_0x32f229(0x263)](_0x20e455);const [{count:_0x2eebc4},{count:_0x78650}]=await Promise['all']([supabase[_0x32f229(0x2ee)](_0x32f229(0x1db))[_0x32f229(0x254)]('*',{'count':_0x32f229(0x2f9),'head':!![]})[_0x32f229(0x2ef)](_0x32f229(0x279),_0x4f85dd['toISOString']())['lt'](_0x32f229(0x279),_0x10d1c5[_0x32f229(0x21a)]()),supabase['from']('user_search_history')[_0x32f229(0x254)]('*',{'count':'exact','head':!![]})['gte'](_0x32f229(0x1d6),_0x4f85dd[_0x32f229(0x21a)]())['lt']('searched_at',_0x10d1c5[_0x32f229(0x21a)]())]);_0x3e2c96[_0x32f229(0x263)](_0x2eebc4||0x0),_0x48bba9[_0x32f229(0x263)](_0x78650||0x0);}createLineChart(_0x32f229(0x1c6),_0xd83c39,[{'label':_0x32f229(0x23c),'data':_0x3e2c96,'borderColor':_0x32f229(0x1f0),'backgroundColor':_0x32f229(0x201)},{'label':'Searches','data':_0x48bba9,'borderColor':_0x32f229(0x24f),'backgroundColor':_0x32f229(0x198)}]);}catch(_0x860f47){console[_0x32f229(0x2cd)]('[ADMIN]\x20Error\x20loading\x20engagement\x20chart:',_0x860f47);}}async function loadTopWatchedList(_0x296cbf){const _0x57482d=_0x3f4d3f;try{let _0x110d9f=supabase['from'](_0x57482d(0x1db))[_0x57482d(0x254)]('title,\x20media_type');_0x296cbf&&(_0x110d9f=_0x110d9f[_0x57482d(0x2ef)](_0x57482d(0x279),_0x296cbf[_0x57482d(0x21a)]()));const {data:_0x24b8ad}=await _0x110d9f[_0x57482d(0x257)](0x3e8);if(!_0x24b8ad||_0x24b8ad[_0x57482d(0x292)]===0x0){document[_0x57482d(0x226)](_0x57482d(0x26e))[_0x57482d(0x1f6)]=_0x57482d(0x2ec);return;}const _0x46abd1={};_0x24b8ad[_0x57482d(0x234)](_0x144c67=>{const _0x1d5e67=_0x57482d,_0x1d1031=_0x144c67[_0x1d5e67(0x196)]+'|'+_0x144c67[_0x1d5e67(0x193)];!_0x46abd1[_0x1d1031]&&(_0x46abd1[_0x1d1031]={'title':_0x144c67[_0x1d5e67(0x196)],'type':_0x144c67[_0x1d5e67(0x193)],'count':0x0}),_0x46abd1[_0x1d1031][_0x1d5e67(0x2c7)]++;});const _0x4bb6dc=Object[_0x57482d(0x207)](_0x46abd1)[_0x57482d(0x19e)]((_0x351aa3,_0x592c9b)=>_0x592c9b['count']-_0x351aa3['count'])[_0x57482d(0x2bc)](0x0,0xa),_0x1051a5=_0x4bb6dc[_0x57482d(0x1d5)]((_0x506347,_0x4b7529)=>_0x57482d(0x25a)+(_0x4b7529+0x1)+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-title\x22>'+_0x506347[_0x57482d(0x196)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-meta\x22>'+(_0x506347[_0x57482d(0x242)]===_0x57482d(0x284)?_0x57482d(0x1bc):_0x57482d(0x2a5))+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-count\x22>'+_0x506347[_0x57482d(0x2c7)]+_0x57482d(0x250))[_0x57482d(0x1a2)]('');document[_0x57482d(0x226)]('top-watched-list')[_0x57482d(0x1f6)]=_0x1051a5;}catch(_0x5413b0){console['error'](_0x57482d(0x2b3),_0x5413b0);}}function _0x393f(){const _0x534215=['Reject\x20this\x20payment?\x20The\x20user\x20will\x20need\x20to\x20submit\x20again.','closeAllowModal','toLocaleString','update','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Approving...','getElementById','[ADMIN]\x20Error\x20loading\x20content\x20type\x20chart:','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-bookmark\x22></i><p>No\x20bookmark\x20data</p></div>','short','[ADMIN]\x20loadPendingPayments()\x20called','User\x20not\x20found','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-title\x22>','[ADMIN]\x20Users\x20loaded\x20and\x20filtered','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27','completion-rate','[ADMIN]\x20Hiding\x20loading\x20screen...','watch-list','getDate','forEach','rgba(255,\x20255,\x20255,\x200.1)','<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20','\x20months!','add-user-form','user-detail-modal','838312ZagAfr','Error\x20loading\x20pending\x20payments','Watches','numeric','rejectPayment','User\x20Search\x20History','[ADMIN]\x20User\x20approved\x20successfully','Please\x20fill\x20all\x20fields','type','\x20hrs','825452TptWSl','?\x20This\x20will\x20give\x20them\x201\x20month\x20access.','admin','reset','[ADMIN]\x20Error\x20loading\x20popular\x20searches\x20chart:','target','[ADMIN]\x20switchSection()\x20called\x20for:','[ADMIN]\x20Error\x20loading\x20recent\x20activity:','insert','value','sidebar','#3b82f6','\x20views</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20State\x20initialized','watch-history','[ADMIN]\x20Error\x20loading\x20expiring\x20users:','select','pending-payments-count','email','limit','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Activity\x20Stats</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20grid-template-columns:\x20repeat(3,\x201fr);\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--info);\x22>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-rank\x22>','67GxAFMx','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i><p>No\x20subscriptions\x20expiring\x20soon</p></div>','19542EIRCjd','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Signing\x20In...','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x22></i>\x20Adding...','Error\x20deleting\x20user','.filter-btn','[ADMIN]\x20App\x20initialization\x20complete','push','rejected','line','[ADMIN]\x20DOMContentLoaded\x20event\x20fired','sectionTitle','allowed_users','199551uvHdcP','toggle','<span\x20class=\x22status-badge\x20','[ADMIN]\x20Error\x20in\x20viewUserDetails:','added_at','top-watched-list','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-title\x22>','button[type=\x22submit\x22]','[ADMIN]\x20Error\x20in\x20loadBookmarks:','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-content\x22>','adminEmailDisplay','createClient','Analytics\x20Dashboard','[ADMIN]\x20Allowed\x20users\x20loaded:','[ADMIN]\x20Initializing\x20Enhanced\x20Admin\x20Portal...','watched_at','active_sessions','[ADMIN]\x20Error\x20logging\x20out\x20sessions:','\x20bookmarks</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Bookmarks</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Unknown\x20User','70rCQnlt','fa-exclamation-circle','episode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22expiring-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22expiring-item-email\x22>','active-subs','movie','close-user-detail','user-list','setMonth','pending-payments-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','allow-user-modal','section-title','innerWidth','.notification-close','querySelector','expiry_date','subscription-duration','<i\x20class=\x22fas\x20fa-sign-in-alt\x22></i>\x20Admin\x20Login','length','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x20Reject\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','user','admin-password','querySelectorAll','getMonth','current-date','watch_progress,\x20total_duration,\x20completed','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Status:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20loadUsers()\x20called','search-list','</span>','[ADMIN]\x20Checking\x20authentication...','[ADMIN]\x20deleteUser()\x20called\x20for:','[ADMIN]\x20Error\x20in\x20rejectPayment:','dashboard','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Submitted:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','[ADMIN]\x20User\x20authenticated:','TV\x20Show','userList','mostWatchedChart','total-searches','ceil','round','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-eye\x22></i>\x20View\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-logout-session\x22\x20onclick=\x22logoutUserSessions(\x27','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-item\x20','fa-check-circle','warn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22expiring-item-days\x22>Expires\x20in\x20','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-view\x22\x20onclick=\x22viewUserDetails(\x27','user_id','Approve\x20payment\x20for\x20','[ADMIN]\x20Error\x20loading\x20top\x20watched\x20list:','timestamp','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-email\x22>','query','allow-user-email','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22activity-time\x22>','[ADMIN]\x20Error\x20loading\x20allowed\x20users:','Invalid\x20credentials','[ADMIN]\x20Logout\x20error:','slice','supabase','Logout\x20all\x20sessions\x20for\x20this\x20user?','idToEmail','duration','Admin\x20Portal','loading-screen','continue_watching','.nav-item[data-section]','delete','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-bell\x22></i><p>No\x20recent\x20activity</p></div>','count','Error\x20loading\x20dashboard','includes','bookmark-filter','toLowerCase','notification\x20','error','overview','[ADMIN]\x20Error\x20in\x20loadWatchHistory:','top-bookmarked-list','[ADMIN]\x20filterUsers()\x20called\x20with\x20filter:','parentNode','[ADMIN]\x20Error\x20adding\x20user:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22notification-icon\x20fas\x20','\x27,\x20\x27','recent-activity','pending_payments','active','click','total-bookmarks','28FEVfwz','trim','setDate','pending-users','watch','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','emailToId','[ADMIN]\x20viewUserDetails()\x20called\x20for\x20ID:','logoutBtn','[ADMIN]\x20Error\x20loading\x20stats:','addUserForm','Error\x20rejecting\x20payment','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Joined:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','get','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-users\x22></i><p>No\x20users\x20found</p></div>','4108671rlfdSi','logout-btn','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-film\x22></i><p>No\x20watch\x20data</p></div>','input','from','gte','Error\x20loading\x20analytics','none','en-US','\x20day','Approve\x20User','upsert','\x20added\x20for\x20','add','bottom','exact','[ADMIN]\x20Showing\x20notification:','toLocaleDateString','536140vYiULs','long','...','className','Logged\x20out\x20successfully','admin-email','Error\x20logging\x20out','getTime','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-check\x22></i>\x20Approve\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-reject\x22\x20onclick=\x22rejectPayment(\x27','getUser','login-modal','\x20minute','user_search_history','total-users','hamburgerBtn','payments','hidden','message','media_type','openAllowModal','analytics','title','log','rgba(59,\x20130,\x20246,\x200.1)','signInWithPassword','classList','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Expiry:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','currentDate','size','sort','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-approve\x22\x20onclick=\x22approvePayment(\x27','logoutUserSessions','[ADMIN]\x20Dashboard\x20init\x20error:','join','disabled','?\x20This\x20will\x20remove\x20them\x20from\x20auth\x20and\x20all\x20data.','Payment\x20rejected','season','Please\x20enter\x20email\x20and\x20password','loadingScreen','addEventListener','deleteUser','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-meta\x22>','success','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','User\x20','preventDefault','[ADMIN]\x20Starting\x20app\x20initialization...','admin-email-display','[ADMIN]\x20Auth\x20signOut\x20failed\x20(might\x20be\x20expected):','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Watched</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--warning);\x22>','approvePayment','[ADMIN]\x20User\x20map\x20loaded:','allow-user-form','all','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','users','fa-exclamation-triangle','appendChild','Movie','[ADMIN]\x20User\x20added\x20successfully','order','floor','clear','</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>','user-detail-content','<span\x20class=\x22status-badge\x20active\x22>Active\x20-\x20Lifetime</span>','searchList','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-check-circle\x22></i><p>No\x20pending\x20payments</p></div>','engagementChart','filter','[ADMIN]\x20handleAddUser()\x20called','signOut','__SUPABASE_SERVICE_ROLE_KEY__','\x20days\x20remaining</span>','[ADMIN]\x20Loading\x20analytics...','submit','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22notification-close\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-times\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','rgba(229,\x209,\x2020,\x201)','fade-out','watch-filter','Pending\x20Payment\x20Approvals','contentTypeChart','transaction_id','map','searched_at','user_email','Please\x20select\x20a\x20duration','[ADMIN]\x20Enhanced\x20Admin\x20Portal\x20script\x20loaded\x20and\x20ready','abs','user_watch_history','search','\x20approved\x20for\x20','Error\x20loading\x20users','auth','analytics-period','6150eVYuIU','entries','title,\x20media_type','remove','rgba(255,\x20255,\x20255,\x200.7)','[ADMIN]\x20Error\x20loading\x20analytics:','TV\x20Shows','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22history-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-user\x22>','div','[ADMIN]\x20Event\x20listeners\x20set\x20up','[ADMIN]\x20logoutUserSessions()\x20called\x20for\x20ID:','\x20deleted','status','[ADMIN]\x20Initializing\x20dashboard...','loginError','#e50914','substring','<span\x20class=\x22status-badge\x20pending\x22>Pending\x20Approval</span>','Dashboard\x20Overview','allow-duration','705sknkpq','innerHTML','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-approve-user\x22\x20onclick=\x22openAllowModal(\x27','Delete\x20user\x20','set','[ADMIN]\x20Dashboard\x20initialized','reduce','bookmark','bookmark-list','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','sidebarOverlay','[ADMIN]\x20Error\x20loading\x20top\x20bookmarked\x20list:','rgba(229,\x209,\x2020,\x200.1)','Search:\x20\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>User\x20Details</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-detail-grid\x22\x20style=\x22display:\x20grid;\x20gap:\x2020px;\x20margin-top:\x2020px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22detail-section\x22\x20style=\x22background:\x20var(--card-bg);\x20padding:\x2020px;\x20border-radius:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-bottom:\x2015px;\x20color:\x20var(--accent-primary);\x22>Account\x20Information</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20grid;\x20gap:\x2012px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Email:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','.section','created_at','Error\x20loading\x20bookmarks','values','__SUPABASE_ANON_KEY__','getContext','show','[data-section=\x22','\x20days\x20ago</span>','[ADMIN]\x20Error\x20in\x20approvePayment:','[ADMIN]\x20Error\x20in\x20loadSearchHistory:','\x20approved','<div\x20class=\x22empty-state\x22><i\x20class=\x22fas\x20fa-inbox\x22></i><p>No\x20history\x20found</p></div>','bookmarks','\x20ago','[ADMIN]\x20Auth\x20check\x20error:','[ADMIN]\x20Stats\x20updated','approved','[ADMIN]\x20Analytics\x20loaded','loginModal','[ADMIN]\x20Error\x20in\x20loadUsers:','.nav-item','toISOString','destroy','[ADMIN]\x20Error\x20in\x20handleAddUser:','pending','user_bookmarks','<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-between;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22color:\x20var(--text-secondary);\x22>Expiry:</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<strong>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'];_0x393f=function(){return _0x534215;};return _0x393f();}async function loadTopBookmarkedList(_0x42d86a){const _0x3e7119=_0x3f4d3f;try{let _0x377a7c=supabase['from']('user_bookmarks')[_0x3e7119(0x254)](_0x3e7119(0x1e3));_0x42d86a&&(_0x377a7c=_0x377a7c['gte'](_0x3e7119(0x26d),_0x42d86a[_0x3e7119(0x21a)]()));const {data:_0x1c91fd}=await _0x377a7c['limit'](0x3e8);if(!_0x1c91fd||_0x1c91fd['length']===0x0){document[_0x3e7119(0x226)]('top-bookmarked-list')[_0x3e7119(0x1f6)]=_0x3e7119(0x228);return;}const _0xa4df8f={};_0x1c91fd[_0x3e7119(0x234)](_0x997ad1=>{const _0x4b7c1e=_0x3e7119,_0x40737e=_0x997ad1[_0x4b7c1e(0x196)]+'|'+_0x997ad1[_0x4b7c1e(0x193)];!_0xa4df8f[_0x40737e]&&(_0xa4df8f[_0x40737e]={'title':_0x997ad1['title'],'type':_0x997ad1['media_type'],'count':0x0}),_0xa4df8f[_0x40737e][_0x4b7c1e(0x2c7)]++;});const _0x5dc1a2=Object[_0x3e7119(0x207)](_0xa4df8f)['sort']((_0x2238a9,_0x1b6f4f)=>_0x1b6f4f[_0x3e7119(0x2c7)]-_0x2238a9[_0x3e7119(0x2c7)])[_0x3e7119(0x2bc)](0x0,0xa),_0x4eeff1=_0x5dc1a2[_0x3e7119(0x1d5)]((_0x4f5e18,_0x285e51)=>_0x3e7119(0x25a)+(_0x285e51+0x1)+_0x3e7119(0x22c)+_0x4f5e18[_0x3e7119(0x196)]+_0x3e7119(0x1ab)+(_0x4f5e18[_0x3e7119(0x242)]===_0x3e7119(0x284)?_0x3e7119(0x1bc):'TV\x20Show')+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22top-list-count\x22>'+_0x4f5e18[_0x3e7119(0x2c7)]+_0x3e7119(0x27c))[_0x3e7119(0x1a2)]('');document['getElementById'](_0x3e7119(0x2d0))[_0x3e7119(0x1f6)]=_0x4eeff1;}catch(_0x559605){console['error'](_0x3e7119(0x200),_0x559605);}}async function loadUsers(){const _0x5b26ed=_0x3f4d3f;console[_0x5b26ed(0x197)](_0x5b26ed(0x29b));try{const _0x44aa0e=new Date(),_0x5d3c5f=allAuthUsers[_0x5b26ed(0x1d5)](_0xbb18e7=>{const _0xfd9600=_0x5b26ed,_0x1bec18=allowedUserMap['get'](_0xbb18e7[_0xfd9600(0x256)])||null;let _0x140174=_0xfd9600(0x21d);return _0x1bec18&&(_0x1bec18[_0xfd9600(0x215)]?_0x140174=new Date(_0x1bec18[_0xfd9600(0x28f)]||0x0)>_0x44aa0e?_0xfd9600(0x2d8):'expired':_0x140174='pending'),{'id':_0xbb18e7['id'],'email':_0xbb18e7[_0xfd9600(0x256)],'created_at':_0xbb18e7[_0xfd9600(0x205)],'status':_0x140174,'allowedData':_0x1bec18};});allUsers=_0x5d3c5f,filterUsers(),console[_0x5b26ed(0x197)](_0x5b26ed(0x22d));}catch(_0x30a657){console[_0x5b26ed(0x2cd)](_0x5b26ed(0x218),_0x30a657),showNotification(_0x5b26ed(0x1de),_0x5b26ed(0x2cd));}}function filterUsers(){const _0x179ad2=_0x3f4d3f;console[_0x179ad2(0x197)](_0x179ad2(0x2d1),currentFilter);let _0x48205e=allUsers;currentFilter!==_0x179ad2(0x1b7)&&(_0x48205e=allUsers[_0x179ad2(0x1c7)](_0x359c2a=>_0x359c2a[_0x179ad2(0x1ed)]===currentFilter)),renderUsers(_0x48205e);}function filterUsersBySearch(_0xec7d0d){const _0x4feb9d=_0x3f4d3f,_0x4c6d50=_0xec7d0d['toLowerCase']()[_0x4feb9d(0x2dc)]();if(!_0x4c6d50){filterUsers();return;}let _0x2e04d4=allUsers;currentFilter!=='all'&&(_0x2e04d4=allUsers[_0x4feb9d(0x1c7)](_0x562e9c=>_0x562e9c[_0x4feb9d(0x1ed)]===currentFilter));const _0x50cec9=_0x2e04d4[_0x4feb9d(0x1c7)](_0x2c3d22=>_0x2c3d22[_0x4feb9d(0x256)][_0x4feb9d(0x2cb)]()[_0x4feb9d(0x2c9)](_0x4c6d50));renderUsers(_0x50cec9);}function renderUsers(_0x5aabb6){const _0x27db36=_0x3f4d3f,_0x2dc007=DOM[_0x27db36(0x2a6)];if(!_0x2dc007)return;if(!_0x5aabb6||_0x5aabb6[_0x27db36(0x292)]===0x0){_0x2dc007[_0x27db36(0x1f6)]=_0x27db36(0x2e9);return;}_0x2dc007[_0x27db36(0x1f6)]=_0x5aabb6[_0x27db36(0x1d5)](_0x22ead6=>{const _0xe05523=_0x27db36,{email:_0x41b6fd,created_at:_0x429d8c,status:_0x5be16a,allowedData:_0x297a7a}=_0x22ead6,_0xcc6bcb=new Date(_0x429d8c)[_0xe05523(0x2fb)]();let _0x356a4d=_0xe05523(0x26b)+_0x5be16a+'\x22>'+(_0x5be16a['charAt'](0x0)['toUpperCase']()+_0x5be16a[_0xe05523(0x2bc)](0x1))+_0xe05523(0x29d),_0x332226='';_0x5be16a===_0xe05523(0x21d)?_0x332226=_0xe05523(0x1f7)+_0x41b6fd+_0xe05523(0x2b0)+_0x22ead6['id']+_0xe05523(0x272):_0x332226=_0xe05523(0x22f)+_0x22ead6['id']+_0xe05523(0x2ab)+_0x22ead6['id']+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-sign-out-alt\x22></i>\x20Logout\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-delete\x22\x20onclick=\x22deleteUser(\x27'+_0x22ead6['id']+_0xe05523(0x2d5)+_0x41b6fd+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x20Delete\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';let _0x1c36c6='';if(_0x297a7a?.[_0xe05523(0x28f)]){const _0x1989ab=new Date(_0x297a7a[_0xe05523(0x28f)])[_0xe05523(0x2fb)]();_0x1c36c6=_0xe05523(0x19b)+_0x1989ab+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-card-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-email\x22>'+_0x41b6fd+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>'+_0x356a4d+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Joined:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0xcc6bcb+_0xe05523(0x22e)+_0x1c36c6+_0xe05523(0x220)+_0x332226+_0xe05523(0x289);})[_0x27db36(0x1a2)]('');}function openAllowModal(_0x39449d){const _0x4db5e2=_0x3f4d3f;console[_0x4db5e2(0x197)]('[ADMIN]\x20openAllowModal()\x20called\x20for:',_0x39449d),document[_0x4db5e2(0x226)](_0x4db5e2(0x2b7))[_0x4db5e2(0x24d)]=_0x39449d,document[_0x4db5e2(0x226)]('allow-user-modal')[_0x4db5e2(0x19a)][_0x4db5e2(0x1e4)]('hidden');}function closeAllowModal(){const _0x577022=_0x3f4d3f;document[_0x577022(0x226)](_0x577022(0x28a))[_0x577022(0x19a)]['add'](_0x577022(0x191)),document[_0x577022(0x226)](_0x577022(0x1b6))[_0x577022(0x247)]();}async function handleAllowUser(_0x885e1d){const _0x45b506=_0x3f4d3f;_0x885e1d['preventDefault'](),console[_0x45b506(0x197)]('[ADMIN]\x20handleAllowUser()\x20called');const _0x3d419f=document[_0x45b506(0x226)](_0x45b506(0x2b7))[_0x45b506(0x24d)],_0x2f7da3=parseInt(document['getElementById'](_0x45b506(0x1f4))[_0x45b506(0x24d)]),_0x5bcec4=_0x885e1d[_0x45b506(0x249)][_0x45b506(0x28e)](_0x45b506(0x270));if(!_0x2f7da3){showNotification(_0x45b506(0x1d8),_0x45b506(0x2cd));return;}_0x5bcec4[_0x45b506(0x1a3)]=!![],_0x5bcec4[_0x45b506(0x1f6)]=_0x45b506(0x225);try{const _0x9cbd25=new Date();_0x9cbd25['setMonth'](_0x9cbd25['getMonth']()+_0x2f7da3);const {error:_0x592c2c}=await supabase[_0x45b506(0x2ee)]('allowed_users')[_0x45b506(0x2f5)]({'email':_0x3d419f,'approved':!![],'expiry_date':_0x9cbd25[_0x45b506(0x21a)](),'created_at':new Date()[_0x45b506(0x21a)]()},{'onConflict':_0x45b506(0x256)});if(_0x592c2c){console[_0x45b506(0x2cd)]('[ADMIN]\x20Error\x20approving\x20user:',_0x592c2c);throw _0x592c2c;}console[_0x45b506(0x197)](_0x45b506(0x240)),showNotification(_0x45b506(0x1ae)+_0x3d419f+_0x45b506(0x1dd)+_0x2f7da3+_0x45b506(0x237),_0x45b506(0x1ac)),closeAllowModal(),await Promise[_0x45b506(0x1b7)]([loadAllowedUsers(),loadStats(),loadUsers(),loadRecentActivity()]);}catch(_0x513937){console[_0x45b506(0x2cd)]('[ADMIN]\x20Error\x20in\x20handleAllowUser:',_0x513937),showNotification('Error\x20approving\x20user',_0x45b506(0x2cd));}finally{_0x5bcec4[_0x45b506(0x1a3)]=![],_0x5bcec4['innerHTML']=_0x45b506(0x2f4);}}async function handleAddUser(_0x237b4b){const _0x13f97e=_0x3f4d3f;_0x237b4b[_0x13f97e(0x1af)](),console[_0x13f97e(0x197)](_0x13f97e(0x1c8));const _0x2aafeb=document['getElementById']('new-user-email')[_0x13f97e(0x24d)],_0x39d729=parseInt(document[_0x13f97e(0x226)](_0x13f97e(0x290))[_0x13f97e(0x24d)]),_0x52c20b=_0x237b4b['target']['querySelector'](_0x13f97e(0x270));if(!_0x2aafeb||!_0x39d729){showNotification(_0x13f97e(0x241),_0x13f97e(0x2cd));return;}_0x52c20b[_0x13f97e(0x1a3)]=!![],_0x52c20b[_0x13f97e(0x1f6)]=_0x13f97e(0x25f);try{const _0x4e311b=new Date();_0x4e311b[_0x13f97e(0x287)](_0x4e311b[_0x13f97e(0x297)]()+_0x39d729);const {error:_0x17a9d7}=await supabase[_0x13f97e(0x2ee)]('allowed_users')[_0x13f97e(0x24c)]({'email':_0x2aafeb,'approved':!![],'expiry_date':_0x4e311b['toISOString'](),'created_at':new Date()[_0x13f97e(0x21a)]()});if(_0x17a9d7){console['error'](_0x13f97e(0x2d3),_0x17a9d7);throw _0x17a9d7;}console[_0x13f97e(0x197)](_0x13f97e(0x1bd)),showNotification(_0x13f97e(0x1ae)+_0x2aafeb+_0x13f97e(0x2f6)+_0x39d729+'\x20months!','success'),_0x237b4b[_0x13f97e(0x249)]['reset'](),await Promise[_0x13f97e(0x1b7)]([loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0xfd0f4f){console[_0x13f97e(0x2cd)](_0x13f97e(0x21c),_0xfd0f4f),showNotification('Error\x20adding\x20user',_0x13f97e(0x2cd));}finally{_0x52c20b[_0x13f97e(0x1a3)]=![],_0x52c20b[_0x13f97e(0x1f6)]='Add\x20User';}}async function deleteUser(_0x459308,_0xee82cd){const _0x5c3477=_0x3f4d3f;console['log'](_0x5c3477(0x29f),_0xee82cd);if(!confirm(_0x5c3477(0x1f8)+_0xee82cd+_0x5c3477(0x1a4)))return;try{await supabase[_0x5c3477(0x2ee)](_0x5c3477(0x268))[_0x5c3477(0x2c5)]()['eq'](_0x5c3477(0x256),_0xee82cd);const {error:_0x11999c}=await adminSupabase['auth'][_0x5c3477(0x246)][_0x5c3477(0x1aa)](_0x459308);if(_0x11999c)throw _0x11999c;showNotification('User\x20'+_0xee82cd+_0x5c3477(0x1ec),_0x5c3477(0x1ac)),await Promise[_0x5c3477(0x1b7)]([loadUserMap(),loadAllowedUsers(),loadStats(),loadUsers()]);}catch(_0x867e94){console[_0x5c3477(0x2cd)]('[ADMIN]\x20Error\x20deleting\x20user:',_0x867e94),showNotification(_0x5c3477(0x260),_0x5c3477(0x2cd));}}async function logoutUserSessions(_0x253611){const _0x3a19d7=_0x3f4d3f;console['log'](_0x3a19d7(0x1eb),_0x253611);if(!confirm(_0x3a19d7(0x2be)))return;try{const {error:_0x2a97c5}=await supabase[_0x3a19d7(0x2ee)](_0x3a19d7(0x27a))[_0x3a19d7(0x2c5)]()['eq'](_0x3a19d7(0x2b1),_0x253611);if(_0x2a97c5)throw _0x2a97c5;const {error:_0x38103c}=await adminSupabase[_0x3a19d7(0x1df)][_0x3a19d7(0x246)][_0x3a19d7(0x1c9)](_0x253611);_0x38103c&&console[_0x3a19d7(0x2ae)](_0x3a19d7(0x1b2),_0x38103c),showNotification('User\x20sessions\x20logged\x20out\x20successfully','success'),await loadUsers();}catch(_0x32927b){console[_0x3a19d7(0x2cd)](_0x3a19d7(0x27b),_0x32927b),showNotification('Error\x20logging\x20out\x20sessions',_0x3a19d7(0x2cd));}}async function viewUserDetails(_0x1dcdde){const _0x2ba86b=_0x3f4d3f;console[_0x2ba86b(0x197)](_0x2ba86b(0x2e2),_0x1dcdde);try{const _0x407f6f=document[_0x2ba86b(0x226)](_0x2ba86b(0x239)),_0x336774=document[_0x2ba86b(0x226)](_0x2ba86b(0x1c2)),_0x4e0a49=userMap['idToEmail'][_0x2ba86b(0x2e8)](_0x1dcdde);if(!_0x4e0a49)throw new Error(_0x2ba86b(0x22b));const _0x497c89=allowedUserMap['get'](_0x4e0a49),[{count:_0x367c6b},{count:_0x4eee6e},{count:_0x358c21}]=await Promise[_0x2ba86b(0x1b7)]([supabase[_0x2ba86b(0x2ee)]('user_search_history')[_0x2ba86b(0x254)]('*',{'count':_0x2ba86b(0x2f9),'head':!![]})['eq']('user_id',_0x1dcdde),supabase[_0x2ba86b(0x2ee)]('user_watch_history')['select']('*',{'count':_0x2ba86b(0x2f9),'head':!![]})['eq']('user_id',_0x1dcdde),supabase['from'](_0x2ba86b(0x21e))[_0x2ba86b(0x254)]('*',{'count':_0x2ba86b(0x2f9),'head':!![]})['eq'](_0x2ba86b(0x2b1),_0x1dcdde)]),_0x51e50a=_0x367c6b||0x0,_0x159ebe=_0x4eee6e||0x0,_0x3660a7=_0x358c21||0x0,_0x19f03f=new Date();let _0x579985='';if(_0x497c89?.['approved']){if(_0x497c89['expiry_date']){const _0x196a36=new Date(_0x497c89[_0x2ba86b(0x28f)]),_0x16e32c=Math[_0x2ba86b(0x2a9)]((_0x196a36-_0x19f03f)/(0x3e8*0x3c*0x3c*0x18));_0x16e32c>0x0?_0x579985=_0x2ba86b(0x236)+_0x16e32c+_0x2ba86b(0x1cb):_0x579985='<span\x20class=\x22status-badge\x20expired\x22>Expired\x20'+Math[_0x2ba86b(0x1da)](_0x16e32c)+_0x2ba86b(0x20c);}else _0x579985=_0x2ba86b(0x1c3);}else _0x579985=_0x2ba86b(0x1f2);_0x336774[_0x2ba86b(0x1f6)]=_0x2ba86b(0x203)+_0x4e0a49+_0x2ba86b(0x29a)+_0x579985+_0x2ba86b(0x1fe)+(_0x497c89?.[_0x2ba86b(0x205)]?_0x2ba86b(0x2e7)+new Date(_0x497c89[_0x2ba86b(0x205)])[_0x2ba86b(0x2fb)]()+_0x2ba86b(0x1c1):'')+_0x2ba86b(0x1b8)+(_0x497c89?.[_0x2ba86b(0x28f)]?_0x2ba86b(0x21f)+new Date(_0x497c89[_0x2ba86b(0x28f)])[_0x2ba86b(0x2fb)]()+'</strong>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>':'')+_0x2ba86b(0x259)+_0x51e50a+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.9rem;\x20color:\x20var(--text-secondary);\x22>Searches</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x202rem;\x20font-weight:\x20700;\x20color:\x20var(--success);\x22>'+_0x159ebe+_0x2ba86b(0x1b3)+_0x3660a7+_0x2ba86b(0x27d),_0x407f6f[_0x2ba86b(0x19a)][_0x2ba86b(0x1e4)](_0x2ba86b(0x191));}catch(_0x48f659){console[_0x2ba86b(0x2cd)](_0x2ba86b(0x26c),_0x48f659),showNotification('Error\x20loading\x20user\x20details',_0x2ba86b(0x2cd));}}async function loadPendingPayments(){const _0x21833c=_0x3f4d3f;console[_0x21833c(0x197)](_0x21833c(0x22a));try{const {data:_0x5ee5a4,error:_0x39bdf1}=await supabase['from'](_0x21833c(0x2d7))[_0x21833c(0x254)]('*')['eq']('status','pending')['order'](_0x21833c(0x205),{'ascending':![]});if(_0x39bdf1)throw _0x39bdf1;const _0x15e228=document[_0x21833c(0x226)](_0x21833c(0x288));if(!_0x15e228)return;if(!_0x5ee5a4||_0x5ee5a4[_0x21833c(0x292)]===0x0){_0x15e228['innerHTML']=_0x21833c(0x1c5);return;}_0x15e228[_0x21833c(0x1f6)]=_0x5ee5a4['map'](_0x56d1fc=>_0x21833c(0x2b5)+_0x56d1fc[_0x21833c(0x1d7)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22payment-info-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>Transaction\x20ID:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x56d1fc[_0x21833c(0x1d4)]+_0x21833c(0x2a2)+new Date(_0x56d1fc[_0x21833c(0x205)])[_0x21833c(0x223)]()+_0x21833c(0x19f)+_0x56d1fc['id']+_0x21833c(0x2d5)+_0x56d1fc['user_email']+_0x21833c(0x189)+_0x56d1fc['id']+_0x21833c(0x293))['join']('');}catch(_0x2d43b8){console[_0x21833c(0x2cd)]('[ADMIN]\x20Error\x20in\x20loadPendingPayments:',_0x2d43b8),showNotification(_0x21833c(0x23b),_0x21833c(0x2cd));}}async function approvePayment(_0x2f0246,_0x112751){const _0x4aba22=_0x3f4d3f;if(!confirm(_0x4aba22(0x2b2)+_0x112751+_0x4aba22(0x245)))return;try{const _0x342e45=new Date();_0x342e45[_0x4aba22(0x287)](_0x342e45[_0x4aba22(0x297)]()+0x1);const {error:_0x356ea8}=await supabase[_0x4aba22(0x2ee)](_0x4aba22(0x268))[_0x4aba22(0x2f5)]({'email':_0x112751,'approved':!![],'expiry_date':_0x342e45[_0x4aba22(0x21a)](),'created_at':new Date()['toISOString']()},{'onConflict':_0x4aba22(0x256)});if(_0x356ea8)throw _0x356ea8;const {error:_0x48675c}=await supabase[_0x4aba22(0x2ee)]('pending_payments')[_0x4aba22(0x224)]({'status':'approved'})['eq']('id',_0x2f0246);if(_0x48675c)throw _0x48675c;showNotification('Payment\x20approved!\x20'+_0x112751+'\x20now\x20has\x201\x20month\x20access',_0x4aba22(0x1ac)),await Promise[_0x4aba22(0x1b7)]([loadAllowedUsers(),loadStats(),loadPendingPayments(),loadRecentActivity(),loadUsers()]);}catch(_0x2f2001){console[_0x4aba22(0x2cd)](_0x4aba22(0x20d),_0x2f2001),showNotification('Error\x20approving\x20payment','error');}}async function rejectPayment(_0x3104e8){const _0x5db13d=_0x3f4d3f;if(!confirm(_0x5db13d(0x221)))return;try{const {error:_0x26a8b8}=await supabase[_0x5db13d(0x2ee)](_0x5db13d(0x2d7))[_0x5db13d(0x224)]({'status':_0x5db13d(0x264)})['eq']('id',_0x3104e8);if(_0x26a8b8)throw _0x26a8b8;showNotification(_0x5db13d(0x1a5),_0x5db13d(0x1ac)),await Promise[_0x5db13d(0x1b7)]([loadPendingPayments(),loadStats(),loadRecentActivity()]);}catch(_0x11517a){console[_0x5db13d(0x2cd)](_0x5db13d(0x2a0),_0x11517a),showNotification(_0x5db13d(0x2e6),_0x5db13d(0x2cd));}}function _0x1c93(_0x219c97,_0x2376f8){const _0x393f89=_0x393f();return _0x1c93=function(_0x1c9332,_0x2709c3){_0x1c9332=_0x1c9332-0x185;let _0x5c6bfb=_0x393f89[_0x1c9332];return _0x5c6bfb;},_0x1c93(_0x219c97,_0x2376f8);}async function loadSearchHistory(){const _0x571e03=_0x3f4d3f;try{const {data:_0x1ee7e9,error:_0x541564}=await supabase[_0x571e03(0x2ee)](_0x571e03(0x18d))[_0x571e03(0x254)]('*')[_0x571e03(0x1be)]('searched_at',{'ascending':![]})[_0x571e03(0x257)](0x64);if(_0x541564)throw _0x541564;allSearchHistory=_0x1ee7e9||[],renderHistory(allSearchHistory,_0x571e03(0x29c),'search');}catch(_0x1bd4e2){console[_0x571e03(0x2cd)](_0x571e03(0x20e),_0x1bd4e2),showNotification('Error\x20loading\x20search\x20history',_0x571e03(0x2cd));}}async function loadWatchHistory(){const _0x4b1ca8=_0x3f4d3f;try{const {data:_0xe1ee67,error:_0x434e60}=await supabase['from'](_0x4b1ca8(0x1db))[_0x4b1ca8(0x254)]('*')[_0x4b1ca8(0x1be)](_0x4b1ca8(0x279),{'ascending':![]})['limit'](0x64);if(_0x434e60)throw _0x434e60;allWatchHistory=_0xe1ee67||[],renderHistory(allWatchHistory,_0x4b1ca8(0x232),_0x4b1ca8(0x2df));}catch(_0x20b696){console[_0x4b1ca8(0x2cd)](_0x4b1ca8(0x2cf),_0x20b696),showNotification('Error\x20loading\x20watch\x20history','error');}}async function loadBookmarks(){const _0x2fa98f=_0x3f4d3f;try{const {data:_0x431749,error:_0x3766a1}=await supabase['from'](_0x2fa98f(0x21e))['select']('*')[_0x2fa98f(0x1be)](_0x2fa98f(0x26d),{'ascending':![]})[_0x2fa98f(0x257)](0x64);if(_0x3766a1)throw _0x3766a1;allBookmarks=_0x431749||[],renderHistory(allBookmarks,_0x2fa98f(0x1fd),_0x2fa98f(0x1fc));}catch(_0x5c5546){console[_0x2fa98f(0x2cd)](_0x2fa98f(0x271),_0x5c5546),showNotification(_0x2fa98f(0x206),_0x2fa98f(0x2cd));}}function renderHistory(_0x4aee2e,_0x5a163f,_0x244747){const _0xe63590=_0x3f4d3f,_0x9c0875=document[_0xe63590(0x226)](_0x5a163f);if(!_0x9c0875)return;if(!_0x4aee2e||_0x4aee2e[_0xe63590(0x292)]===0x0){_0x9c0875['innerHTML']=_0xe63590(0x210);return;}_0x9c0875[_0xe63590(0x1f6)]=_0x4aee2e[_0xe63590(0x1d5)](_0x8e0ce1=>{const _0x2097a0=_0xe63590,_0x4b97ff=userMap['idToEmail']['get'](_0x8e0ce1['user_id'])||_0x2097a0(0x27e);let _0x4ea7c6='',_0x3f47e3='';switch(_0x244747){case _0x2097a0(0x1dc):_0x4ea7c6=_0x2097a0(0x202)+_0x8e0ce1[_0x2097a0(0x2b6)]+'\x22',_0x3f47e3=_0x8e0ce1['searched_at'];break;case _0x2097a0(0x2df):_0x4ea7c6=_0x8e0ce1['title']+'\x20('+_0x8e0ce1[_0x2097a0(0x193)]+')',_0x3f47e3=_0x8e0ce1[_0x2097a0(0x279)];if(_0x8e0ce1[_0x2097a0(0x1a6)])_0x4ea7c6+='\x20-\x20S'+_0x8e0ce1[_0x2097a0(0x1a6)];if(_0x8e0ce1[_0x2097a0(0x281)])_0x4ea7c6+='E'+_0x8e0ce1[_0x2097a0(0x281)];if(_0x8e0ce1[_0x2097a0(0x2c0)])_0x4ea7c6+='\x20-\x20'+formatDuration(_0x8e0ce1[_0x2097a0(0x2c0)]);break;case _0x2097a0(0x1fc):_0x4ea7c6=_0x8e0ce1[_0x2097a0(0x196)]+'\x20('+_0x8e0ce1[_0x2097a0(0x193)]+')',_0x3f47e3=_0x8e0ce1[_0x2097a0(0x26d)];break;}return _0x2097a0(0x1e8)+_0x4b97ff+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22history-time\x22>'+new Date(_0x3f47e3)[_0x2097a0(0x223)]()+_0x2097a0(0x273)+_0x4ea7c6+_0x2097a0(0x1ad);})['join']('');}function filterHistory(_0x5589b8,_0x19d42b){const _0x3bb5c7=_0x3f4d3f,_0x5b18e2=_0x19d42b[_0x3bb5c7(0x2cb)]()[_0x3bb5c7(0x2dc)]();let _0x4d744b=[],_0x330099='';switch(_0x5589b8){case _0x3bb5c7(0x1dc):_0x4d744b=allSearchHistory,_0x330099=_0x3bb5c7(0x29c);break;case'watch':_0x4d744b=allWatchHistory,_0x330099='watch-list';break;case _0x3bb5c7(0x1fc):_0x4d744b=allBookmarks,_0x330099=_0x3bb5c7(0x1fd);break;}if(_0x5b18e2===''){renderHistory(_0x4d744b,_0x330099,_0x5589b8);return;}const _0x2c93c3=_0x4d744b['filter'](_0x206316=>{const _0x11d570=_0x3bb5c7,_0x121928=userMap[_0x11d570(0x2bf)]['get'](_0x206316[_0x11d570(0x2b1)])||'',_0xe7f393=_0x121928['toLowerCase']()[_0x11d570(0x2c9)](_0x5b18e2);let _0x5df21e=![];switch(_0x5589b8){case _0x11d570(0x1dc):_0x5df21e=_0x206316[_0x11d570(0x2b6)]?.[_0x11d570(0x2cb)]()[_0x11d570(0x2c9)](_0x5b18e2);break;case _0x11d570(0x2df):case _0x11d570(0x1fc):_0x5df21e=_0x206316[_0x11d570(0x196)]?.['toLowerCase']()['includes'](_0x5b18e2);break;}return _0xe7f393||_0x5df21e;});renderHistory(_0x2c93c3,_0x330099,_0x5589b8);}function switchSection(_0x58b902){const _0x20ecce=_0x3f4d3f;console[_0x20ecce(0x197)](_0x20ecce(0x24a),_0x58b902),document[_0x20ecce(0x296)](_0x20ecce(0x219))[_0x20ecce(0x234)](_0x7031ab=>_0x7031ab[_0x20ecce(0x19a)]['remove'](_0x20ecce(0x2d8)));const _0x504f86=document['querySelector'](_0x20ecce(0x20b)+_0x58b902+'\x22]');if(_0x504f86)_0x504f86[_0x20ecce(0x19a)]['add'](_0x20ecce(0x2d8));const _0x18f8b2={'overview':_0x20ecce(0x1f3),'analytics':_0x20ecce(0x276),'users':'Manage\x20Users','add-user':'Add\x20New\x20User','payments':_0x20ecce(0x1d2),'search-history':_0x20ecce(0x23f),'watch-history':'User\x20Watch\x20History','bookmarks':'User\x20Bookmarks'};if(DOM[_0x20ecce(0x267)])DOM['sectionTitle'][_0x20ecce(0x258)]=_0x18f8b2[_0x58b902]||_0x20ecce(0x2c1);document[_0x20ecce(0x296)](_0x20ecce(0x204))[_0x20ecce(0x234)](_0x417487=>_0x417487['classList'][_0x20ecce(0x1e4)](_0x20ecce(0x2d8)));const _0x1d1787=document[_0x20ecce(0x226)](_0x58b902);if(_0x1d1787)_0x1d1787[_0x20ecce(0x19a)][_0x20ecce(0x2f7)](_0x20ecce(0x2d8));switch(_0x58b902){case _0x20ecce(0x195):loadAnalytics();break;case _0x20ecce(0x1b9):loadUsers();break;case _0x20ecce(0x190):loadPendingPayments();break;case'search-history':loadSearchHistory();break;case _0x20ecce(0x252):loadWatchHistory();break;case _0x20ecce(0x211):loadBookmarks();break;}}function showNotification(_0x19d55f,_0x14b77f='success'){const _0x447273=_0x3f4d3f;console[_0x447273(0x197)](_0x447273(0x2fa),_0x14b77f,'-',_0x19d55f);const _0x190a1b=document['getElementById']('notification-container');if(!_0x190a1b)return;const _0x15cb6b=document['createElement'](_0x447273(0x1e9));_0x15cb6b[_0x447273(0x2ff)]=_0x447273(0x2cc)+_0x14b77f,_0x15cb6b[_0x447273(0x1f6)]=_0x447273(0x2d4)+(_0x14b77f==='success'?_0x447273(0x2ad):_0x14b77f===_0x447273(0x2cd)?_0x447273(0x280):_0x447273(0x1ba))+_0x447273(0x2e0)+_0x19d55f+_0x447273(0x1ce),_0x190a1b[_0x447273(0x1bb)](_0x15cb6b),setTimeout(()=>_0x15cb6b[_0x447273(0x19a)][_0x447273(0x2f7)](_0x447273(0x20a)),0x64);const _0x217da5=setTimeout(()=>{removeNotification(_0x15cb6b);},0x1388);_0x15cb6b[_0x447273(0x28e)](_0x447273(0x28d))[_0x447273(0x1a9)](_0x447273(0x2d9),()=>{clearTimeout(_0x217da5),removeNotification(_0x15cb6b);});}function removeNotification(_0x3b1e7c){const _0x128c28=_0x3f4d3f;_0x3b1e7c[_0x128c28(0x19a)]['add'](_0x128c28(0x1d0)),setTimeout(()=>{const _0x3dc1f4=_0x128c28;_0x3b1e7c[_0x3dc1f4(0x2d2)]&&_0x3b1e7c['remove']();},0x12c);}window[_0x3f4d3f(0x194)]=openAllowModal,window[_0x3f4d3f(0x222)]=closeAllowModal,window[_0x3f4d3f(0x1aa)]=deleteUser,window[_0x3f4d3f(0x1a0)]=logoutUserSessions,window['viewUserDetails']=viewUserDetails,window[_0x3f4d3f(0x1b4)]=approvePayment,window[_0x3f4d3f(0x23e)]=rejectPayment,console[_0x3f4d3f(0x197)](_0x3f4d3f(0x1d9)),console[_0x3f4d3f(0x197)]('[ADMIN]\x20All\x20global\x20functions\x20exported');