const _0x3afe9c=_0x2310;(function(_0x352118,_0x5b8cc3){const _0x4b86e5=_0x2310,_0x19872d=_0x352118();while(!![]){try{const _0x53c970=parseInt(_0x4b86e5(0x14b))/0x1*(-parseInt(_0x4b86e5(0x145))/0x2)+-parseInt(_0x4b86e5(0x121))/0x3+parseInt(_0x4b86e5(0x112))/0x4+parseInt(_0x4b86e5(0x115))/0x5+-parseInt(_0x4b86e5(0x179))/0x6*(parseInt(_0x4b86e5(0x11f))/0x7)+-parseInt(_0x4b86e5(0x12e))/0x8+parseInt(_0x4b86e5(0x11b))/0x9;if(_0x53c970===_0x5b8cc3)break;else _0x19872d['push'](_0x19872d['shift']());}catch(_0x8e9cbe){_0x19872d['push'](_0x19872d['shift']());}}}(_0x4541,0x6f3d6));const SUPABASE_URL='__SUPABASE_URL__',SUPABASE_ANON_KEY=_0x3afe9c(0x138),SUPABASE_SERVICE_ROLE_KEY=_0x3afe9c(0x13d),supabase=window['supabase'][_0x3afe9c(0x173)](SUPABASE_URL,SUPABASE_ANON_KEY),adminSupabase=window[_0x3afe9c(0x109)][_0x3afe9c(0x173)](SUPABASE_URL,SUPABASE_SERVICE_ROLE_KEY);let adminUser=null;const loginModal=document[_0x3afe9c(0x151)](_0x3afe9c(0x15d)),dashboard=document[_0x3afe9c(0x151)](_0x3afe9c(0x155)),loginForm=document['getElementById']('login-form'),loginError=document[_0x3afe9c(0x151)](_0x3afe9c(0x16e)),logoutBtn=document['getElementById'](_0x3afe9c(0x165)),addUserForm=document[_0x3afe9c(0x151)](_0x3afe9c(0x147)),newUserEmail=document[_0x3afe9c(0x151)](_0x3afe9c(0x167)),addUserMsg=document[_0x3afe9c(0x151)](_0x3afe9c(0x149)),userList=document[_0x3afe9c(0x151)]('user-list'),searchList=document[_0x3afe9c(0x151)](_0x3afe9c(0x108)),watchList=document['getElementById'](_0x3afe9c(0x15b)),bookmarkList=document[_0x3afe9c(0x151)](_0x3afe9c(0x14e)),dateSpan=document['querySelector'](_0x3afe9c(0x140)),navItems=document[_0x3afe9c(0x15f)](_0x3afe9c(0x10e)),sections=document['querySelectorAll'](_0x3afe9c(0x135));dateSpan[_0x3afe9c(0x150)]=_0x3afe9c(0x119)+new Date()[_0x3afe9c(0x175)](_0x3afe9c(0x148),{'month':'short','day':_0x3afe9c(0x158)}),loginForm['addEventListener'](_0x3afe9c(0x110),async _0x325336=>{const _0x2f8724=_0x3afe9c;_0x325336['preventDefault']();const _0x17a7e3=document[_0x2f8724(0x151)]('admin-email')[_0x2f8724(0x156)],_0x5c51a6=document['getElementById']('admin-password')['value'],{data:_0x4af46a,error:_0x243af0}=await supabase[_0x2f8724(0x161)]['signInWithPassword']({'email':_0x17a7e3,'password':_0x5c51a6});if(_0x243af0){loginError[_0x2f8724(0x150)]=_0x243af0['message'],loginError[_0x2f8724(0x171)][_0x2f8724(0x164)](_0x2f8724(0x169));return;}adminUser=_0x4af46a['user'],loginModal[_0x2f8724(0x171)][_0x2f8724(0x142)](_0x2f8724(0x169)),dashboard[_0x2f8724(0x171)][_0x2f8724(0x164)](_0x2f8724(0x169)),loginError['classList'][_0x2f8724(0x142)](_0x2f8724(0x169)),showSection('users'),loadUsers();}),logoutBtn[_0x3afe9c(0x137)](_0x3afe9c(0x15a),async()=>{const _0x3b37fb=_0x3afe9c;await supabase[_0x3b37fb(0x161)][_0x3b37fb(0x113)](),adminUser=null,dashboard[_0x3b37fb(0x171)][_0x3b37fb(0x142)]('hidden'),loginModal['classList']['remove'](_0x3b37fb(0x169)),document[_0x3b37fb(0x151)](_0x3b37fb(0x130))[_0x3b37fb(0x156)]='',document[_0x3b37fb(0x151)]('admin-password')[_0x3b37fb(0x156)]='',loginError[_0x3b37fb(0x171)][_0x3b37fb(0x142)](_0x3b37fb(0x169));}),navItems[_0x3afe9c(0x160)](_0x58cdef=>{_0x58cdef['addEventListener']('click',_0x2fd48f=>{const _0x24001f=_0x2310;_0x2fd48f[_0x24001f(0x16c)]();const _0x17f38a=_0x58cdef[_0x24001f(0x13c)][_0x24001f(0x16d)];if(_0x17f38a===_0x24001f(0x154)){logoutBtn['click']();return;}showSection(_0x17f38a),updateActiveNav(_0x58cdef);if(_0x17f38a===_0x24001f(0x10f))loadUsers();if(_0x17f38a==='search-history')loadSearchHistory();if(_0x17f38a===_0x24001f(0x131))loadWatchHistory();if(_0x17f38a===_0x24001f(0x14f))loadBookmarks();});});function _0x2310(_0x447573,_0x2c63ce){const _0x4541e7=_0x4541();return _0x2310=function(_0x231048,_0x4e8060){_0x231048=_0x231048-0x108;let _0x6a6ddd=_0x4541e7[_0x231048];return _0x6a6ddd;},_0x2310(_0x447573,_0x2c63ce);}function _0x4541(){const _0x3e21ad=['dataset','__SUPABASE_SERVICE_ROLE_KEY__','createElement','\x20|\x20','.date','N/A','add','Are\x20you\x20sure\x20you\x20want\x20to\x20log\x20out\x20all\x20sessions\x20for\x20this\x20user?','<div\x20class=\x22details\x22>','318062zZKHBj','select','add-user-form','en-US','add-user-msg','\x0a\x20\x20\x20\x20\x20\x20<span\x20class=\x22user-email\x22>','4bvgOyZ','message','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22details\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22title\x22>User:\x20','bookmark-list','bookmarks','textContent','getElementById','Error\x20adding\x20user.','season','logout','dashboard','value','Error\x20logging\x20out\x20user:\x20','numeric','\x27)\x22>Logout\x20Sessions</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-delete\x22\x20onclick=\x22deleteUser(\x27','click','watch-list','<div>Season:\x20','login-modal','trim','querySelectorAll','forEach','auth','title','media_type','remove','logout-btn',')</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22meta\x22>Media\x20ID:\x20','new-user-email','*,\x20users:auth.users!user_id_fkey(email)','hidden','Are\x20you\x20sure\x20you\x20want\x20to\x20remove\x20','style','preventDefault','section','login-error','User\x20','episode','classList','\x20|\x20Poster:\x20','createClient','green','toLocaleDateString','\x20added\x20successfully!','Unknown','auth.users','348kZkMRr','search-list','supabase','user_search_history','allowed_users','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','red','.nav-item[data-section]','users','submit','added_at','196920oOpoKI','signOut','searched_at','2036715qjioBv','warn','error','single','Today,\x20','</div>','25672815nGwemx','media_id','innerHTML','email','98833nmuEps','toLocaleString','2669181OqmTEa','color','<div\x20class=\x22title\x22>User:\x20','<div>Episode:\x20','appendChild','order','\x20from\x20approved\x20users?','s\x20|\x20Watched:\x20','</div>\x0a\x20\x20\x20\x20','admin','query','\x20|\x20Duration:\x20','User\x20not\x20found\x20for\x20email:\x20','4069736WdYxYo','\x27)\x22>Delete</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','admin-email','watch-history','user_watch_history','\x20|\x20Added:\x20','active','.section','delete','addEventListener','__SUPABASE_ANON_KEY__','poster_path','from','</span>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22user-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-logout-session\x22\x20onclick=\x22logoutUserSessions(\x27'];_0x4541=function(){return _0x3e21ad;};return _0x4541();}function showSection(_0x284962){const _0x1e4153=_0x3afe9c;sections[_0x1e4153(0x160)](_0x43303d=>_0x43303d['classList'][_0x1e4153(0x142)]('hidden')),document[_0x1e4153(0x151)](_0x284962+'-section')['classList'][_0x1e4153(0x164)](_0x1e4153(0x169));}function updateActiveNav(_0x43e61a){const _0x528c40=_0x3afe9c;navItems[_0x528c40(0x160)](_0x4638ff=>_0x4638ff[_0x528c40(0x171)][_0x528c40(0x164)](_0x528c40(0x134))),_0x43e61a[_0x528c40(0x171)][_0x528c40(0x142)]('active');}addUserForm['addEventListener'](_0x3afe9c(0x110),async _0x4c19fb=>{const _0x55b0ce=_0x3afe9c;_0x4c19fb[_0x55b0ce(0x16c)]();const _0x49dd04=newUserEmail[_0x55b0ce(0x156)][_0x55b0ce(0x15e)]();if(!_0x49dd04)return;const {error:_0x11eba7}=await supabase[_0x55b0ce(0x13a)](_0x55b0ce(0x10b))['insert']({'email':_0x49dd04});if(_0x11eba7){addUserMsg[_0x55b0ce(0x150)]=_0x55b0ce(0x152),addUserMsg['classList'][_0x55b0ce(0x164)](_0x55b0ce(0x169)),addUserMsg[_0x55b0ce(0x16b)][_0x55b0ce(0x122)]=_0x55b0ce(0x10d),console[_0x55b0ce(0x117)](_0x11eba7);return;}addUserMsg[_0x55b0ce(0x150)]=_0x55b0ce(0x16f)+_0x49dd04+_0x55b0ce(0x176),addUserMsg[_0x55b0ce(0x16b)][_0x55b0ce(0x122)]=_0x55b0ce(0x174),addUserMsg[_0x55b0ce(0x171)][_0x55b0ce(0x164)]('hidden'),newUserEmail[_0x55b0ce(0x156)]='',loadUsers();});async function deleteUser(_0x477ccd){const _0x453bb7=_0x3afe9c;if(!confirm(_0x453bb7(0x16a)+_0x477ccd+_0x453bb7(0x127)))return;const {error:_0x23b966}=await adminSupabase['from'](_0x453bb7(0x10b))[_0x453bb7(0x136)]()['eq'](_0x453bb7(0x11e),_0x477ccd);if(_0x23b966){alert('Error\x20deleting\x20user:\x20'+_0x23b966[_0x453bb7(0x14c)]),console[_0x453bb7(0x117)](_0x23b966);return;}loadUsers();}async function logoutUserSessions(_0x4085de){const _0x320216=_0x3afe9c;if(!confirm(_0x320216(0x143)))return;const {error:_0xb9e320}=await adminSupabase[_0x320216(0x161)][_0x320216(0x12a)]['signOut'](_0x4085de);if(_0xb9e320){alert(_0x320216(0x157)+_0xb9e320[_0x320216(0x14c)]),console[_0x320216(0x117)](_0xb9e320);return;}alert('User\x20sessions\x20logged\x20out\x20successfully.');}async function loadUsers(){const _0x10ebe8=_0x3afe9c,{data:_0x25cfde,error:_0x20dc7d}=await supabase[_0x10ebe8(0x13a)](_0x10ebe8(0x10b))[_0x10ebe8(0x146)]('email');if(_0x20dc7d){console['error'](_0x20dc7d);return;}userList[_0x10ebe8(0x11d)]='';for(const _0x551532 of _0x25cfde){const {data:_0x37c9dd,error:_0x467c0f}=await adminSupabase['from'](_0x10ebe8(0x178))['select']('id')['eq'](_0x10ebe8(0x11e),_0x551532['email'])[_0x10ebe8(0x118)]();if(_0x467c0f||!_0x37c9dd){console[_0x10ebe8(0x116)](_0x10ebe8(0x12d)+_0x551532[_0x10ebe8(0x11e)]);continue;}const _0x539e11=document[_0x10ebe8(0x13e)]('li');_0x539e11[_0x10ebe8(0x11d)]=_0x10ebe8(0x14a)+_0x551532[_0x10ebe8(0x11e)]+_0x10ebe8(0x13b)+_0x37c9dd['id']+_0x10ebe8(0x159)+_0x551532[_0x10ebe8(0x11e)]+_0x10ebe8(0x12f),userList['appendChild'](_0x539e11);}}async function loadSearchHistory(){const _0x4cb4af=_0x3afe9c,{data:_0x2bb597,error:_0x2c6926}=await adminSupabase[_0x4cb4af(0x13a)](_0x4cb4af(0x10a))[_0x4cb4af(0x146)](_0x4cb4af(0x168))[_0x4cb4af(0x126)](_0x4cb4af(0x114),{'ascending':![]});if(_0x2c6926){console[_0x4cb4af(0x117)](_0x2c6926);return;}searchList[_0x4cb4af(0x11d)]='',_0x2bb597['forEach'](_0xe1b29=>{const _0x4ce5c7=_0x4cb4af,_0x18518f=document[_0x4ce5c7(0x13e)]('li');_0x18518f[_0x4ce5c7(0x11d)]=_0x4ce5c7(0x14d)+(_0xe1b29['users']?.['email']||_0x4ce5c7(0x177))+'\x20|\x20Query:\x20'+_0xe1b29[_0x4ce5c7(0x12b)]+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22meta\x22>Searched:\x20'+new Date(_0xe1b29[_0x4ce5c7(0x114)])['toLocaleString']()+_0x4ce5c7(0x10c),searchList[_0x4ce5c7(0x125)](_0x18518f);});}async function loadWatchHistory(){const _0x24906c=_0x3afe9c,{data:_0x36b0bf,error:_0x5bbc73}=await adminSupabase[_0x24906c(0x13a)](_0x24906c(0x132))['select'](_0x24906c(0x168))['order']('watched_at',{'ascending':![]});if(_0x5bbc73){console[_0x24906c(0x117)](_0x5bbc73);return;}watchList[_0x24906c(0x11d)]='',_0x36b0bf[_0x24906c(0x160)](_0x180b35=>{const _0x1f31a4=_0x24906c;let _0x517eb0=_0x1f31a4(0x123)+(_0x180b35[_0x1f31a4(0x10f)]?.[_0x1f31a4(0x11e)]||_0x1f31a4(0x177))+_0x1f31a4(0x13f)+_0x180b35[_0x1f31a4(0x162)]+'\x20('+_0x180b35[_0x1f31a4(0x163)]+')</div>';if(_0x180b35[_0x1f31a4(0x153)])_0x517eb0+=_0x1f31a4(0x15c)+_0x180b35[_0x1f31a4(0x153)]+_0x1f31a4(0x11a);if(_0x180b35['episode'])_0x517eb0+=_0x1f31a4(0x124)+_0x180b35[_0x1f31a4(0x170)]+_0x1f31a4(0x11a);_0x517eb0+='\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22meta\x22>Media\x20ID:\x20'+_0x180b35[_0x1f31a4(0x11c)]+_0x1f31a4(0x12c)+_0x180b35['duration']+_0x1f31a4(0x128)+new Date(_0x180b35['watched_at'])['toLocaleString']()+_0x1f31a4(0x129);const _0x43bf69=document[_0x1f31a4(0x13e)]('li');_0x43bf69[_0x1f31a4(0x11d)]=_0x1f31a4(0x144)+_0x517eb0+_0x1f31a4(0x11a),watchList[_0x1f31a4(0x125)](_0x43bf69);});}async function loadBookmarks(){const _0x2cade4=_0x3afe9c,{data:_0x5a2ba8,error:_0x771777}=await adminSupabase[_0x2cade4(0x13a)]('user_bookmarks')[_0x2cade4(0x146)](_0x2cade4(0x168))[_0x2cade4(0x126)](_0x2cade4(0x111),{'ascending':![]});if(_0x771777){console[_0x2cade4(0x117)](_0x771777);return;}bookmarkList[_0x2cade4(0x11d)]='',_0x5a2ba8[_0x2cade4(0x160)](_0x1b4b9e=>{const _0x1e28ae=_0x2cade4,_0x5ab649=document['createElement']('li');_0x5ab649[_0x1e28ae(0x11d)]=_0x1e28ae(0x14d)+(_0x1b4b9e[_0x1e28ae(0x10f)]?.[_0x1e28ae(0x11e)]||'Unknown')+'\x20|\x20'+_0x1b4b9e[_0x1e28ae(0x162)]+'\x20('+_0x1b4b9e['media_type']+_0x1e28ae(0x166)+_0x1b4b9e['media_id']+_0x1e28ae(0x172)+(_0x1b4b9e[_0x1e28ae(0x139)]||_0x1e28ae(0x141))+_0x1e28ae(0x133)+new Date(_0x1b4b9e[_0x1e28ae(0x111)])[_0x1e28ae(0x120)]()+_0x1e28ae(0x10c),bookmarkList[_0x1e28ae(0x125)](_0x5ab649);});}